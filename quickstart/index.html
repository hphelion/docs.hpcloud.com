<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:exsl="http://exslt.org/common" xmlns:ng="http://docbook.org/docbook-ng" xmlns:fb="http://ogp.me/ns/fb#"><head>
<meta http-equiv="X-UA-Compatible" content="IE=7"/><link type="text/css" rel="stylesheet" href="css/shCoreDefault.css"/><script type="text/javascript" src="js/shCore.js"><!----></script><script type="text/javascript">
               SyntaxHighlighter.config.space = ' ';
               SyntaxHighlighter.all();
    </script>
<title>HP Cloud OS API Quick Start</title>
    <link rel="home" href="index.html" title="HP Cloud OS API Quick Start"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script type="text/javascript">
            //The id for tree cookie
            var treeCookieId = "treeview-204";
            var language = "en";
            var w = new Object();
            //Localization
            txt_filesfound = 'Results';
            txt_enter_at_least_1_char = "You must enter at least one character.";
            txt_browser_not_supported = "Your browser is not supported. Use Firefox or Chrome.";
            txt_please_wait = "Please wait. Search in progress...";
            txt_results_for = "Results for: ";
    </script>
    <style type="text/css">
            input {
            margin-bottom: 5px;
            margin-top: 2px;
            }

            .folder {
            display: block;
            height: 22px;
            padding-left: 20px;
            background: transparent url(images/folder.gif) 0 0px no-repeat;
            }
            
    </style>
    
    <link href="http://welcome.hp-ww.com/country/us/en/cs/images/i/favicon.ico" rel="shortcut icon"/>
    
    <link rel="stylesheet" type="text/css" href="css/positioning.css"/>
    <link rel="stylesheet" type="text/css" href="css/custom.css"/>
    <!--[if IE]>
	<link rel="stylesheet" type="text/css" href="css/ie.css"/>
	<![endif]-->
    <link rel="stylesheet" type="text/css" href="css/jquery-ui-1.8.2.custom.css"/>
    <link rel="stylesheet" type="text/css" href="css/jquery.treeview.css"/>
    <link rel="stylesheet" type="text/css" href="css/hp-apidoc.css?randomNo=Math.random()"/>    
    <script type="text/javascript" src="js/jquery-1.4.3.min.js"><!----></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.2.custom.min.js"><!----></script>
    <script type="text/javascript" src="js/jquery.cookie.js"><!----></script>
    <script type="text/javascript" src="js/jquery.treeview.min.js"><!----></script>
    <script type="text/javascript" src="js/jquery.qtip-1.0.0-rc3.min.js"><!--jQuery plugin for glossary popups. --></script>
    <script type="text/javascript" src="js/htmlFileList.js"><!----></script>
    <script type="text/javascript" src="js/htmlFileInfoList.js"><!----></script>
    <script type="text/javascript" src="js/nwSearchFnt.js"><!----></script>
    <script type="text/javascript" src="js/stemmers/en_stemmer.js"><!--//make this scalable to other languages as well.--></script>
    <script type="text/javascript" src="js/index-1.js"><!----></script>
    <script type="text/javascript" src="js/index-2.js"><!----></script>
    <script type="text/javascript" src="js/index-3.js"><!----></script>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', '']);

        _gaq.push(['_setDomainName', '.hpcloud.com']);	        
    </script>
    <script type="text/javascript" src="js/ga.js"><!-- --></script>
    <script type="text/javascript">
	    (function(){var twitterWidgets = document.createElement('script');
        twitterWidgets.type = 'text/javascript';
        twitterWidgets.async = true;
        twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
        // Setup a callback to track once the script loads.
        twitterWidgets.onload = _gaq.trackTwitter;
        document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
        })();
      </script>

</head>

    <body><a name="_top"></a>
    <div id="header">
        <a target="_seld" href="">
            <img src="images/hp_logo.png" style="margin-top:0px;" alt="HP.com"/></a>
        
        <h1>HP Cloud OS API Quick Start</h1>
        <div id="navheader" align="right"><!---->
            <table class="navLinks">
                <tr><td class="apidoc"><a id="showHideButton" onclick="showHideToc(); _gaq.push(['_trackEvent', 'Header', 'show/hide', 'click', 1]);" class="pointLeft" title="Hide TOC tree">Sidebar
                            </a></td></tr></table></div></div>
        
        <div id="toolbar" class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
            <div id="toolbar-left"><p class="breadcrumbs"><a href="../index.html">HP Cloud OS Doc Home</a> &raquo; <a href="index.html" style="padding: 0px 0px 0px 10px;">HP Cloud OS API Quick Start</a></p></div></div><div id="content"><div class="statustext"> </div><div class="chapter"><div xmlns="" class="titlepage"><div>
                
                <div>
                    <!-- <h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="openstack-api-quick-start"> </a>HP Cloud OS API Quick Start</h2> --> 
                </div></div></div>

                
                <div class="section"><div xmlns="" class="titlepage"><div>
                    <div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Compute_API_Quick_Start"></a>HP Cloud OS API Quick Start</h2></div></div></div>

                    <!-- Table of Contents --> 
                    <div class="toc"><p><strong>Contents</strong></p>
                        <dl>
                            <dt><span class="section"><a href="index.html#Cloud-OS-API-Introduction">HP Cloud OS API Introduction</a></span></dt>
                            <dd>
                                <dl><dt><span class="section"><a href="index.html#Prerequisites">Prerequisites</a></span></dt>
                                    <dt><span class="section"><a href="index.html#What-is-Cloud-OS">What is HP Cloud OS?</a></span></dt>
                                    <dt><span class="section"><a href="index.html#What-are-the-Cloud-OS-Services">What are the HP Cloud OS Services?</a></span></dt>
                                    <dt><span class="section"><a href="index.html#What-is-the-Interactive-REST-API-Documentation-app">What is the HP Cloud OS API Documentation?</a></span></dt>
                                    <dt><span class="section"><a href="index.html#API-Documentation-Ports-per-Service">API Documentation Ports per Service</a></span></dt>
                                    <dt><span class="section"><a href="index.html#API-Security-Tokens">API Security Tokens</a></span></dt>
                                </dl>
                            </dd>
                            <dt><span class="section"><a href="index.html#Use-Case-How-to-Provision-Topologies-OpenStack">Use Case #1: Define &amp; Provision a Topology (Grizzly)</a></span></dt>
                            <!-- <dd>
                                <dl>
                                    <dt><span class="section"><a href="index.html#Create-Resource-Pool-OpenStack">Task 1: Create a Resource Pool (Grizzly)</a></span></dt>
                                    <dt><span class="section"><a href="index.html#Post-Infrastructure-Topology-Document-OpenStack">Task 2: Post an Infrastructure Topology Document (Grizzly)</a></span></dt>
                                    <dt><span class="section"><a href="index.html#Provision-Topology-OpenStack">Task 3: Provision the Topology (Grizzly)</a></span></dt>
                                    <dt><span class="section"><a href="index.html#Verify-Provisioning-Job-Completion-OpenStack">Task 4: Verify Provisioning Job Completion (Grizzly)</a></span></dt>
                                    <dt><span class="section"><a href="index.html#Verify-Realized-Topology-OpenStack">Task 5: Verify the Realized Topology (Grizzly)</a></span></dt>
                            </dd> --> 
                            <dt><span class="section"><a href="index.html#Use-Case-How-to-Provision-Topologies-HPCS">Use Case #2: Define &amp; Provision a Topology (Diablo)</a></span></dt>
                            <!-- <dd>
                                <dl>
                                    <dt><span class="section"><a href="index.html#Create-Resource-Pool-HPCS">Task 1: Create a Resource Pool (Diablo)</a></span></dt>
                                    <dt><span class="section"><a href="index.html#Post-Infrastructure-Topology-Document-HPCS">Task 2: Post an Infrastructure Topology Document (Diablo)</a></span></dt>
                                    <dt><span class="section"><a href="index.html#Provision-Topology-HPCS">Task 3: Provision the Topology (Diablo)</a></span></dt>
                                    <dt><span class="section"><a href="index.html#Verify-Provisioning-Job-Completion-HPCS">Task 4: Verify Provisioning Job Completion (Diablo)</a></span></dt>
                                    <dt><span class="section"><a href="index.html#Verify-Realized-Topology-HPCS">Task 5: Verify the Realized Topology (Diablo)</a></span></dt>
                                </dl>
                            </dd>   -->        
                            
                            <dt><span class="section"><a href="index.html#Use-Case-Deprovision-Topology-Grizzly-or-Diablo">Use Case #3: Deprovision a Topology (Grizzly or Diablo)</a></span></dt>   
                            <dt><span class="section"><a href="index.html#Next-Steps">Next Steps</a></span></dt>
                        </dl>
                    </div>
                           
                    
<div class="section">
     <div xmlns="" class="titlepage"><div><div>                     
         <h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Cloud-OS-API-Introduction"></a>HP Cloud OS API Introduction</h2></div></div></div>                    
                                       
    <p>Welcome to the HP Cloud OS 1.0 release. For developers, HP Cloud OS includes a REST API that allows you to interact programmatically with your clouds.  
        This API Quick Start topic is designed to help you learn the API by introducing the HP Cloud OS services and walking through several use cases.  
        On your deployed clouds, we have also provided the HP Cloud OS API Documentation app. It's a framework for describing, producing, consuming, and visualizing the API. 
        The app includes comprehensive reference API documentation and an interactive environment where you can try each request and view the response from your server. 
    </p>  
    
    <p>Also refer to the <a class="link" href="http://docs.openstack.org" target="_new1">OpenStack API documentation</a>. </p>    
    
    
     
    <div class="section">
        <div xmlns="" class="titlepage"><div><div>                     
            <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Prerequisites"></a>Prerequisites</h3></div></div></div>                    
        
        
        <p>This topic assumes that you have already:</p>
        
        <ol>
            <li>Installed and set up HP Cloud OS, following the instructions in the <i>HP Cloud OS Operational Dashboard Guide</i>.</li>
            <li>Used the HP Cloud OS Operational Dashboard to define the OS image and related components for your cloud.</li>
            <li>Launched an OS image on your cloud instance.</li>
            <li>Created a project.</li>
        </ol>
        
        <p>If you have not yet set up a cloud, refer to the <i>HP Cloud OS Operational Dashboard Guide</i> for instructions.</p> 
        
        <p style="border: 1px dashed gray; padding: 4px 4px 4px 4px;"><b>Note:</b> After a cloud environment has been created 
            in the Operational Dashboard, you manage the cloud            
            through the Administration Dashboard. The Administration Dashboard provides a simplified means             
            of creating and managing Cloud Connector resources, infrastructure topology templates, resource             
            binding documents, as well as the ability to provision a composite topology described by the             
            topology templates and binding documents.<br/><br/>For details, see the <i>HP Cloud OS Operational Dashboard Guide</i> and 
            the <i>HP Cloud OS Administration Dashboard Guide</i>, which were provided on the FTP site for this 1.0 release.</p>
        
        <p>To submit REST API calls, you will need your Keystone authentication credentials so you can generate security tokens. The steps are described in the 
            <a href="index.html#API-Security-Tokens">API Security Tokens</a> section of this topic.</p>
   
         <p>As you walk through the examples in this topic and submit REST calls, you'll need to provide the actual values that pertain to your cloud. We'll 
             identify the properties you must modify in the REST calls, including some that are generated by prior calls and shown in the POST responses.</p>
        
        <p>In call payloads, we recommend that you set the scope to the default <code>user-project</code> level, 
            to prevent unintended impacts on other projects.</p>
           
     
    <div class="section">
        <div xmlns="" class="titlepage"><div><div>                     
            <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="What-is-Cloud-OS"></a>What is HP Cloud OS?</h3></div></div></div>                    
        
    
        <p>HP Cloud OS is an open and extensible architecture that leverages the power of OpenStack technology, 
            the fastest growing open-source cloud computing platform community. HP Cloud OS is a technology platform that 
        enables the products in the HP Converged Cloud portfolio to enhance workload portability, simplify installation and enhance lifecycle 
        management across private, public and hybrid cloud environments.  You can use the HP Cloud OS technology to help accelerate business outcomes.</p>
        
        
        
        
        <p>The HP Cloud OS technology platform includes enhanced features, 
        providing immediate advantages for IT sysadmins and developers:</p>
                    
                    <ul>
                        <li>A unified installer that packages together all the HP Cloud OS components along with the OpenStack components into a single ISO, 
                            saving you time and effort to get started.</li>
                        <li>Additional topology services, which we'll introduce in this topic: Eve, Eden, Focus and Peer.</li>
                        <li>Pre-configured, optimized 'flavors' to meet a variety of computing and storage scenarios and requirements.</li>
                        <li>Two UIs to manage the operational and administrative tasks that are inherent in cloud-based computing.</li>
                        <li>HP Cloud OS API Documentation, featuring "Try it out!" request/response actions and embedded reference documentation.</li>
                        <li>A common architecture for all HP Converged Cloud technologies.</li>
                    </ul>
        
        <p><img style="padding: 10px 0px 0px 0px;" src="images/converged_cloud_concept.png"/></p>
            
           
        
        
    <div class="section">
        <div xmlns="" class="titlepage"><div><div>                     
            <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="What-are-the-Cloud-OS-Services"></a>What are the HP Cloud OS Services?</h3></div></div></div>                    
        
        <p>HP Cloud OS provides the following services:</p>
        
        <ul>
            <li>Eve - topology provisioning service</li>
            <li>Eden - execution container and utility service</li>
            <li>Focus - topology document repository service</li>
            <li>Peer - resource pools registry service</li>
        </ul>     
        
        <p>Here's a summary about the HP Cloud OS services:</p>
        <!-- TODO: Define a better class for tables --> 
        <table cellspacing="1" cellpadding="40">
            <tr><th class="apidoc">Service</th><th class="apidoc">Its Role in HP Cloud OS</th><th width="33%">Good to know...</th></tr>
            <tr valign="top">
                <td class="apidoc"><b>Eve</b></td>
                <td class="apidoc">Infrastructure Topology Provisioning Service and UI.
                    
                    <p>Allows you to:</p>
                
                <ul>
                    <li>Provision TOSCA-based infrastructure topology templates (composite, hybrid, and distributed).
                    </li>
                    <li>Separate template creation and resource pool binding, for simpler, reusable templates.
                    </li>
                    <li>Integrate via a plug-in model with Cloud API's (e.g., OpenStack Nova) for orchestrating provisioning.
                    </li>
                    <li>Create and configure network services such as virtual load-balancers and configuration management services.
                    </li>

                    
                </ul>
            </td><td class="apidoc"><b>TOSCA:</b><p>
                A standard means to describe the topology of applications along with dependent environments, services and artifacts inside a single service template.  
                TOSCA standard enables each customer to deploy and manage topologies against the capabilities offered by any cloud provider, regardless of the customer's  
                infrastructure or service model.</p>
            </td></tr>
            <tr valign="top">
                <td class="apidoc"><b>Eden</b></td>
                <td class="apidoc">A logical execution container for flexible deployment of web-scale, stateless, thread controlled, non-blocking coarse-grained services.

                    <p>Allows you to:</p>
                        
                        <ul>
                            <li>Retrieve the list of jobs</li>
                            <li>Retrieve information about a specific job</li>
                        </ul>
                        
                        <p>Returns: job id, name, state, % complete, starttime, endtime, URI for polling status, tenant ID, tasks executed for this job, and more.</p>
                </td><td class="apidoc"><b>About 'Jobs':</b>  
                    <p>
                    A 'job' is created when the user submits a desired topology to Eve and requests provisioning based on it. 
                    Eve creates the job, and Eden publishes status updates for it. Once the provisioning is finished, the job is marked as completed.  </p>
                </td></tr>
            <tr valign="top">
                <td class="apidoc"><b>Focus</b></td>
                <td class="apidoc">As the Topology Template Registry and Repository Service, Focus provides for persistent store and management of TOSCA-based templates.

                    <p>Allows you to:</p>
                    
                <ul>
                    <li>Search for documents based on criteria</li>
                    <li>Store new documents</li>
                    <li>Retrieve a version of an existing document</li>
                    <li>Update the contents and/or metadata of a document</li>
                    <li>Delete a document or a specific document version</li>
                </ul>
            </td><td class="apidoc"><b>Document Types:</b>
                <ul>
                <li>resource_binding</li>
                <li>ui_binding</li>
                <li>application_type</li>
                <li>infrastructure_type</li>
                <li>platform_type</li>
                <li>application_topology</li>
                <li>infrastructure_topology</li>
                <li>platform_topology</li>
                </ul>
            </td></tr>
            <tr valign="top">
                <td class="apidoc"><b>Peer</b></td>
                <td class="apidoc">Access and management of a resource pool registry. Locates compute and storage regions that can be used in provisioning.

                    <p>Allows you to:</p>
                    
                        <ul>
                            <li>Get the list of all resource pools for the current user</li>
                            <li>Register a new resource pool for the current user</li>
                            <li>Retrieve a resource pool based on its version</li>
                            <li>Update a resource pool</li>
                            <li>Delete a resource pool</li>
                        </ul>
                </td><td class="apidoc"><b>Resource Pools:</b>
                    <p>Consist of resources in a single administrative domain. As the Resource Pool Registry Service, Peer encapsulates a collection of 
                    descriptions about available resource pools.</p>
                </td></tr>            
        </table>
    
    
    
 
        <div class="section">
            <div xmlns="" class="titlepage"><div><div>                     
                <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="What-is-the-Interactive-REST-API-Documentation-app"></a>What is the HP Cloud OS API Documentation app?</h3></div></div></div>                    
            
            <p>The HP Cloud OS API Documentation app is a tool for describing, producing, and visualizing RESTful web services. 
                The goal is to enable client and documentation systems to update at the same pace as the server. The documentation of 
                methods, parameters, and models are tightly integrated into the server code, allowing APIs to stay in sync.</p>
            
            <p>The app is defined in JSON files and is presented in a web interface.  
                Here's an example of the app for the HP Cloud OS Focus service. 
            </p>

            <p><img style="border: 1px dashed gray;" src="images/rest_doc_focus_example1.png" alt=""/></p>
            
            <p>The app provides developers who are learning a new REST API quick and easy access to:</p>
            <ul>
                <li>Each call's URI syntax</li>
                <li>Whether there are any required or optional query parameters</li>
                <li>The data type of each parameter</li>
                <li>The model and its schema</li>
                <li>Interactive "Try it out!" dialogs that let you submit calls to your server, see the results, and figure out 
                        how you need to construct your REST URIs and any payloads. </li>
                </ul>
            
            <p>For example, in the HP Cloud OS API Documentation app for Focus, having entered a known ID of a document, we 
                can retrieve it from the repository with this GET /1/document_list/1672048591 call, using the "Try it out!" button:</p>
            
            <p><img style="border: 1px dashed gray;" alt="" src="images/try_it_out1.png"/> </p>
            
             
            <p>After clicking "Try it out!", the app displays the response. In this case, the specified document was found:</p>
            
            <p><img style="border: 1px dashed gray;" alt="" src="images/try_it_out2.png"/> </p>
            
             
            <p>The HP Cloud OS API Documentation includes other handy features, as you'll see when we walk through the use cases.</p>
             
            
            <div class="section">
                <div xmlns="" class="titlepage"><div><div>                     
                    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="API-Documentation-Ports-per-Service"></a>API Documentation Ports per Service</h3></div></div></div>   
 
                <p>Your HP Cloud OS instance comes installed with the HP Cloud OS API Documentation.  Each service reserves a unique port number in the URL.  
                    Using a Chrome or Firefox browser, you can open the HP Cloud OS API Documentation as follows. Just replace "my_server" with the DNS hostname 
                    or IP address of your server:</p>     
            
            <ul>
                <li>Eden: http://my_server:<b>21041</b>/eden/docs/index.html</li>
                <li>Eve: http://my_server:<b>21051</b>/eve/docs/index.html</li>
                <li>Focus: http://my_server:<b>21061</b>/docs/index.html</li>
                <li>Peer: http://my_server:<b>21071</b>/docs/index.html</li>                
            </ul>              

  
         
 <div class="section">
     <div xmlns="" class="titlepage"><div><div>                     
       <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="API-Security-Tokens"></a>API Security Tokens</h3></div></div></div>   
                    
 <p>Before you can submit REST calls to your HP Cloud OS instance, or use the interactive features of the HP Cloud OS API Documentation app, 
     you must generate a security token from Keystone, which is an OpenStack service. 
     If you skip this step, or if you have an expired token, you will receive a 401 error message in the response. Example:</p>
     
     <p><img style="border: 1px dashed gray;" alt="" src="images/unauthorized_example.png"/></p>
       
<p><b>Getting the Security Token from the HP Cloud OS Administration Dashboard</b></p>          
     
<p>The easiest, "non-programmatic" way to get the security token is via the HP Cloud OS Administration Dashboard.  If you have Admin access, login and click 
    Settings > Cloud API / CLI. The UI displays the current security token returned 
    from Keystone.  Example:</p>    
     
     <p><img style="border: 1px dashed gray;" alt="" src="images/admin_dashboard_settings_token.png"/> </p>
     
     <p>Copy the token's value and proceed to the next section of this topic.</p>
     
<p><b>Getting the Security Token via a REST Call</b></p>          
     
<p>To generate a security token, use:</p>
                            
http://&lt;keystone_server>:35357/v2.0/tokens</pre>
                        
<p>In the Header, specify:</p>
                    
<pre>
  content-type = application/json
  accept = application/json (or) application/xml
</pre>
                    
     <p>In the POST payload, use the following JSON to get a security token.  
         <b>The values shown here are just examples.  You must provide your username, password, and tenantName.</b> 
         Based on the information provided, Keystone will verify the roles and, if valid, return the token.</p>
     
<pre class="payload">
{
  "auth":{
    "passwordCredentials":{
    "username":"myusername",
    "password":"mysecretpassword"
    },
    "tenantName":"AdminProject"
  }
}
</pre>  
                    
<p>Before using the HP Cloud OS API Documentation app to try REST calls, note that you have many options to submit the request for a security token. </p>
     
<p>If you prefer <code>curl</code> commands, here's an example:</p>    
     
<pre>
curl -k -X 'POST' -v http://10.1.63.61:35357/v2.0/tokens -d '{"auth":{"passwordCredentials":{"username":"myusername",
         "password":"mysecretpassword"},"tenantName":"AdminProject"}}' -H 'Content-type: application/json' -H 'Accept: application/json' 
</pre> 

<p>If you prefer the REST clients that are available for Chrome or Firefox, here are some examples.</p>
                    
<p>In Chrome, go to the <a href="http://chrome.google.com/webstore" target="new2">Google Chrome WebStore</a> and 
    search for Advanced REST Client (or a similar plugin of your choice).  If you agree, install the plugin in Chrome. </p>  
       
<p>In Firefox, go to the <a href="https://addons.mozilla.org/en-us/firefox/addon/restclient/" target="new3">RESTclient Addon</a> pages 
    (or a similar plugin of your choice). If you agree, install the plugin in Firefox.</p>
                    
<p>Here's an example using Advanced REST Client in Chrome. We specify the server:port of the Controller Node where Keystone is installed, the 
    <code>/v2.0/tokens</code> URI, select POST, set the headers, 
    and include the payload JSON:</p>
                        
     <p><img style="border: 1px dashed gray;" alt="" src="images/restclient_post_security_token.png"/></p>   

      
<p>After clicking Send, which submits the request, the response contains the security token:  </p>
         
<p><img style="border: 1px dashed gray;" alt="" src="images/restclient_post_security_token_response.png"/></p>  
 
      
<p>Notice the expiration date &mdash; by default, each token expires in 24 hours. Although it's possible to set a longer expiration in keystone.conf, we recommend 
    that you keep the default value and programmatically submit the Keystone REST call to get a new token, as needed.</p>
     
 
     
<!--         
<p>If you need a token with a later expiration, edit the keystone.conf configuration file. Modify this parameter:</p>
<pre>
  # Amount of time a token should remain valid (in seconds)
  expiration = 86400
</pre>
<p>Related details: <a href="http://docs.openstack.org/trunk/openstack-compute/install/yum/content/keystone-conf-file.html" target="new6">keystone.conf 
topic in the OpenStack documentation</a>.</p>
--> 
 
     <p>From the Keystone POST response, copy the returned token's characters:</p>
     
     <p><img style="border: 1px dashed gray;" alt="" src="images/restclient_post_security_token_selected.png"/></p>
     
     <p>Then when you invoke the HP Cloud OS API Documentation app for each service (Peer, Focus, Eve, Eden),  
         paste the copied token value into the "(Paste Keystone Token Here)" textbox. Remember to click <b>Explore</b> to 
     submit the token; pasting it into the textbox alone does not validate the token.</p>
     
     <p>Example:</p>
     
     <p><img style="border: 1px dashed gray;" alt="" src="images/security_key_explore.png"/></p>
     
     <p>Do this for each service that you open (once per browser session).</p>
      
     <p>When you are ready, proceed to the next section to start going through the use cases.</p>
      
 
<!-- Use Cases -->
     
<div class="section">
    <div xmlns="" class="titlepage"><div><div>                     
     <h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Use-Case-How-to-Provision-Topologies-OpenStack"></a>Use Case #1: Define &amp; Provision a Topology (Grizzly)</h2></div></div></div>   
                                                
      <p>Let's walk through an infrastructure topology use case.  It illustrates how a series of API REST calls can be used to accomplish a set of tasks. In this first use 
          case, we will provision the resources to OpenStack (Grizzly).  A <a href="index.html#Use-Case-How-to-Provision-Topologies-HPCS">second use case</a> 
          shows the tasks for provisioning to HP Cloud (based on Diablo). You can use HP Cloud OS to provision resources to Grizzly or Diablo.</p>
    
    <table>
        <tr><th class="apidoc">Task</th><th class="apidoc">Service Used</th><th>REST API Operation and URI</th></tr>
        <tr><td class="apidoc">1. Create a resource pool</td><td class="apidoc">HP Cloud OS Peer</td><td>POST<br/>http://&lt;my_server>:21071/1/resource_pool_list</td></tr>
        <tr><td class="apidoc">2. Post an infrastructure topology document to your repository</td><td class="apidoc">HP Cloud OS Focus</td><td>POST<br/>http://&lt;my_server>:21061/1/document_list</td></tr>
        <tr><td class="apidoc">3. Provision the topology</td><td class="apidoc">HP Cloud OS Eve</td><td>POST<br/>http://&lt;my_server>:21051/eve/1/{projectId}/infrastructure_topology_list</td></tr>
        <tr><td class="apidoc">4. Verify that the asynchronous provisioning job completed</td><td class="apidoc">HP Cloud OS Eden</td><td>GET<br/>http://&lt;my_server>:21041/eden/1/{tenantId}/job_list/{jobID}</td></tr>        
        <tr><td class="apidoc">5. Verify the realized topology details via topologyId</td><td class="apidoc">HP Cloud OS Eve</td><td>GET<br/>http://&lt;my_server>:21051/eve/1/{projectId}/infrastructure_topology_list/{topologyId}</td></tr>        
    </table>
    
    
    
<!--  RESOURCE POOLS SECTION OF USE CASE #1. GRIZZLY: -->

<div class="section">
    <div xmlns="" class="titlepage"><div><div>                     
        <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Create-Resource-Pool-OpenStack"></a>Task 1: Create a Resource Pool (Grizzly)</h3></div></div></div>
                                
    <p>If you have not already done so, generate a security token with Keystone. See <a href="#API-Security-Tokens">API Security Tokens</a>.</p>
    
    <p>Now let's see how we can use HP Cloud OS to create a resource pool in an OpenStack (Grizzly) environment. The payloads that we'll enter are  
        different, in some cases, from the HP Cloud (based on Diablo) environment. </p>
    
    <p>To create a resource pool, use the HP Cloud OS Peer Service API on port 21071.</p>
    
    <p>URL for the POST operation: <code>http://&lt;my_server>:21071/1/resource_pool_list</code></p>
    
    <p>Start by accessing the Peer Service's HP Cloud OS API Documentation app on your HP Cloud OS instance. For example, in Chrome or Firefox, go to:</p>
    
    <p>http://my_server:21071/docs/index.html</p>
    
    <p>Paste your Keystone token into the "(Paste Keystone Token Here)" textbox and click Explore.</p>
    
    <p>Before expanding the POST section, which we'll use to create a new resource pool, expand the GET <code>/1/resource_pool_list</code> section.  You do not need 
    to enter any values &mdash; just scroll down and click the "Try it out!" button.  HP Cloud OS returns details about existing resource pools (if any). 
    Example GET response:</p>
    
    <p><img src="images/get_resource_pool_list_response_openstack.png" style="border: 1px dashed gray;" alt=""/></p>
    
    <p>Still in the HP Cloud OS API Documentation app for Peer, expand the POST operation, which we'll use to register a new resource pool. 
        The POST stores a new resource pool entry. 
        Ownership of the new resource pool is set permanently to the user identified by the token.  The call returns the Location 
        of the newly created resource with the unique ID ('index') as part of the URL path. </p>
    
    <p>For information about each property, see the brief descriptions in the Model section of the Peer Service's HP Cloud OS API Documentation app.</p>
    
    
    <!-- 
    <p>In your version of the HP Cloud OS API Documentation app for the Peer Service, in the expanded POST section, notice the following option for the Model Schema, which 
        is highlighted in this screen capture:</p>
    
    <p><img src="images/click_to_set_parameter_value.png"/></p>
    
    <p>If you click the label "Click to select as parameter value", the <code>resource_pool</code> textbox on the left is populated with the JSON properties for the 
        POST's payload (Body).  This is where you can define a resource pool.</p>
    
    <p>Also in the HP Cloud OS API Documentation app, you can toggle from the Model Schema to the Model.  The latter is where you'll find concise descriptions of each property. 
    An example of a portion of the resource pool model:</p>
    
    <p><img src="images/model_display_in_rest_doc.png"/></p>
    --> 
    

    <h4>Sample Resource Pool for OpenStack</h4>
    
    <p>You can skip this section if you do not want to create a resource pool for your local OpenStack; in that case, proceed to 
        <a href="index.html#Resource_Pool_for_HP_Cloud">Resource Pool for HP Cloud</a>.</p>
    
    <p>Here's a sample payload for the POST operation to create the resource pool within OpenStack.  
        Do not include an ID in the payload.  
        An ID will be generated by the call and shown in the response.
        See the list after the sample for important notes.</p>
    
<pre class="payload">
{
    "name": "openstack1",
    "scope": "project",
    "region_id": "RegionOne",
    "type": "openstack",
    "version": "Grizzly",
    "provider_url": "http://192.168.124.81:5000/v2.0/tokens",
    "provider_user_domain_name": "default",
    "provider_project_domain_name": "default"
}
</pre>   
    
    <p><b>Note:</b>  Before submitting the request, 
        change the sample values to your actual OpenStack values for:</p>
    
    <ul>
        <li><code>name</code></li>
        <li><code>region_id</code></li>
        <li>The IP address in <code>provider_url</code></li>                  
    </ul>
    
<p>When you're ready, click the "Try it out" button to POST the OpenStack resource pool request. </p>
    
    <p><b>In the HP Cloud OS API Documentation app, Submit the POST(s)</b></p>
    
    <p>In the POST's <code>resource_pool</code> parameter, enter the JSON for your resource pool request.  Example: </p>
    
  <p><img src="images/resource_pool_pending_post.png" style="border: 1px dashed gray;" alt="" /></p>
    
    <p>When you're ready, click the "Try it out" button to POST the resource pool request. </p>
    
    <p>Sample response as shown in the HP Cloud OS API Documentation app:</p>
    
    <p><img src="images/resource_pool_post_response_openstack.png" style="border: 1px dashed gray;" alt="" /></p>
    
<p>In the response, take note of the generated ID for the created resource pool.  Later on, if you do not recall the generated ID, use 
the following GET to return all resource pools:</p>

<pre>
GET http://my_server:21071/1/resource_pool_list
</pre>
    
<p>When you are ready, proceed to the next section.</p>
 


<div class="section">
        <div xmlns="" class="titlepage"><div><div>                     
            <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Post-Infrastructure-Topology-Document-OpenStack"></a>Task 2: Post an Infrastructure Topology Document (Grizzly)</h3></div></div></div>
                      
    <p>Having generated a resource pool with Peer, we're ready to use the HP Cloud OS platform to 
        create an infrastructure topology document for our OpenStack environment. </p>
    
    <p>To do this, use the HP Cloud OS Focus Service API on port 21061.</p>
    
    <p>URL for the POST operation: <code>http://&lt;my_server>:21061/1/document_list</code></p>    
        
    <p>Start by accessing the Focus Service's HP Cloud OS API Documentation app on your HP Cloud OS instance. For example, in Chrome or Firefox, go to:</p>
    
    <p>http://my_server:21061/docs/index.html</p>
        
    <p>In the HP Cloud OS API Documentation app for Focus, expand the POST operation, which we'll use to store the infrastructure topology document. The next  
    section presents a template for an infrastructure topology document.  You will not need to update the POST payload values &mdash; just remember to provide a name for your 
    document, and select the 'infrastructure_topology' 
    type from the pull-down menu:</p>
    
    <p><img src="images/select_infrastructure_topologies_pulldown.png" style="border: 1px dashed gray;" alt="" /></p>
    
    <p><b>Sample Infrastructure Topology Payload (Grizzly)</b></p>
    
    <p>You can skip this section if you do not want to create an infrastructure topology document for your local OpenStack; in that case, proceed to 
        <a href="index.html#Infrastructure_Topology_Payload_for_HP_Cloud">Sample Infrastructure Topology Payload (Diablo)</a>.</p>
    
    <p><b>Note:</b> There is no need to update the values in the following payload sample. 
        In the HP Cloud OS API Documentation app, just remember to provide a name for your 
        document, and select the 'infrastructure_topology' type 
        when you POST the document.</p>
    
<pre class="payload">
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?>
&lt;t:Definitions eve:template_version="4" id="2060385208" name="DiscoverDemoTopo" 
        targetNamespace="http://hp.com/topology/quasar" 
      xsi:schemaLocation="http://docs.oasis-open.org/tosca/ns/2011/12 tosca.xsd" 
        xmlns:ui="urn:x-hp:2012:software:eve:uibinding" 
      xmlns:eve="urn:x-hp:2012:software:eve:types" xmlns:t="http://docs.oasis-open.org/tosca/ns/2011/12" 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    &lt;t:Import namespace="urn:x-hp:2012:software:eve:types" location="EveTypes.xml" 
            importType="http://docs.oasis-open.org/tosca/ns/2011/12"/>
    &lt;t:ServiceTemplate id="service">
        &lt;t:TopologyTemplate>
             &lt;t:NodeTemplate name="DBSubnet" id="Network0001" type="eve:NetworkSegmentType"/>
            &lt;t:NodeTemplate name="DBSrvGrp" id="Server0001" type="eve:ServerGroupType"/>
            &lt;t:NodeTemplate name="DB Storage" id="Volume0001" type="eve:VolumeGroupType"/>
            &lt;t:RelationshipTemplate id="rel0001" type="eve:hasNetworkInterfaceTo">
                &lt;t:SourceElement ref="Server0001"/>
                &lt;t:TargetElement ref="Network0001"/>
            &lt;/t:RelationshipTemplate>
            &lt;t:RelationshipTemplate id="rel0002" type="eve:hasAttachedVolume">
                &lt;t:SourceElement ref="Server0001"/>
                &lt;t:TargetElement ref="Volume0001"/>
            &lt;/t:RelationshipTemplate>
        &lt;/t:TopologyTemplate>
    &lt;/t:ServiceTemplate>
&lt;/t:Definitions> 
</pre>      
    
    <p><b>In the HP Cloud OS API Documentation app, Submit the POST</b></p>
    
    <p>When you're ready, click the "Try it out" button to POST the infrastructure topology document request. </p>
    
    <p>In the response, <b>note the document id and project_id</b>, as you'll need these ID values in the next task for the use case.</p>
    
    <p>Example POST response:</p>
    
    <p><img src="images/example_post_document_response_openstack.png" style="border: 1px dashed gray;" alt="" /></p>
        
    <p>When you are ready, proceed to the next section.</p>
        
        
<!-- PROVISIONING TASK -->
        
<div class="section">
    <div xmlns="" class="titlepage"><div><div>
        <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Provision-Topology-OpenStack"> </a>Task 3: Provision the Topology (Grizzly)</h3></div></div></div>
                                        
    <p>Having generated a resource pool with Peer, and an infrastructure topology document with Focus, 
        we are ready to use the HP Cloud OS platform to provision the resources to our OpenStack environment.  
        To do this, use the HP Cloud OS Eve Service API on port 21051.</p>
    
    <p>URL for the POST operation: <code>http://&lt;my_server>:21051/eve/1/{projectId}/infrastructure_topology_list</code></p>  
    
    <p>The Eve Service API submits a binding document (XML or JSON) to be provisioned. The binding document is provisioned only based on the 
        received token's authorization.</p>
    
    <p>Note that provisioning is an asynchronous operation in the API; it returns a Job that can be polled to determine completion.</p>
    
    <p>Start by accessing the Eve Service's HP Cloud OS API Documentation app on your HP Cloud OS instance. For example, in Chrome or Firefox, go to:</p>
    
    <p>http://my_server:21051/eve/docs/index.html</p>
    
    <p><b>Binding Payload for Provisioning the Topology to OpenStack (Grizzly)</b></p> 
    
    <p><b>Note:</b> You can skip this section if you do not want to provision the topology to your local OpenStack; in that case, proceed to 
        <a href="index.html#Binding_Payload_for_Provisioing_the_Topology_to_HP_Cloud">Binding Payload for Provisioning the Topology to HP Cloud</a>.</p>    
    
<p>In the following sample binding payload for provisioning to OpenStack, update the <b><font color="red">RED values</font></b>.  You will need to change:</p>
    
    <ul>
        <li>In <code>template_ref</code>:
            <ul>
                <li>The IP address of the HP Cloud OS Controller node that is running Cloud OS services</li>
                <li>The infrastructure topology document ID, 
                    which was returned in the POST response of the Focus Service API document creation 
                    (Task 3 of this use case)</li>
            </ul></li>
        <li>In <code>eve:network_ref</code>, the Network ID</li>
        <li>In <code>eve:resource_pool_ref</code>, the resource pool ID</li>
        <li>In <code>eve:image_id</code>, the image ID</li>
        <li>In <code>eve:key_name</code>, the Keypair name</li>
    </ul>
    
    <b><font color="red">
        
    </font></b>
        
        
      
<pre class="payload">
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?>
&lt;b:resource_pool_binding xmlns:eve="urn:x-hp:2012:software:eve:types" xmlns:b="urn:x-hp:software:2012:eve:binding">
  &lt;b:template_ref>http://<b><font color="red">10.1.48.51</font></b>:21061/1/document_list/<b><font color="red">1286080608</font></b>&lt;/b:template_ref>
  &lt;b:template_version>1&lt;/b:template_version>
  &lt;b:topology_name>grizzly_template1&lt;/b:topology_name>

    &lt;b:binding id="Network0001">
      &lt;eve:_modifiable_properties>&lt;/eve:_modifiable_properties>
      &lt;eve:segment_type>subnet&lt;/eve:segment_type>
      &lt;eve:network_ref><b><font color="red">377ef9ef-e515-4b8a-bc0f-222bb32b9b08</font></b>&lt;/eve:network_ref>
      &lt;eve:segment_name>db_subnet&lt;/eve:segment_name>
      &lt;eve:segment_description>db subnet&lt;/eve:segment_description>
      &lt;eve:mask_size>28&lt;/eve:mask_size>
      &lt;eve:enable_dhcp>True&lt;/eve:enable_dhcp>
      &lt;eve:resource_pool_ref><b><font color="red">75</font></b>&lt;/eve:resource_pool_ref>
    &lt;/b:binding>

    &lt;b:binding id="Server0001">
      &lt;eve:_modifiable_properties>&lt;/eve:_modifiable_properties>
      &lt;eve:_min_instances>1&lt;/eve:_min_instances>
      &lt;eve:instance_name_prefix>test&lt;/eve:instance_name_prefix>
      &lt;eve:flavor_id>2&lt;/eve:flavor_id>
      &lt;eve:image_id><b><font color="red">babab002-865a-4706-b5fe-7cecb7e38158</font></b>&lt;/eve:image_id>
      &lt;eve:key_name><b><font color="red">adminkey</font></b>&lt;/eve:key_name>
      &lt;eve:resource_pool_ref><b><font color="red">75</font></b>&lt;/eve:resource_pool_ref>
    &lt;/b:binding>

    &lt;b:binding id="Volume0001">
      &lt;eve:_modifiable_properties>&lt;/eve:_modifiable_properties>
      &lt;eve:_min_instances>1&lt;/eve:_min_instances>
      &lt;eve:instance_name_prefix>test&lt;/eve:instance_name_prefix>
      &lt;eve:size_in_gb>1&lt;/eve:size_in_gb>
      &lt;eve:volume_type/>
      &lt;eve:resource_pool_ref><b><font color="red">75</font></b>&lt;/eve:resource_pool_ref>
    &lt;/b:binding>

    &lt;b:binding id="rel0001">
      &lt;eve:security_group_ref/>
      &lt;eve:security_group_name>db_group&lt;/eve:security_group_name>
      &lt;eve:security_group_description>db grp&lt;/eve:security_group_description>
      &lt;eve:port_list>22,8080&lt;/eve:port_list>
      &lt;eve:assign_floating_ip>False&lt;/eve:assign_floating_ip>
    &lt;/b:binding>

    &lt;b:binding id="rel0002">
      &lt;eve:device>/dev/vdc&lt;/eve:device>
    &lt;/b:binding>

&lt;/b:resource_pool_binding>
</pre>
    

    <p><b>How to retrieve the network ID, image ID, and Key pair name:</b></p>
    
    <p>The network id, image id, key pair name can be retrieved from the HP Cloud OS Administration Dashboard, or by executing Keystone CLI commands from the controller node.  
        Before running these commands, you need to make sure the following environment variables are set:</p>
    
<pre>
export OS_TENANT_NAME=AdminProject
export OS_USERNAME=Admin
export OS_PASSWORD=secretword
export OS_AUTH_URL="http://&lt;Keystone server IP>:5000/v2.0/"
</pre>
    
<p>Then enter the commands shown in the following examples:</p>
    
<pre>
crowbar@d00-50-56-9f-04-d2:~$ <font color="blue"><b>glance image-list</b></font>
+--------------------------------------+------------+-------------+------------------+-----------+--------+
| ID                                   | Name       | Disk Format | Container Format | Size      | Status |
+--------------------------------------+------------+-------------+------------------+-----------+--------+
| bccda195-c554-4a98-9c7b-1b787d0442f7 | Ubuntu1204 | qcow2       | bare             | 252379136 | active |
+--------------------------------------+------------+-------------+------------------+-----------+--------+
            
crowbar@d00-50-56-9f-04-d2:~$ <font color="blue"><b>quantum net-list</b></font>
+--------------------------------------+--------------+-------------------------------------------------------+
| id                                   | name         | subnets                                               |
+--------------------------------------+--------------+-------------------------------------------------------+
| 2c343d6b-5932-4194-b453-000916d29c65 | int-network  | 1d6f5396-7dc1-4eb7-8559-407087ae1752 192.168.100.0/24 |
| 9f663fbc-0b38-41b6-b1b5-a6ae2365e853 | ext-network  | 55d01c4c-6b64-4579-a027-d209259b8e18 10.1.0.0/18      |
| dbdc92ea-a060-403f-9fca-3e6e097046d1 | int-network1 | 03956bed-a3e3-4b11-ae37-6e6c614ed84a 192.168.1.0/24   |
+--------------------------------------+--------------+-------------------------------------------------------+
            
            
crowbar@d00-50-56-9f-04-d2:~$ <font color="blue"><b>nova keypair-list</b></font>
+----------+-------------------------------------------------+
| Name     | Fingerprint                                     |
+----------+-------------------------------------------------+
| adminkey | 0f:44:09:c8:c6:78:36:e4:0a:16:6b:0f:fb:c0:55:30 |
+----------+-------------------------------------------------+
</pre>
    
   
    <p><b>In the HP Cloud OS API Documentation app, Submit the POST</b></p>
    
    <p>On the POST form, enter the <code>projectId</code> value (returned by the prior response in the Focus document_list API), and enter your 
    binding payload in the <code>BindingDocument</code> textbox.  </p>
    
    <!-- <p><img src="images/binding_request_payload.png" style="border: 1px dashed gray;" alt="" /></p> --> 
    
    <p>When you're ready, click the "Try it out" button to POST the infrastructure topology document request. </p>
        
    <p>In the response, take note of the Job ID and the Tenant ID.  You will need these values in the next task of the use case. </p>
    
    <p>Example POST response:</p>
    
    <p><img src="images/binding_response1_openstack.png" style="border: 1px dashed gray;" alt="" /></p>        
        
        <p>Recall that provisioning is an asynchronous operation in the API; it returns a Job ID that can be polled to 
        determine completion. To return the status of the provisioning job, use the Eden Service API (port 21041) as described in the next task. Also 
        notice that the response returned a Tenant ID.</p>    
        
    
    <div class="section">
        <div xmlns="" class="titlepage"><div><div>                     
            <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Verify-Provisioning-Job-Completion-OpenStack"></a>Task 4: Verify Provisioning Job Completion (Grizzly)</h3></div></div></div>
        
        <p>As noted in the prior section, provisioning is an asynchronous operation in the API. It returns a Job ID that can be polled to 
            determine completion. To return the status of the provisioning job, use the Eden Service API (port 21041) as described in this task.</p> 
        
        <p>URL for the GET operation: <code>http://&lt;my_server>:21041/eden/1/{tenantId}/job_list/{jobID}</code></p>  
  
            
            <p>The values to use in the GET were returned in the Eve POST response, Task 4 of this use case.</p>
        
       <!--  <p><img src="images/tenant_and_job_ids.png" style="border: 1px dashed gray;" alt="" /></p> --> 
        
        <p>In the GET request, specify the job number.  In this example, it is 2039.</p>
        
        <p>In the GET response, look for the <code>state</code> value.  You may need to submit multiple GETs until the job completes and you see 
            the success status.  Possible values while the provisioning occurs:</p>
        
<pre>
initiated
started
succeeded
failed
cancel-initiated
cancel-started
cancel-succeeded
cancel-failed
unknown
</pre>
        
<p>Here's a sample provisioned job detail. Notice again the overall job id, 2039, in this example.</p>
        
<pre class="payload">
{
  "job": {
    "description": "Provision",
    "endtime": "2013-06-26T13:04:06.844-05:00",
    "id": 2039,
    "name": "Provision",
    "owner": "ca71cce70bfc436fa16be62e523620cd",
    "progress": 0,
    "resourceuri": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/infrastructure_topology_list",
    "result": "{ \"statusCode\" : 202 , \"message\" : 
          \"http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/infrastructure_topology_list/2039\"}",
    "servicetype": "eve",
    "starttime": "2013-06-26T13:03:38.555-05:00",
    "state": "succeeded",
    "task": [
      {
        "endtime": "2013-06-26T13:03:40.077-05:00",
        "id": 2042,
        "isActive": false,
        "name": "Create network segment Network0001",
        "progress": 100,
        "starttime": "2013-06-26T13:03:39.286-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:03:41.075-05:00",
        "id": 2044,
        "isActive": false,
        "name": "Creating Security Group db_group-test-db_subnet-T2039",
        "progress": 100,
        "starttime": "2013-06-26T13:03:40.450-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:03:41.090-05:00",
        "id": 2043,
        "isActive": false,
        "name": "Creating Security Group(s)",
        "progress": 100,
        "starttime": "2013-06-26T13:03:40.087-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:03:42.673-05:00",
        "id": 2045,
        "isActive": false,
        "name": "Create server group Server0001",
        "progress": 100,
        "starttime": "2013-06-26T13:03:41.110-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:03:43.732-05:00",
        "id": 2048,
        "isActive": false,
        "name": "Create volume group Volume0001",
        "progress": 100,
        "starttime": "2013-06-26T13:03:42.690-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:03:39.127-05:00",
        "id": 2041,
        "isActive": false,
        "name": "Creating topology model",
        "progress": 100,
        "starttime": "2013-06-26T13:03:38.863-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:03:43.869-05:00",
        "id": 2040,
        "isActive": false,
        "name": "urn:com:hp:iaasc:eve:provision-start",
        "progress": 100,
        "starttime": "2013-06-26T13:03:38.787-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:03:56.098-05:00",
        "id": 2051,
        "isActive": false,
        "name": "Attaching volume group Volume0001 to server group Server0001",
        "progress": 100,
        "starttime": "2013-06-26T13:03:54.789-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:03:54.775-05:00",
        "id": 2049,
        "isActive": false,
        "name": "Create volume 571e4c7d-1dd3-48ab-8ea5-6c23f081fed3 in group Volume0001",
        "progress": 100,
        "starttime": "2013-06-26T13:03:43.701-05:00",
        "state": "succeeded",
        "taskStatus": "Waiting for volume to be active"
      },
      {
        "endtime": "2013-06-26T13:03:54.459-05:00",
        "id": 2046,
        "isActive": false,
        "name": "Create server 821c7916-57da-4f11-ba10-0da5a08d9fd5 in group Server0001",
        "progress": 100,
        "starttime": "2013-06-26T13:03:42.646-05:00",
        "state": "succeeded",
        "taskStatus": "Done"
      },
      {
        "endtime": "2013-06-26T13:04:06.826-05:00",
        "id": 2052,
        "isActive": false,
        "name": "Attach volume 571e4c7d-1dd3-48ab-8ea5-6c23f081fed3 in group Volume0001",
        "progress": 100,
        "starttime": "2013-06-26T13:03:56.066-05:00",
        "state": "succeeded",
        "taskStatus": "Waiting for volume to be attached"
      }
    ],
    "tenantId": "aa22b38a0fb24e80a2651789e0b5047e",
    "uri": "http://10.1.48.51:21041/eden/1/aa22b38a0fb24e80a2651789e0b5047e/job_list/2039"
  }
}
</pre>        
        
        <p>If your provisioning job failed, look at the messages in the <code>result</code> and <code>taskStatus</code> properties. Try to correct your binding 
        payload, resubmit it with a POST in the Eve Service API, get a new Job ID, and return to Eden to poll for the status of the identified Job.</p>
        
        
        
<div class="section">
            <div xmlns="" class="titlepage"><div><div>                     
                <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Verify-Realized-Topology-OpenStack"></a>Task 5: Verify the Realized Topology (Grizzly)</h3></div></div></div>
    
    <p>So far in this use case we have:</p>
    
    <ol>
        <li>Created a resource pool with Peer</li>
        <li>Created an infrastructure topology document with Focus</li>
        <li>Submitted the provisioning job with Eve</li>
        <li>Verified the job completion with Eden</li>
    </ol>
    
    <p>Now it's time to verify what's called the "Realized Topology," which means that the provisioned resources are now available.</p>
    
    <p>To do this, use the Eve Service API.  For example, use a GET call and this URI:</p>
    
<pre>
http://&lt;my_server>:21051/eve/1/{projectId}/infrastructure_topology_list/{topologyId}
</pre>    
    
    <p>Specify the projectId and the topologyId as query parameters.</p>
    
    <p>Sample values, in this example:</p>
    
<pre>
http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/infrastructure_topology_list/2039        
</pre>
    
<p>Here's a sample response from the call:</p>
    
<pre>
{
  "deprovision_job_id": "",
  "provision_time": "Wed Jun 26 13:04:06 CDT 2013",
  "last_modified_time": "Wed Jun 26 13:04:06 CDT 2013",
  "@type": "urn:x-hp:2009:software:data_model:type:infrastructure_topology",
  "name": "Grizzly",
  "state": "urn:com:hp:iaasc:eve:provision:succeeded",
  "global_id": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/infrastructure_topology_list/2039",
  "provision_job_id": "http://10.1.48.51:21041/eden/1/aa22b38a0fb24e80a2651789e0b5047e/job_list/2039",
  "latest_task": "",
  "relationships": [
    {
      "target_type": "urn:x-hp:2009:software:data_model:type:realized_server_group_list",
      "@target_role": "urn:x-hp:2009:software:data_model:relationship:infrastructure_topology:contains:realized_server_group_list",
      "target_href": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/realized_server_group_list/Server0001-2039"
    },
    {
      "target_type": "urn:x-hp:2009:software:data_model:type:realized_volume_group_list",
      "@target_role": "urn:x-hp:2009:software:data_model:relationship:infrastructure_topology:contains:realized_volume_group_list",
      "target_href": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/realized_volume_group_list/Volume0001-2039"
    },
    {
      "target_type": "urn:x-hp:2009:software:data_model:type:realized_network_segment_list",
      "@target_role": "urn:x-hp:2009:software:data_model:relationship:infrastructure_topology:contains:realized_network_segment_list",
      "target_href": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/realized_network_segment_list/Network0001-2039"
    }
  ],
  "@version": "1.7"
}
</pre>    
    


    <p>This final task completed use case #1.  See the next section, use case #2, for the same set of provisioning tasks, but with payload values that are 
        specific to Diablo.  Then for information about deprovisioning topologies, see use case #3.</p>



<!-- 2nd Use Case: HP Cloud Diablo-->
    
<div class="section">
    <div xmlns="" class="titlepage"><div><div>                     
     <h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Use-Case-How-to-Provision-Topologies-HPCS"></a>Use Case #2: Define &amp; Provision a Topology (Diablo)</h2></div></div></div>   
                                                
      <p>In this second use case, we will define and provision infrastructure topology resources to the HP Cloud environment, which is based on Diablo.  
          An <a href="index.html#Use-Case-How-to-Provision-Topologies-OpenStack">earlier use case</a> 
          showed the tasks for defining and provisioning to an OpenStack (Grizzly) environment.</p>
    
    <p><b>Note:</b> You can use the HP Cloud OS platform to provision resources to your OpenStack (Grizzly) or HP Cloud (Diablo) environment.</p>
    
    <!-- TODO: fix table styles in css --> 
    <table>
        <tr><th class="apidoc">Task</th><th class="apidoc">Service Used</th><th class="apidoc">REST API Operation and URI</th></tr>
        <tr><td class="apidoc">1. Create a resource pool</td><td class="apidoc">HP Cloud OS Peer</td><td>POST<br/>http://&lt;my_server>:21071/1/resource_pool_list</td></tr>
        <tr><td class="apidoc">2. Post an infrastructure topology document to your repository</td><td class="apidoc">HP Cloud OS Focus</td><td>POST<br/>http://&lt;my_server>:21061/1/document_list</td></tr>
        <tr><td class="apidoc">3. Provision the topology</td><td class="apidoc">HP Cloud OS Eve</td><td>POST<br/>http://&lt;my_server>:21051/eve/1/{projectId}/infrastructure_topology_list</td></tr>
        <tr><td class="apidoc">4. Verify that the asynchronous provisioning job completed</td><td class="apidoc">HP Cloud OS Eden</td><td>GET<br/>http://&lt;my_server>:21041/eden/1/{tenantId}/job_list/{jobID}</td></tr>        
        <tr><td class="apidoc">5. Verify the realized topology details via topologyId</td><td class="apidoc">HP Cloud OS Eve</td><td>GET<br/>http://&lt;my_server>:21051/eve/1/{projectId}/infrastructure_topology_list/{topologyId}</td></tr>        
    </table>
    
    
<!--  RESOURCE POOLS SECTION OF USE CASE #2: -->

<div class="section">
    <div xmlns="" class="titlepage"><div><div>                     
        <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Create-Resource-Pool-HPCS"></a>Task 1: Create a Resource Pool (Diablo)</h3></div></div></div>
                                
    <p>If you have not already done so, generate a security token with Keystone. See <a href="#API-Security-Tokens">API Security Tokens</a>.</p>
    
    <p>Now let's see how we can use HP Cloud OS to create a resource pool in an HP Cloud (Diablo) environment. The payloads that we'll enter are  
    different, in some cases, from the OpenStack (Grizzly) environment. </p>
    
    <p>To create a resource pool, use the HP Cloud OS Peer Service API on port 21071.</p>
    
    <p>URL for the POST operation: <code>http://&lt;my_server>:21071/1/resource_pool_list</code></p>    
    
    <p>Start by accessing the Peer Service's HP Cloud OS API Documentation app on your HP Cloud OS instance. For example, in Chrome or Firefox, go to:</p>
    
    <p>http://my_server:21071/docs/index.html</p>
    
    <p>If not done previously, paste your Keystone token into the "(Paste Keystone Token Here)" textbox and click Explore.</p>
    
    <p>Before expanding the POST section, which we'll use to create a new resource pool, expand the GET /1/resource_pool_list section.  You do not need 
    to enter any values &mdash; just scroll down and click the "Try it out!" button.  HP Cloud OS returns details about existing resource pools (if any). 
    Example GET response:</p>
    
    <p><img src="images/get_resource_pool_list_response.png" style="border: 1px dashed gray;" alt=""/></p>
    
    <p>Still in the HP Cloud OS API Documentation app for Peer, now expand the POST operation, which we'll use to register a new resource pool. 
        The POST stores a new resource pool entry. 
        Ownership of the new resource pool is set permanently to the user identified by the token.  The call returns the Location 
        of the newly created resource with the unique ID ('index') as part of the URL path. </p>
    
    <p>For information about each property, see the brief descriptions in the Model section of the Peer Service's HP Cloud OS API Documentation app.</p>
    
    
    <!-- 
    <p>In your version of the HP Cloud OS API Documentation app for the Peer Service, in the expanded POST section, notice the following option for the Model Schema, which 
        is highlighted in this screen capture:</p>
    
    <p><img src="images/click_to_set_parameter_value.png"/></p>
    
    <p>If you click the label "Click to select as parameter value", the <code>resource_pool</code> textbox on the left is populated with the JSON properties for the 
        POST's payload (Body).  This is where you can define a resource pool.</p>
    
    <p>Also in the HP Cloud OS API Documentation app, you can toggle from the Model Schema to the Model.  The latter is where you'll find concise descriptions of each property. 
    An example of a portion of the resource pool model:</p>
    
    <p><img src="images/model_display_in_rest_doc.png"/></p>
    --> 
    
    
    <a name="Resource_Pool_for_HP_Cloud"></a>
    <p><b>Sample Resource Pool for HP Cloud (Diablo)</b></p>
    
    <p>Here's a sample payload for the POST operation to create the resource pool.  
        Do not include an ID in the payload.  
        An ID will be generated by the call and shown in the response.
        See the list after the sample for important notes.</p>
    
<pre class="payload">
{
    "name": "hpcs",
    "scope": "project",
    "region_id": "az-2.region-a.geo-1",
    "type": "openstack",
    "version": "Diablo",
    "provider_url": "https://region-a.geo-1.identity.hpcloudsvc.com:35357/v2.0/tokens",
    "provider_user_name": "abc@hp.com",
    "provider_password": "password",
    "provider_project_id": "38001883670540",
    "provider_user_domain_name": "default",
    "provider_project_domain_name": "default"
}
</pre>    
    
    <p><b>Note:</b>  Before submitting your request, 
        change the sample values to match your cloud's actual values for:</p>
    
    <ul>
        <li><code>name</code></li>
        <li><code>region_id</code></li>
        <li>The hostname or IP address in <code>provider_url</code></li>
        <li><code>provider_user_name</code></li>
        <li><code>provider_user_password</code></li>
        <li><code>provider_project_id</code></li>                   
    </ul>
    
    <p><b>In the HP Cloud OS API Documentation app, Submit the POST:</b></p>
    
    <p>In the POST's <code>resource_pool</code> parameter, enter the JSON for your resource pool request.  Example: </p>
    
    <p><img src="images/resource_pool_pending_post.png" style="border: 1px dashed gray;" alt="" /></p>
    
    <p>When you're ready, click the "Try it out" button to POST the resource pool request. </p>
    
    <p>Here's a sample response from the server, as shown in the HP Cloud OS API Documentation app:</p>
    
    <pre style="border: 1px dashed gray; padding: 4px 4px 4px 4px;">
    {
    "id": 73,
    "name": "hpcs",
    "version": "Diablo",
    "state": "active",
    "scope": "project",
    "regionId": "az-2.region-a.geo-1",
    "type": "openstack",
    "user_id": "ca71cce70bfc436fa16be62e523620cd",
    "project_id": "aa22b38a0fb24e80a2651789e0b5047e",
    "domain_id": "default",
    "region_id": "az-2.region-a.geo-1",
    "provider_url": "https://region-a.geo-1.identity.hpcloudsvc.com:35357/v2.0/tokens",
    "provider_project_id": "38001883670540",
    "provider_user_name": "abc@hp.com",
    "provider_password": "password",
    "provider_user_domain_name": "default",
    "provider_project_domain_name": "default"
    }
</pre>
    
        
<p>Take note of the generated ID for the created resource pool.  Later on, if you do not recall the generated ID, use 
the following GET to return all resource pools:</p>

<pre>
http://my_server:21071/1/resource_pool_list
</pre>
    
<p>When you are ready, proceed to the next section.</p>
 


<div class="section">
        <div xmlns="" class="titlepage"><div><div>                     
            <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Post-Infrastructure-Topology-Document-HPCS"></a>Task 2: Post an Infrastructure Topology Document (Diablo)</h3></div></div></div>
                      
    <p>Having generated a resource pool in Peer, we're ready to use the HP Cloud OS platform to create an 
        infrastructure topology document for HP Cloud.  </p>
    
    <p>To do this, use the HP Cloud OS Focus Service API on port 21061.</p>
    
    <p>URL for the POST operation: <code> http://&lt;my_server>:21061/1/document_list</code></p>    
        
    <p>Start by accessing the Focus Service's HP Cloud OS API Documentation app on your HP Cloud OS instance. For example, in Chrome or Firefox, go to:</p>
    
    <p>http://my_server:21061/docs/index.html</p>
        
    <p>In the HP Cloud OS API Documentation app for Focus, expand the POST operation, which we'll use to store the infrastructure topology document. The next  
    section presents a template for an infrastructure topology document.  You will not need to update the POST payload values &mdash; 
    just remember to provide a name for your 
    document, and select the 'infrastructure_topology' 
    type from the pull-down menu:</p>
    
    <p><img src="images/select_infrastructure_topologies_pulldown.png" style="border: 1px dashed gray;" alt="" /></p>
    
    <a name="Infrastructure_Topology_Payload_for_HP_Cloud"></a><p><b>Sample Infrastructure Topology Payload (Diablo)</b></p>
    
    <p>There is no need to update the values in the following payload sample. 
        In the HP Cloud OS API Documentation app, just remember to select the 'infrastructure_topology' type 
        when you POST the document.</p>
    
<pre class="payload">
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?>
&lt;t:Definitions eve:template_version="8" id="724062177" name="HPCS" targetNamespace="http://hp.com/topology/quasar" 
      xsi:schemaLocation="http://docs.oasis-open.org/tosca/ns/2011/12 tosca.xsd" xmlns:ui="urn:x-hp:2012:software:eve:uibinding" 
      xmlns:eve="urn:x-hp:2012:software:eve:types" xmlns:t="http://docs.oasis-open.org/tosca/ns/2011/12" 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    &lt;t:Import namespace="urn:x-hp:2012:software:eve:types" location="EveTypes.xml" 
      importType="http://docs.oasis-open.org/tosca/ns/2011/12"/>
    &lt;t:ServiceTemplate id="service">
        &lt;t:TopologyTemplate>
             &lt;t:NodeTemplate name="DBSrvGp" id="db_server" type="eve:ServerGroupType"/>
             &lt;t:NodeTemplate name="dbsegment" id="db_segment" type="eve:NetworkSegmentType"/>
            &lt;t:NodeTemplate name="dbstorage" id="db_volume" type="eve:VolumeGroupType"/>
             &lt;t:RelationshipTemplate id="rel0001" type="eve:hasNetworkInterfaceTo">
                &lt;t:SourceElement ref="db_server"/>
                &lt;t:TargetElement ref="db_segment"/>
            &lt;/t:RelationshipTemplate>
            &lt;t:RelationshipTemplate id="rel0002" type="eve:hasAttachedVolume">
                &lt;t:SourceElement ref="db_server"/>
                &lt;t:TargetElement ref="db_volume"/>
            &lt;/t:RelationshipTemplate>
          &lt;/t:TopologyTemplate>
    &lt;/t:ServiceTemplate>
&lt;/t:Definitions>
</pre>    
    
    <p><b>In the HP Cloud OS API Documentation app, Submit the POST</b></p>
    
    <p>When you're ready, click the "Try it out" button to POST the infrastructure topology document request. </p>
    
    <p>In the response, <b>note the document id and project_id</b>, as you'll need these ID values in the next task for the use case.</p>
    
    <p>Example response:</p>
    
    <!--   
    <p><img src="images/example_post_document_response.png" style="border: 1px dashed gray;" alt="" /></p>
    -->

<pre style="border: 1px dashed gray; padding: 4px 4px 4px 4px;">
{
  "id": "1583187356",
  "name": "hpcs_template1",
  "type": "infrastructure_topology",
  "detail": {
    "properties": [],
    "versions": [
      {
        "version": 1,
        "size": 1486,
        "content_type": "application/xml"
      }
    ],
    "scope": "user_project",
    "created_at": "2013-06-26T17:32:47.397+0000",
    "updated_at": "2013-06-26T17:32:47.397+0000",
    "default_version": 1,
    "user_id": "ca71cce70bfc436fa16be62e523620cd",
    "project_id": "aa22b38a0fb24e80a2651789e0b5047e",
    "domain_id": "default"
  }
}
 
</pre>        
        
    <p>When you are ready, proceed to the next section.</p>
        
        
<!-- PROVISIONING TASK -->
        
<div class="section">
    <div xmlns="" class="titlepage"><div><div>
        <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Provision-Topology-HPCS"> </a>Task 3: Provision the Topology (Diablo)</h3></div></div></div>
                                        
    <p>Having generated a resource pool in Peer, and an infrastructure topology document in Focus, 
        we are ready to use the HP Cloud OS platform to provision the resources to the HP Cloud environment. 
        To do this, use the HP Cloud OS Eve Service API on port 21051.</p>
    
    <p>URL for the POST operation: <code>http://&lt;my_server>:21051/eve/1/{projectId}/infrastructure_topology_list</code></p>    
    
    <p>The Eve Service API submits a binding document (XML or JSON) to be provisioned. The binding document is provisioned only based on the 
        received token's authorization.</p>
    
    <p>Note that provisioning is an asynchronous operation in the API; it returns a Job that can be polled to determine completion.</p>
    
    <p>Start by accessing the Eve Service's HP Cloud OS API Documentation app on your HP Cloud OS instance. For example, in Chrome or Firefox, go to:</p>
    
    <p>http://my_server:21051/eve/docs/index.html</p>


<a name="Binding_Payload_for_Provisioing_the_Topology_to_HP_Cloud"></a>
<p><b>Binding Payload for Provisioning the Topology to HP Cloud</b></p> 
    
    <p>In the following sample binding payload for provisioning to HP Cloud, update the <b><font color="red">RED values</font></b>.  You will need to change:</p>
    
    <ul>
        <li>In <code>template_ref</code>:
            <ul>
                <li>The IP address or hostname of the HP Cloud OS Controller node that is running Cloud OS services. 
                    In our example, it is <code>10.1.63.61</code>.</li>
                <li>The infrastructure topology document ID, which was returned in the POST response of the Focus Service API  
                    (Task 3 of this use case).  In our example, it is <code>378596374</code>.</li>
            </ul></li>
        <li>In <code>eve:network_ref</code>, the Network ID. 
        </li>
        <li>In <code>eve:resource_pool_ref</code>, the resource pool ID.   
        </li>
        <li>In <code>eve:key_name</code>, the Key-pair name.
        </li>
    </ul>
    
    <p>Also provide the topology name, which was defined on the POST form in Task 3.  In our example, it is <code>MyJS-Document</code>.</p>
    
    <p><b>How to retrieve the network ID, image ID, and Key pair name:</b></p>
    
    <p>You can retrieve the network id, image id, key pair name for your instance using HP Cloud CLI commands or APIs.  For details, start in the HP Cloud console:</p>
    
    <p>https://console.hpcloud.com/</p>
    
    <p>Log in using your credentials, or sign up for a new account.</p>
    
    <!-- TODO: create a hpcloudos-doc.css instead of in-line styles -->
    <p style="border: 1px dotted gray; padding: 4px 4px 4px 4px;"><b>TODO:</b>  Info coming soon about getting the values via the HP Cloud dashboard UI, CLI, and API.</p>
    
    
    <p><b>In the HP Cloud OS API Documentation app, Submit the POST</b></p>
    
    <p>On the POST form, enter the <code>projectId</code> value (returned by the prior response in the Focus document_list API), and enter your 
    binding payload in the <code>BindingDocument</code> textbox. </p>
        
        <!-- Example: </p>
    
    <p><img src="images/binding_request_payload.png" style="border: 1px dashed gray;" alt="" /></p> --> 
    
    <p>Example POST payload:</p>
    
<pre class="payload">
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?>
&lt;b:resource_pool_binding xmlns:eve="urn:x-hp:2012:software:eve:types" 
   xmlns:b="urn:x-hp:software:2012:eve:binding">
  &lt;b:template_ref>http://10.1.48.51:21061/1/document_list/1583187356&lt;/b:template_ref>
  &lt;b:template_version>1&lt;/b:template_version>
  &lt;b:topology_name>MyJS-Document&lt;/b:topology_name>
    &lt;b:binding id="db_server">
      &lt;eve:_modifiable_properties>&lt;/eve:_modifiable_properties>
      &lt;eve:_min_instances>1&lt;/eve:_min_instances>
      &lt;eve:instance_name_prefix>test&lt;/eve:instance_name_prefix>
      &lt;eve:flavor_id>101&lt;/eve:flavor_id>
      &lt;eve:image_id>67074&lt;/eve:image_id>
      &lt;eve:key_name>Integration&lt;/eve:key_name>
      &lt;eve:resource_pool_ref>73&lt;/eve:resource_pool_ref>
    &lt;/b:binding>

    &lt;b:binding id="db_segment">
      &lt;eve:_modifiable_properties>&lt;/eve:_modifiable_properties>
      &lt;eve:segment_type>security_group&lt;/eve:segment_type>
      &lt;eve:network_ref/>
      &lt;eve:segment_ref/>
      &lt;eve:segment_name>db_grp&lt;/eve:segment_name>
      &lt;eve:segment_description/>
      &lt;eve:mask_size/>
      &lt;eve:enable_dhcp/>
      &lt;eve:resource_pool_ref>73&lt;/eve:resource_pool_ref>
    &lt;/b:binding>

    &lt;b:binding id="db_volume">
      &lt;eve:_modifiable_properties>&lt;/eve:_modifiable_properties>
      &lt;eve:_min_instances>1&lt;/eve:_min_instances>
      &lt;eve:instance_name_prefix>test&lt;/eve:instance_name_prefix>
      &lt;eve:size_in_gb>1&lt;/eve:size_in_gb>
      &lt;eve:resource_pool_ref>73&lt;/eve:resource_pool_ref>
    &lt;/b:binding>

    &lt;b:binding id="rel0001">
      &lt;eve:security_group_ref/>
      &lt;eve:security_group_name>db_sec_grp&lt;/eve:security_group_name>
      &lt;eve:security_group_description>db grp&lt;/eve:security_group_description>
      &lt;eve:port_list>22,8080&lt;/eve:port_list>
      &lt;eve:assign_floating_ip>False&lt;/eve:assign_floating_ip>
    &lt;/b:binding>

    &lt;b:binding id="rel0002">
      &lt;eve:device>/dev/vdc&lt;/eve:device>
    &lt;/b:binding>

&lt;/b:resource_pool_binding>
</pre>
    
    
    <p>When you're ready, click the "Try it out" button to POST the infrastructure topology document request. </p>
        
    <p>In the response, take note of the Job ID and the Tenant ID.  You will need these values in the next task of the use case. </p>
    
    <p>Example POST response:</p>
    
<pre style="border: 1px dashed gray; padding: 4px 4px 4px 4px;">
{
  "job": {
    "description": "Provision",
    "id": 2008,
    "name": "Provision",
    "owner": "ca71cce70bfc436fa16be62e523620cd",
    "progress": 0,
    "resourceuri": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/infrastructure_topology_list",
    "result": "",
    "servicetype": "eve",
    "starttime": "2013-06-26T12:40:58.568-05:00",
    "state": "initiated",
    "tenantId": "aa22b38a0fb24e80a2651789e0b5047e",
    "uri": "http://10.1.48.51:21041/eden/1/aa22b38a0fb24e80a2651789e0b5047e/job_list/2008"
  }
}

</pre>
    
    
        
        <p>Recall that provisioning is an asynchronous operation in the API; it returns a Job ID (<code>2008</code>, in this example) that can be polled to 
        determine completion. To return the status of the provisioning job, use the Eden Service API (port 21041) as described in the next task. Also 
        notice that the response returned a Tenant ID (<code>aa22b38a0fb24e80a2651789e0b5047e</code>, in this example).</p>    
        
    
    <div class="section">
        <div xmlns="" class="titlepage"><div><div>                     
            <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Verify-Provisioning-Job-Completion-HPCS"></a>Task 4: Verify Provisioning Job Completion (Diablo)</h3></div></div></div>
        
        <p>As noted in the prior section, provisioning is an asynchronous operation in the API. It returns a Job ID that can be polled to 
            determine completion. To return the status of the provisioning job, use the Eden Service API (port 21041) as described in this task.</p> 
        
        <p>URL for the GET operation: <code>http://&lt;my_server>:21041/eden/1/{tenantId}/job_list/{jobID}</code></p>      
        
        <p>In this example, we will use a GET in the Eden Service API, with the following query parameters:</p>
        
        <p><code>GET http://&lt;my_server>:21041/eden/1/aa22b38a0fb24e80a2651789e0b5047e/job_list/2008
        </code></p>
            
            <p>The values were returned in the Eve POST response, Task 4 of this use case.</p>
        
        <!-- 
        
        <p><img src="images/tenant_and_job_ids.png" style="border: 1px dashed gray;" alt="" /></p> --> 
        
        <p>In the GET response, look for the <code>state</code> value.  Possible values:</p>
        
<pre>
initiated
started
succeeded
failed
cancel-initiated
cancel-started
cancel-succeeded
cancel-failed
unknown
</pre>
        
        <p>Here's a sample provisioned job detail. Notice again the overall job id, 2008, in this example.</p>
        
<pre class="payload">
{
  "job": {
    "description": "Provision",
    "endtime": "2013-06-26T12:42:16.996-05:00",
    "id": 2008,
    "name": "Provision",
    "owner": "ca71cce70bfc436fa16be62e523620cd",
    "progress": 0,
    "resourceuri": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/infrastructure_topology_list",
    "result": "{ \"statusCode\" : 202 , \"message\" : 
      \"http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/infrastructure_topology_list/2008\"}",
    "servicetype": "eve",
    "starttime": "2013-06-26T12:40:58.568-05:00",
    "state": "succeeded",
    "task": [
      {
        "endtime": "2013-06-26T12:40:59.073-05:00",
        "id": 2010,
        "isActive": false,
        "name": "Creating topology model",
        "progress": 100,
        "starttime": "2013-06-26T12:40:58.850-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:41:01.415-05:00",
        "id": 2011,
        "isActive": false,
        "name": "Create network segment db_segment",
        "progress": 100,
        "starttime": "2013-06-26T12:40:59.218-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:41:09.284-05:00",
        "id": 2013,
        "isActive": false,
        "name": "Creating Security Group db_sec_grp-test-db_grp-T2008",
        "progress": 100,
        "starttime": "2013-06-26T12:41:02.416-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:41:09.295-05:00",
        "id": 2012,
        "isActive": false,
        "name": "Creating Security Group(s)",
        "progress": 100,
        "starttime": "2013-06-26T12:41:01.423-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:41:15.622-05:00",
        "id": 2014,
        "isActive": false,
        "name": "Create server group db_server",
        "progress": 100,
        "starttime": "2013-06-26T12:41:09.310-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:41:17.891-05:00",
        "id": 2017,
        "isActive": false,
        "name": "Create volume group db_volume",
        "progress": 100,
        "starttime": "2013-06-26T12:41:15.640-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:41:17.992-05:00",
        "id": 2009,
        "isActive": false,
        "name": "urn:com:hp:iaasc:eve:provision-start",
        "progress": 100,
        "starttime": "2013-06-26T12:40:58.765-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:41:30.289-05:00",
        "id": 2018,
        "isActive": false,
        "name": "Create volume 344009 in group db_volume",
        "progress": 100,
        "starttime": "2013-06-26T12:41:17.868-05:00",
        "state": "succeeded",
        "taskStatus": "Waiting for volume to be active"
      },
      {
        "endtime": "2013-06-26T12:42:05.511-05:00",
        "id": 2022,
        "isActive": false,
        "name": "Attaching volume group db_volume to server group db_server",
        "progress": 100,
        "starttime": "2013-06-26T12:42:01.259-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:42:01.244-05:00",
        "id": 2015,
        "isActive": false,
        "name": "Create server 2090041 in group db_server",
        "progress": 100,
        "starttime": "2013-06-26T12:41:15.600-05:00",
        "state": "succeeded",
        "taskStatus": "Done"
      },
      {
        "endtime": "2013-06-26T12:42:16.958-05:00",
        "id": 2023,
        "isActive": false,
        "name": "Attach volume 344009 in group db_volume",
        "progress": 100,
        "starttime": "2013-06-26T12:42:05.489-05:00",
        "state": "succeeded",
        "taskStatus": "Waiting for volume to be attached"
      }
    ],
    "tenantId": "aa22b38a0fb24e80a2651789e0b5047e",
    "uri": "http://10.1.48.51:21041/eden/1/aa22b38a0fb24e80a2651789e0b5047e/job_list/2008"
  }
}
</pre>        
        
        <p>If your provisioning job failed, look at the messages in the <code>result</code> and <code>taskStatus</code> properties. Try to correct your binding 
            payload, resubmit it with a POST in the Eve Service API, get a new Job ID, and return to Eden to poll for the status of the identified Job.</p>
        


 <div class="section">
            <div xmlns="" class="titlepage"><div><div>                     
                <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Verify-Realized-Topology-HPCS"></a>Task 5: Verify the Realized Topology (Diablo)</h3></div></div></div>
            
            <p>So far in use case #2 (Diablo), we have:</p>
            
            <ol>
                <li>Created a resource pool with Peer</li>
                <li>Created an infrastructure topology document with Focus</li>
                <li>Submitted the provisioning job with Eve</li>
                <li>Verified the job completion with Eden</li>
            </ol>
            
            <p>Now it's time to verify what's called the "Realized Topology," which means that the provisioned resources are now available.</p>
            
            <p>To do this, use the Eve Service API.  For example, use a GET call with this URI:</p>
            
<pre>
http://&lt;my_server>:21051/eve/1/{projectId}/infrastructure_topology_list/{topologyId}
</pre>    
            
            <p>Specify the projectId and the topologyId as query parameters.</p>
            
            <p>Sample values, in this example:</p>
            
<pre>
http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/infrastructure_topology_list/2008        
</pre>
            
<p>Here's a sample response from the call, showing the Realized Topology's details:</p>
            
<pre>
{
  "deprovision_job_id": "",
  "provision_time": "Wed Jun 26 12:42:16 CDT 2013",
  "last_modified_time": "Wed Jun 26 12:42:16 CDT 2013",
  "@type": "urn:x-hp:2009:software:data_model:type:infrastructure_topology",
  "name": "MyJS-Document",
  "state": "urn:com:hp:iaasc:eve:provision:succeeded",
  "global_id": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/infrastructure_topology_list/2008",
  "provision_job_id": "http://10.1.48.51:21041/eden/1/aa22b38a0fb24e80a2651789e0b5047e/job_list/2008",
  "latest_task": "",
  "relationships": [
    {
     "target_type": "urn:x-hp:2009:software:data_model:type:realized_server_group_list",
      "@target_role": "urn:x-hp:2009:software:data_model:relationship:infrastructure_topology:contains:realized_server_group_list",
      "target_href": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/realized_server_group_list/db_server-2008"
    },
    {
      "target_type": "urn:x-hp:2009:software:data_model:type:realized_volume_group_list",
      "@target_role": "urn:x-hp:2009:software:data_model:relationship:infrastructure_topology:contains:realized_volume_group_list",
      "target_href": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/realized_volume_group_list/db_volume-2008"
    },
    {
     "target_type": "urn:x-hp:2009:software:data_model:type:realized_network_segment_list",
      "@target_role": "urn:x-hp:2009:software:data_model:relationship:infrastructure_topology:contains:realized_network_segment_list",
      "target_href": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/realized_network_segment_list/db_segment-2008"
    }
  ],
  "@version": "1.7"
}
</pre>  
     
     <p>This final task completed use case #2.  To learn how to deprovision the topology, see the next section for use case #3. It applies to Grizzly or Diablo environments.</p>
     
     
     
     <!-- DEPROVISIONING -->
            
     <div class="section">
         <div xmlns="" class="titlepage"><div><div>                     
             <h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Use-Case-Deprovision-Topology-Grizzly-or-Diablo"></a>Use Case #3: Deprovision a Topology (Grizzly or Diablo)</h2></div></div></div>   
         
         <p>In use case #1, we used the Cloud OS platform to define and provision an infrastructure topology; the payloads were specific to an 
             OpenStack (Grizzly) environment.  Use case #2 did the same, but with payloads for an HP Cloud environment (based on Diablo). </p>
         
         <p>In this next use case, we will use the Cloud OS platform to <b>deprovision</b> a topology, and verify its completion. The steps are the same for Grizzly and Diablo.</p>
         
         <table>
             <tr><th class="apidoc">Task</th><th class="apidoc">Service Used</th><th>REST API Operation and URI</th></tr>
             <tr><td class="apidoc">1. Deprovision an existing topology, by topologyId</td><td class="apidoc">HP Cloud OS Eve</td><td>DELETE<br/>http://&lt;my_server>:21051/eve/1/{projectId}/infrastructure_topology_list/{topologyId}</td></tr>
             <tr><td class="apidoc">2. Verify the deprovision job details, by jobId</td><td class="apidoc">HP Cloud OS Eden</td><td>GET<br/>http://&lt;my_server>:21041/eden/1/{tenantId}/job_list/{jobID}</td></tr>
        </table>

         <div class="section">
             <div xmlns="" class="titlepage"><div><div>
                 <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Deprovision-Topology"> </a>Task 1: Deprovision the Topology</h3></div></div></div>
             
             <p>To deprovision a topology, use the HP Cloud OS Eve Service API on port 21051.</p>
             
             <p>Start by accessing the HP Cloud OS API Documentation app for the Eve service. For example, in Chrome or Firefox, go to:</p>
             
             <p>http://my_server:21051/eve/docs/index.html</p>  
             
             <p>Expand the DELETE section and specify the projectId and the topologyId.</p>
             
             <p>
                 <img src="images/delete_infrastructure_topology.png" alt=""/></br>
                   <b>.</br>.</br>.</b><br/>  
                 <img src="images/delete_infrastructure_topology2.png" alt=""/>
             </p>
             
             <p>URI format: <code>http://&lt;my_server>:21051/eve/1/{projectId}/infrastructure_topology_list/{topologyId}</code></p>
             
             <p>With the parameters specified on the URI, no payload is required.</p>
             
             <p><b>Sample Response (Grizzly)</b></p>
             
             <p>Here's a sample response for the deprovisioning in the Grizzly case, as shown in the HP Cloud OS API Documentation app:</p>
             
             <p><img src="images/deprovision_job_response_grizzly.png" alt="" style="border: 1px dashed gray;" /></p>
             
             <p><b>Sample Response (Diablo)</b></p>
             
             <p>Here's a sample response for the deprovisioning in the Diablo case, as shown in the HP Cloud OS API Documentation app. The 
                 only differences are the values for the returned job ID, and of course the topology ID for the infrastructure topology that we are deprovisioning.</p>
             
             <p><img src="images/deprovision_job_response_diablo.png" alt="" style="border: 1px dashed gray;" /></p>
             
             <p>Deprovisioning is an asynchronous operation in the API. Take note of your job ID in the response.  </p>
             
             <p>When you are ready, proceed to the next section.</p>
         
         <div class="section">
             <div xmlns="" class="titlepage"><div><div>                     
                 <h3 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Verify-Deprovisioning-Job-Completion"></a>Task 2: Verify Deprovisioning Job Completion</h3></div></div></div>
             
             <p>As noted in the prior section, deprovisioning is an asynchronous operation in the API. It returns a Job ID that can be polled to 
                 determine completion. To return the status of the deprovisioning job, use the Eden Service API (port 21041) as described in this task.</p> 
             
             <p>Start by accessing the HP Cloud OS API Documentation app for the Eden service. For example, in Chrome or Firefox, go to:</p>
             
             <p>http://my_server:21041/eve/docs/index.html</p>  
             
             <p>Expand the "GET /1/{tenantId}/job_list/{jobId}" section.</p>
             
             <p>Specify the projectId and the topologyId.</p>
             
             <p>URI format: <code>http://&lt;my_server>:21041/eden/1/{tenantId}/job_list/{jobID}</code></p>      
             
             <p>The values were returned in the prior step, when we used a DELETE operation in Eve.</p>
             
             <p>In the Eden GET response(s), look for the <code>state</code> value.  Possible values:</p>
             
<pre>
initiated
started
succeeded
failed
cancel-initiated
cancel-started
cancel-succeeded
cancel-failed
unknown
</pre>
             
<p>Here's a sample deprovisioned job detail. This first one is from the Grizzly environment; in our example, the job ID was 2054.</p>
             
<pre class="payload">
{
  "job": {
    "description": "De-provision",
    "endtime": "2013-06-26T13:10:12.462-05:00",
    "id": 2054,
    "name": "De-provision",
    "owner": "ca71cce70bfc436fa16be62e523620cd",
    "progress": 0,
    "resourceuri": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/infrastructure_topology_list/2039",
    "result": "{ \"statusCode\" : 200 , \"message\" : \"Infrastructure topology has been deprovisioned\"}",
    "servicetype": "eve",
    "starttime": "2013-06-26T13:09:46.428-05:00",
    "state": "succeeded",
    "task": [
      {
        "endtime": "2013-06-26T13:09:48.495-05:00",
        "id": 2056,
        "isActive": false,
        "name": "Detaching volume group: Volume0001",
        "progress": 100,
        "starttime": "2013-06-26T13:09:46.722-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:10:00.753-05:00",
        "id": 2062,
        "isActive": false,
        "name": "Delete volume group Volume0001",
        "progress": 100,
        "starttime": "2013-06-26T13:09:59.780-05:00",
        "state": "succeeded"
      },
      {
       "endtime": "2013-06-26T13:10:11.290-05:00",
        "id": 2063,
        "isActive": false,
        "name": "Delete volume 571e4c7d-1dd3-48ab-8ea5-6c23f081fed3 in group Volume0001",
        "progress": 100,
        "starttime": "2013-06-26T13:10:00.266-05:00",
        "state": "succeeded",
        "taskStatus": "Volume has been deleted"
      },
      {
        "endtime": "2013-06-26T13:09:48.562-05:00",
        "id": 2055,
        "isActive": false,
        "name": "urn:com:hp:iaasc:eve:deprovision-start",
        "progress": 100,
        "starttime": "2013-06-26T13:09:46.581-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:09:59.034-05:00",
        "id": 2057,
        "isActive": false,
        "name": "Detaching volume 571e4c7d-1dd3-48ab-8ea5-6c23f081fed3 in group Volume0001",
        "progress": 100,
        "starttime": "2013-06-26T13:09:47.051-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:10:10.596-05:00",
        "id": 2060,
        "isActive": false,
        "name": "Delete server 821c7916-57da-4f11-ba10-0da5a08d9fd5 in group Server0001",
        "progress": 100,
        "starttime": "2013-06-26T13:09:59.430-05:00",
        "state": "succeeded",
        "taskStatus": "Removed from external network segment"
      },
      {
        "endtime": "2013-06-26T13:09:59.768-05:00",
        "id": 2059,
        "isActive": false,
        "name": "Delete Server Group Server0001",
        "progress": 100,
        "starttime": "2013-06-26T13:09:59.042-05:00",
        "state": "succeeded",
        "taskStatus": "Server delete requests have been sent successfully"
      },
      {
        "endtime": "2013-06-26T13:10:11.830-05:00",
        "id": 2066,
        "isActive": false,
        "name": "Delete Security Group db_group-test-db_subnet-T2039",
        "progress": 100,
        "starttime": "2013-06-26T13:10:11.662-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:10:12.381-05:00",
        "id": 2067,
        "isActive": false,
        "name": "Delete network segment DBSubnet",
        "progress": 100,
        "starttime": "2013-06-26T13:10:11.854-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T13:10:11.843-05:00",
        "id": 2065,
        "isActive": false,
        "name": "Deleting Security Group(s)",
        "progress": 100,
        "starttime": "2013-06-26T13:10:11.303-05:00",
        "state": "succeeded"
      }
    ],
    "tenantId": "aa22b38a0fb24e80a2651789e0b5047e",
    "uri": "http://10.1.48.51:21041/eden/1/aa22b38a0fb24e80a2651789e0b5047e/job_list/2054"
  }
}
</pre>  
             

<p>And here is the deprovisioned job detail for the Diablo environment, where our sample job ID was 2025.</p>

<pre class="payload">
{
  "job": {
    "description": "De-provision",
    "endtime": "2013-06-26T12:53:29.318-05:00",
    "id": 2025,
    "name": "De-provision",
    "owner": "ca71cce70bfc436fa16be62e523620cd",
    "progress": 0,
    "resourceuri": "http://192.168.124.81:21051/eve/1/aa22b38a0fb24e80a2651789e0b5047e/infrastructure_topology_list/2008",
    "result": "{ \"statusCode\" : 200 , \"message\" : \"Infrastructure topology has been deprovisioned\"}",
    "servicetype": "eve",
    "starttime": "2013-06-26T12:52:55.488-05:00",
    "state": "succeeded",
    "task": [
      {
        "endtime": "2013-06-26T12:52:58.634-05:00",
        "id": 2027,
        "isActive": false,
        "name": "Detaching volume group: db_volume",
        "progress": 100,
        "starttime": "2013-06-26T12:52:55.862-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:52:58.707-05:00",
        "id": 2026,
        "isActive": false,
        "name": "urn:com:hp:iaasc:eve:deprovision-start",
        "progress": 100,
        "starttime": "2013-06-26T12:52:55.702-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:53:12.110-05:00",
        "id": 2030,
        "isActive": false,
        "name": "Delete Server Group db_server",
        "progress": 100,
        "starttime": "2013-06-26T12:53:10.136-05:00",
        "state": "succeeded",
        "taskStatus": "Server delete requests have been sent successfully"
      },
      {
        "endtime": "2013-06-26T12:53:13.792-05:00",
        "id": 2033,
        "isActive": false,
        "name": "Delete volume group db_volume",
        "progress": 100,
        "starttime": "2013-06-26T12:53:12.120-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:53:10.125-05:00",
        "id": 2028,
        "isActive": false,
        "name": "Detaching volume 344009 in group db_volume",
        "progress": 100,
        "starttime": "2013-06-26T12:52:56.759-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:53:24.644-05:00",
        "id": 2031,
        "isActive": false,
        "name": "Delete server 2090041 in group db_server",
        "progress": 100,
        "starttime": "2013-06-26T12:53:11.165-05:00",
        "state": "succeeded",
        "taskStatus": "Removed from external network segment"
      },
      {
        "endtime": "2013-06-26T12:53:27.368-05:00",
        "id": 2037,
        "isActive": false,
        "name": "Delete Security Group db_sec_grp-test-db_grp-T2008",
        "progress": 100,
        "starttime": "2013-06-26T12:53:26.494-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:53:27.380-05:00",
        "id": 2036,
        "isActive": false,
        "name": "Deleting Security Group(s)",
        "progress": 100,
        "starttime": "2013-06-26T12:53:25.657-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:53:29.237-05:00",
        "id": 2038,
        "isActive": false,
        "name": "Delete network segment dbsegment",
        "progress": 100,
        "starttime": "2013-06-26T12:53:27.391-05:00",
        "state": "succeeded"
      },
      {
        "endtime": "2013-06-26T12:53:25.645-05:00",
        "id": 2034,
        "isActive": false,
        "name": "Delete volume 344009 in group db_volume",
        "progress": 100,
        "starttime": "2013-06-26T12:53:12.876-05:00",
        "state": "succeeded",
        "taskStatus": "Volume has been deleted"
      }
    ],
    "tenantId": "aa22b38a0fb24e80a2651789e0b5047e",
    "uri": "http://10.1.48.51:21041/eden/1/aa22b38a0fb24e80a2651789e0b5047e/job_list/2025"
  }
}
</pre>
             
<p>If your deprovisioning job failed, look at the messages in the <code>result</code> and <code>taskStatus</code> properties. Try to correct your binding 
payload, resubmit it with a DELETE in the Eve Service API, get a new Job ID, and return to Eden to poll for the status of the identified Job.</p>
             

     
    <div class="section">
        <div xmlns="" class="titlepage"><div><div>
            <h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="Next-Steps"></a>Next Steps</h2></div></div></div>   
        
        <p> We hope you found the API Quick Start topic instructive and useful. We have covered:</p>
            
           <ul>      
               <li>Some of the REST API calls provided by HP Cloud OS</li>
               <li>Getting around the HP Cloud OS API Documentation app</li>
               <li>How to generate a security token in Eden</li>
               <li>General information about how to:
                   <ul>
                       <li>Create a resource pool in Peer</li>
                       <li>Create an infrastructure topology document in Focus</li>
                       <li>Provision an infrastructure topology and verify that the job completed</li>    
                   </ul>
               </li>
           </ul>
            
            <p>Next steps: experiment with the HP Cloud OS API Documentation app. It's installed on your HP Cloud OS instance and 
                can be accessed in Chrome or Firefox using the <a href="index.html#API-Documentation-Ports-per-Service">URLs and ports</a> identified in this topic. </p>
                <p>Also use the HP Cloud OS Operational Dashboard and the Administration Dashboard to get a better appreciation for the 
                tasks that are accomplished in the UIs, and which tasks can be performed using the REST API.  For information about the UIs, 
                see these guides that you downloaded from the FTP site for the HP Cloud OS private beta.</p>
            
            <ul>
                <li>HP Cloud OS Operational Guide</li>
                <li>HP Cloud OS Administration Guide</li>
            </ul>
            
        <p><b>Join the Conversation!</b></p>    
        <p>Questions about HP Cloud OS 1.0? Contact Us!  We want and value your feedback.  Visit the 
            <a href="http://h30499.www3.hp.com/t5/Software/ct-p/sws-top" target="new8">HP Community</a> 
            site to register (or login) and submit questions and comments in our forum. After you create a Screen Name,  
            send email to <a href="mailto:HPCloudOSBeta@hp.com?Subject=HP Cloud OS Private Beta Program: Community Forum">HPCloudOSBeta@hp.com</a> requesting membership in the 
            HP Cloud OS Private Beta Program's community forum.  The HP Product Management Team will respond to 
            your request within 1-2 business days. Thank you!</p>
    
    
    <!-- end of main topic content --> 
        
                    
                <script type="text/javascript" src="js/main.js"><!----></script>
 
                
                <p><a href="index.html#_top" style="padding:14px 0px 14px 0px; text-decoration:none;">Return to Top &#8593;</a></p>
        
        <p style="font-size: 12px;">Hewlett-Packard Company Confidential &#169; Copyright Hewlett-Packard Development Company, L.P. 2012-2013.</p>
                
            <!--    <div id="disqus_thread"><script type="text/javascript"> -->
	        <!--    var disqus_shortname = 'os-apiquickstart'; -->
	        <!--    var disqus_identifier = 'openstack-api-quick-startopenstack-api-quick-start'; --> 
	        
	       
                
               <!--  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><script type="text/javascript" src="js/comments.js"></script></div> -->
                
                 <div class="legal"><a href=""><!-- Legal notices --></a></div></div><div>
                    
                    <div id="leftnavigation" style="padding-top:3px; background-color:white;">
                        <div id="tabs">
                            <ul>
                                <li><a href="#treeDiv" tabindex="1"><span class="contentsTab">Contents</span></a></li>
                            </ul>
                            <div id="treeDiv"><img src="images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"/>
                                <div id="ulTreeDiv" style="display:none" class="thisisthat">
                                    <ul id="tree" class="filetree">  
                                        <li tabindex="2"><span class="file"><a href="index.html#Cloud-OS-API-Introduction">HP Cloud OS API Introduction</a></span>
                                            <ul>
                                                <li tabindex="2"><span class="file"><a href="index.html#Prerequisites">Prerequisites</a></span></li>
                                                <li tabindex="2"><span class="file"><a href="index.html#What-is-Cloud-OS">What is HP Cloud OS?</a></span></li>
                                                <li tabindex="2"><span class="file"><a href="index.html#What-are-the-Cloud-OS-Services">What are the HP Cloud OS Services?</a></span></li>
                                                <li tabindex="2"><span class="file"><a href="index.html#What-is-the-Interactive-REST-API-Documentation-app">What is the HP Cloud OS API Documentation app?</a></span></li>
                                                <li tabindex="2"><span class="file"><a href="index.html#API-Documentation-Ports-per-Service">API Documentation Ports per Service</a></span></li> 
                                                <li tabindex="2"><span class="file"><a href="index.html#API-Security-Tokens">API Security Tokens</a></span></li> 
                                            </ul>
                                        </li>
                                        <li tabindex="2"><span class="file"><a href="index.html#Use-Case-How-to-Provision-Topologies-OpenStack">Use Case #1: Define &amp; Provision a Topology (Grizzly)</a></span>
                                        <ul>
                                            <li tabindex="2"><span class="file"><a href="index.html#Create-Resource-Pool-OpenStack">Task 1: Create a Resource Pool (Grizzly)</a></span></li>
                                            <li tabindex="2"><span class="file"><a href="index.html#Post-Infrastructure-Topology-Document-OpenStack">Task 2: Post an Infrastructure Topology Document (Grizzly)</a></span></li>
                                            <li tabindex="2"><span class="file"><a href="index.html#Provision-Topology-OpenStack">Task 3: Provision the Topology (Grizzly)</a></span></li>
                                            <li tabindex="2"><span class="file"><a href="index.html#Verify-Provisioning-Job-Completion-OpenStack">Task 4: Verify Provisioning Job Completion (Grizzly)</a></span></li>
                                            <li tabindex="2"><span class="file"><a href="index.html#Verify-Realized-Topology-OpenStack">Task 5: Verify the Realized Topology (Grizzly)</a></span></li>
                                        </ul>
                                        </li>
                                        <li tabindex="2"><span class="file"><a href="index.html#Use-Case-How-to-Provision-Topologies-HPCS">Use Case #2: Define &amp; Provision a Topology (Diablo)</a></span>
                                            <ul>
                                                <li tabindex="2"><span class="file"><a href="index.html#Create-Resource-Pool-HPCS">Task 1: Create a Resource Pool (Diablo)</a></span></li>
                                                <li tabindex="2"><span class="file"><a href="index.html#Post-Infrastructure-Topology-Document-HPCS">Task 2: Post an Infrastructure Topology Document (Diablo)</a></span></li>
                                                <li tabindex="2"><span class="file"><a href="index.html#Provision-Topology-HPCS">Task 3: Provision the Topology (Diablo)</a></span></li>
                                                <li tabindex="2"><span class="file"><a href="index.html#Verify-Provisioning-Job-Completion-HPCS">Task 4: Verify Provisioning Job Completion (Diablo)</a></span></li>
                                                <li tabindex="2"><span class="file"><a href="index.html#Verify-Realized-Topology-HPCS">Task 5: Verify the Realized Topology (Diablo)</a></span></li>
                                            </ul>
                                        </li>       
                                        <li tabindex="2"><span class="file"><a href="index.html#Use-Case-Deprovision-Topology-Grizzly-or-Diablo">Use Case #3: Deprovision a Topology (Grizzly or Diablo)</a></span>
                                            <ul>
                                                <li tabindex="2"><span class="file"><a href="index.html#Deprovision-Topology">Task 1: Deprovision the Topology</a></span></li>
                                                <li tabindex="2"><span class="file"><a href="index.html#Verify-Deprovisioning-Job-Completion">Task 2: Verify Deprovisioning Job Completion</a></span></li>
                                            </ul>
                                        </li>
                                        <li tabindex="2"><span class="file"><a href="index.html#Next-Steps">Next Steps</a></span></li>
                                    </ul>
                                </div></div></div></div></div><script type="text/javascript" src="js/jquery.qtip-1.0.0-rc3.min.js"><!--jQuery plugin for glossary popups. -->
                   $('a[title]').qtip({ style: { name: 'cream', tip: true } })
                </script>
    
 </body>
</html>