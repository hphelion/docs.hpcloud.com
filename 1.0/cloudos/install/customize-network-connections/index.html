<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<!-- Mirrored from docs.hpcloud.com/cloudos/install/customize-network-connections/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 15:03:03 GMT -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Customize Network Connections (Optional)</title>
	
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="shortcut icon" href="../../../favicon.ico" type="image/vnd.microsoft.icon" />
  <link rel="stylesheet" href="../../../css/combined.css">

	<script src="../../../js/modernizr-2.5.3.min.js"></script>
	<script src="../../../js/metrics.js"></script> 
</head>
<body>
  <div id="wrapper">
    <!--[if lt IE 7]>
    	<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div class="header-container">
      <header class="header">
      	<div class="top-bar" style="height: 75px;">
		
      		<div class="search-wrapper wrapper container_16">
			
      			<a href="#" class="sales-rep show-320 show-480 hide-768"><span aria-hidden="true" class="icon-icon-sales-rep"></span></a>
      			<nav class="sub-nav" >
				<a href="../../../index.html" class="logo"  ><img src="../../../images/HP_Helion_logo_72.png" style="position: absolute;top: 10px;" alt="HP Helion" /></a>
        			<ul>
					
 

         
        				<li><a href="../../../../external.html?link=http://www8.hp.com/us/en/cloud/helion-portfolio.html">Helion@HP</a></li>
						<li><a href="../../../../external.html?link=https://h30580.www3.hp.com/">Support</a></li>
        				<li><a href="mailto:heliondocs@hp.com">Contact</a></li>
						
        				 
        			</ul>
      			</nav>
          </div>
      	</div>
		<!-- per JC
      	<div class="nav-wrapper wrapper container_16">
        	<a href="http://www.hpcloud.com/" class="logo"><img src="/images/HP_Helion_logo_72.png" alt="HP Helion" /></a>
      		<nav class="nav hide-320 show-768">
      			<ul>
      				<li><a href="http://hpcloud.com/products-services">Products <span>& Services</span></a></li>
      				<li><a href="http://hpcloud.com/solutions">Cloud <span>Solutions</span></a></li>
      				<li><a href="http://hpcloud.com/why-hp-cloud">Why HP <span>Cloud?</span></a></li>
      				<li><a href="http://hpcloud.com/learning-center">Learning <span>Center</span></a></li>
      				<li><a href="http://hpcloud.com/blog">The <span>Blog</span></a></li>
      				<li><a href="http://hpcloud.com/free-trial">Sign Up <span>Today</span></a></li>
      			</ul>
      		</nav>
      	</div>
		-->
      </header>
    </div>
		<div id="main-container">
			<div id="main" class="wrapper clearfix container_16">
				<div id="content" class="grid_10 suffix_1">
	<article>
		<!--PUBLISHED-->

<script>
<![CDATA[

function PageRefresh {
onLoad="window.refresh"
}

PageRefresh();

]]>
</script><p style="font-size: small;"> <a href="../customize-server-types/index.html">◀ PREV</a> | <a href="../index.html">▲ UP</a> | <a href="../customize-network-settings/index.html">NEXT ▶</a> </p>

<h1 id="customize-network-connections-optional">Customize Network Connections (Optional)</h1>

<p>This topic describes the steps to customize the network connections. These steps are optional.</p>

<p><strong>Caution:</strong> If you plan to customize the connections, you must do it before you complete the steps described in <a href="../complete-admin-node-installation.html">Complete Admin Node Installation (Required)</a>. 
After that, the connections dialogs are read only. Once the install process is triggered, no changes can be made. If you want to make changes, 
you need to start over by re-installing the Admin Node.</p>

<p>Based on the network infrastructure suggested in the "Plan the Infrastructure for a Cloud" section of <a href="../before-you-install.html">Before You Install</a>, 
you must customize the Connections settings in the Connections view.</p>

<p>After the enumeration of ports is consistent across all servers in the cloud, the Connections view defines those ports into a set of logical connections (interfaces) that will be used to eventually
define the networks.</p>

<p>The connections are defined based on the Network Modes along with a list of logical interfaces and the corresponding physical interfaces' ports and bandwidth. For each logical connection (intf0, intf1,
intf2) the network type is identified (admin, os_sdn, public). The <code>os_sdn</code> value stands for OpenStack Software-Defined-Network.</p>

<h2 id="examples-of-network-modes">Examples of Network Modes</h2>

<ul><li><p>Single Mode: All connections are shared on the same physical interface through VLAN.</p></li>
<li><p>Dual Mode: All connections have their own interfaces where VLAN and bridge are off.</p></li>
<li><p>Team Mode: All connections are shared on the same two physical interfaces through VLAN. Teaming means treating the wires like a single bundle.</p></li>
</ul><h2 id="examples-of-logical-interface-values">Examples of Logical Interface Values</h2>

<ul><li><p><code>intf0 (admin, bmc_vlan)</code></p></li>
<li><p><code>intf1 (os_sdn)</code></p></li>
<li><p><code>intf2 (public)</code></p></li>
</ul><h2 id="examples-of-physical-interface-values">Examples of Physical Interface Values</h2>

<ul><li><p><code>1Gb (preferred) on 1st port</code></p></li>
<li><p><code>1Gb (preferred) on 2nd port</code></p></li>
<li><p><code>1Gb (preferred) on 3rd port</code></p></li>
</ul><p>In this Dual mode example, <code>1Gb (preferred) on 2nd port</code> means a one gigabit network for port 2, as enumerated by default from the server's BIOS or as overridden in the Server Types panel.
The "preferred" tag suggests that if the NIC/port does not support 1Gb, Cloud OS falls back to the next maximum speed supported by the NIC or port. However, if there is no preferred tag, it
means the port has to support 1Gb; otherwise the deployment may fail.</p>

<h2 id="criteria-for-changes-to-default-connection-values">Criteria for Changes to Default Connection Values</h2>

<p>Here is the criteria to be considered if you make changes to the default connection values.</p>

<h3 id="dual-mode-examples">Dual Mode Examples</h3>

<p>In Dual mode, the default settings assume that all the nodes have their interfaces wired as follows.</p>

<ul><li><p><code>eth0</code> - admin network</p></li>
<li><p><code>eth1</code> - os_sdn network</p></li>
<li><p><code>eth2</code> - public/external network</p></li>
</ul><blockquote>
  <p><strong>IMPORTANT:</strong> In such a scenario, keep the default values intact.</p>
</blockquote>

<p>In Dual mode, if the wiring of networks between the nodes are non-contiguous and/or not in sequence, you need to change the default mapping:</p>

<ul><li><p>Example 1: For all the nodes, <code>eth0 - admin</code>, <code>eth1 - public</code>, <code>eth2 - private</code> — the Connections table must be customized to look like the following:</p>

<p>intf0 - 1Gb (preferred) on 1st port</p>

<p>intf1 - 1Gb (preferred) on 3rd port</p>

<p>intf2 - 1Gb (preferred) on 2nd port</p></li>
<li><p>Example 2: For all the nodes, <code>eth0 - admin</code>, <code>eth2 - os_sdn</code>, <code>eth4 - public/external</code> — the Connections table must be customized to look like the following:</p>

<p>intf0 - 1Gb (preferred) on 1st port</p>

<p>intf1 - 1Gb (preferred) on 3rd port</p>

<p>intf2 - 1Gb (preferred) on 5th port</p></li>
</ul><h3 id="single-mode-example">Single Mode Example</h3>

<p>In Single mode, keep the defaults. It is assumed that the <code>eth0</code> port is configured on the switch to support tagged VLANs, 
as discussed in the next topic, <a href="../customize-network-settings/index.html">Customize Network Settings (Required)</a>.</p>

<blockquote>
  <p><strong>Note:</strong> Interface mapping must be identical on all the nodes.</p>
</blockquote>

<h3 id="team-mode-examples">Team Mode Examples</h3>

<p>In Team mode, configure the virtual connections to use both trunks. For example:</p>

<ul><li>Map eth0, eth2, and eth4 to trunk 1.</li>
<li>Map eth1, eth3, and eth5 to trunk 2.</li>
</ul><p>Note that in this example, the eth0 and eth1 interfaces belongs to same VLAN; the same is true for the eth2 and eth3 pair, and the eth4 and eth5 pair. When the Admin Node allocates the baremetal node, Cloud OS should create a teaming NIC using the NIC pairs.</p>

<p>Here's a partial example of how the Team mode configuration could look on this Connections dialog:</p>

<table style="background-color: white; color: black;">
  <tr><th>Logical Interface</th>
<th>Physical Interface</th>
<th>Interface Mode</th>
</tr>
  <tr><td>intf0 (admin, bmc_vlan)</td>
<td>1Gb on 1st port, 1Gb on 2nd port</td>
<td>6</td>
</tr>
  <tr><td>intf1 (os_sdn)</td>
<td>1Gb on 1st port, 1Gb on 2nd port</td>
<td>6</td>
</tr>
  <tr><td>intf2 (public)</td>
<td>1Gb on 1st port, 1Gb on 2nd port</td>
<td>6</td>
</tr>
</table><h3 id="interface-mode">Interface Mode</h3>

<p>Interface Mode refers to the default teaming algorithm to use for the bonding driver in Linux. The default value is 6, which indicates that 
teaming uses the "adaptive load balancing" algorithm. Other values used with teaming are not supported in this Cloud OS release.</p>

<ul><li>0: Round-robin policy (balance-rr)</li>
<li>1: Active backup policy (active-backup)</li>
<li>2: XOR policy (balance-xor)</li>
<li>3: Broadcast policy (broadcast)</li>
<li>4: IEEE 802.3ad Dynamic link aggregation (802.3ad)</li>
<li>5: Adaptive transmit load balancing (balance-tlb)</li>
<li>6: Adaptive load balancing (balance-alb) — Mode 6 includes balance-tlb + receive load balancing (rlb) for IPV4 traffic. 
The receive load balancing is achieved by ARP negotiation. The bonding driver intercepts the ARP Replies sent by the server on their 
way out and overwrites the src hw address with the unique hardware address of one of the slaves in the bond such that different clients use 
different hardware addresses for the server.</li>
</ul><!-- 
* **Mode 0 (balance-rr)**

> Mode means the packets are transmitted in sequential order from the first available slave through the last. If two real interfaces are slaves in the 
bond and two packets arrive destined out of the bonded interface the first will be transmitted on the first slave and the second frame 
will be transmitted on the second slave. The third packet will be sent on the first and so on. This provides load balancing and fault tolerance.

* **Mode 1 (active-backup)**

> Mode 1 can be used for fault tolerance. One of the interfaces is placed into a backup state and will only make it active if the link is lost by the active interface. 
Only one slave in the bond is active at an instance of time. A different slave becomes active only when the active slave fails. 

* **Mode 2 (balance-xor)**

> Mode 2 transmits based on XOR formula. (Source MAC address is XOR'd with destination MAC address) modula slave count. 
This mode selects the same slave for each destination MAC address and provides load balancing and fault tolerance.

* **Mode 3 (broadcast)**

> Mode 3 transmits everything on all slave interfaces. This mode is the least used and provides only fault tolerance.

* **Mode 4 (802.3ad)**

> Mode 4 is also called Dynamic Link Aggregation. It creates aggregation groups that share the same speed and duplex settings. 
This mode requires a switch that supports IEEE 802.3ad Dynamic link.

* **Mode 5 (balance-tlb)**

> Mode 5 is also called Adaptive transmit load balancing. The outgoing traffic is distributed according to the current load and queue on each 
slave interface. Incoming traffic is received by the current slave.

* **Mode 6 (balance-alb)**

> Mode 6 is also called Adaptive load balancing. This mode includes balance-tlb + receive load balancing (rlb) for IPV4 traffic. 
The receive load balancing is achieved by ARP negotiation. The bonding driver intercepts the ARP Replies sent by the server on their 
way out and overwrites the src hw address with the unique hw address of one of the slaves in the bond such that different clients use different hw addresses for the server.

--><h2 id="edit-connections">Edit Connections</h2>

<p>If you need to edit the connections:</p>

<ol><li><p>From the Environment tab &gt; Connection, edit the Network Mode you want to customize.  Most likely, this would be Dual or Team.</p></li>
<li><p>The Edit Connection dialog presents the Physical Interface values in a succinct format, such as ?1g1. The value contains (up to) four characters, and follows these conventions:</p>

<ul><li><p>1st character: the allowable value is a question mark (?) or blank.  The question mark indicates a preferred connection, meaning the  available bandwidth supported by the Network Interface card (NIC). If not specified (blank), Cloud OS configures the physical interface to the value specified by the next character.</p></li>
<li><p>2nd character: the allowable value may be 1, 10, or 100. It is a numerical value to indicate the network bandwidth.</p></li>
<li><p>3rd character: the value may be g, m, or k. It is the bandwidth unit. g represents gigabits; m represents megabits; k represents kilobits.</p></li>
<li><p>4th character: the value may be a number between 1 and 16.  It is a numerical value to specify the port or NIC number.</p></li>
</ul></li>
<li><p>To add settings, click Add Details to add a new blank row, and add the logical interface, physical interface and optional interface mode.</p></li>
<li><p>To delete settings, click one or more checkboxes next to the existing settings and click Delete Details.</p></li>
</ol><h2 id="next-step">Next Step</h2>

<p>Proceed to the <a href="../customize-network-settings/index.html">Customize Network Settings (Required)</a> topic.</p>

<p>
  <a href="#top" style="padding:14px 0px 14px 0px; text-decoration: none;"> Return to Top ↑ </a>
</p>
	</article>
</div>

<div id="sidebar" class="grid_5 top-spacer">
	<aside class="signup-box">
		<p class="align-center">
			Start using HP Cloud<br>
			<a href="../../../../external.html?link=https://helion.hpwsportal.com/#/Home/Show" class="signup-button-orange gutter-top-half">Sign Up Now</a>
		</p>
	</aside>
	<aside class="box section-navigation">
  
     
  
  <ul>
    
      
      
      <li>
        <a class="" href="../../../index.html"><span>HP Helion Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../index.html"><span>HP Cloud OS Home  (Deprecated)</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../prepare/index.html"><span>Prepare</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../index.html"><span>Install</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../manage/index.html"><span>Manage</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../develop/index.html"><span>Develop</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../forum/index.html"><span>Community Forum</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../openstack/index.html"><span>OpenStack Links</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../siteindex/index.html"><span>Site Index</span></a>
      </li>
    
  </ul>
</aside>
</div>

			</div> <!-- #main -->
		</div> <!-- #main-container -->
	</div> <!-- #wrapper -->

		
  <footer class="footer">
    <div class="container_16">
    	<div class="wrapper grid_16">
    		<ul class="footer-social">
    			<li class="twitter"><a href="../../../../external.html?link=https://twitter.com/hphelioncloud"></a></li>
    			<li class="youtube"><a href="../../../../external.html?link=http://www.youtube.com/hpcloud"></a></li>
    			<li class="rss"><a href="../../../../external.html?link=http://h30499.www3.hp.com/hpeb/rss/board?board.id=sws-661"></a></li>
    			<li class="facebook"><a href="../../../../external.html?link=https://www.facebook.com/HPCloud"></a></li>
    			<li class="linkedin stretch"><a href="../../../../external.html?link=https://www.linkedin.com/company/hewlett-packard"></a></li>
    		</ul>
    		<ul class="contact-info">
    			<li>In the U.S.<br />1-855-61CLOUD</li>
    			<li>Worldwide<br />+1678-745-9010</li>
    			<li class="col-3">Online Support<br /><a href="mailto:support@hpcloud.com">Email</a> 
				<!-- comment out per JC
				or <span class="link" onclick="jQuery('#hpcloud-chat-button a').click();">Chat with us</span>
				-->
				</li>
    		</ul>
    		<div class="copyright">
    			<p>The OpenStack&reg; Word Mark and OpenStack Logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.</p><br />
    			<p>&copy; 2014 Hewlett-Packard Development Company, L.P.<br /><a href="../../../../external.html?link=http://www.hpcloud.com/legal-documents">HP Cloud legal documents and privacy policy</a></p>
    		</div>
    	</div>
    </div>
  </footer>

	<script src="../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="../../../../ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../../js/jquery-1.8.2f.min.html"><\/script>')</script>

  <script src="../../../js/combined.js"></script>
  <script>
      __HP_CHAT_CONF = {};
      __HP_CHAT_CONF.sales = true;
      __HP_CHAT_CONF.support = true;
    </script>
	
    <script> //removed per JC
    //(function($, window) {
    //    $(window).load(function() {
    //    var sNew = document.createElement("script");
    //  sNew.async = true;
    //sNew.src = 'https://a248.e.akamai.net/cdn.hpcloudsvc.com/gcbb18d905d32174e6eb205943b0dea4a/prodae1/chat.js';
    //var s0 = document.getElementsByTagName('script')[0];
    //s0.parentNode.insertBefore(sNew, s0);
    //});
    //})(jQuery, this);
    </script>
    <script>
        //Executes your code when the DOM is ready.  Acts the same as $(document).ready().
        function styleRestCmds() {
            $("h5:contains('GET')").addClass('rest_cmd cmd_get');
            $("h5:contains('POST')").addClass('rest_cmd cmd_post');
            $("h5:contains('FormPOST')").removeClass('rest_cmd cmd_post');
            $("h5:contains('PUT')").addClass('rest_cmd cmd_put');
            $("h5:contains('COPY')").addClass('rest_cmd cmd_copy');
            $("h5:contains('PATCH')").addClass('rest_cmd cmd_patch');
            $("h5:contains('HEAD')").addClass('rest_cmd cmd_head');
            $("h5:contains('DELETE')").addClass('rest_cmd cmd_delete');
        }

        $(function() {
            //Calls the tocify method on your HTML div.
            $("#toc").tocify({
                'selectors': 'h2,h3,h4',
                'showAndHideOnScroll': false,
                'hideEffect': 'slideUp',
                'scrollTo': 55    // Amount of space between top of page and selected content
              }
            );
            // Style the REST commands
            styleRestCmds();
        });
    </script>
</body>

<!-- Mirrored from docs.hpcloud.com/cloudos/install/customize-network-connections/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 15:03:03 GMT -->
</html>
