<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<!-- Mirrored from docs.hpcloud.com/helion/openstack/flexiblecontrol/overview by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 14:59:20 GMT -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>HP Helion OpenStack&#174; Flexible Control Plane Overview</title>
	
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="shortcut icon" href="../../../favicon.ico" type="image/vnd.microsoft.icon" />
  <link rel="stylesheet" href="../../../css/combined.css">

	<script src="../../../js/modernizr-2.5.3.min.js"></script>
	<script src="../../../js/metrics.js"></script> 
</head>
<body>
  <div id="wrapper">
    <!--[if lt IE 7]>
    	<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div class="header-container">
      <header class="header">
      	<div class="top-bar" style="height: 75px;">
		
      		<div class="search-wrapper wrapper container_16">
			
      			<a href="#" class="sales-rep show-320 show-480 hide-768"><span aria-hidden="true" class="icon-icon-sales-rep"></span></a>
      			<nav class="sub-nav" >
				<a href="../../../index.html" class="logo"  ><img src="../../../images/HP_Helion_logo_72.png" style="position: absolute;top: 10px;" alt="HP Helion" /></a>
        			<ul>
					
 

         
        				<li><a href="../../../../external.html?link=http://www8.hp.com/us/en/cloud/helion-portfolio.html">Helion@HP</a></li>
						<li><a href="../../../../external.html?link=https://h30580.www3.hp.com/">Support</a></li>
        				<li><a href="mailto:heliondocs@hp.com">Contact</a></li>
						
        				 
        			</ul>
      			</nav>
          </div>
      	</div>
		<!-- per JC
      	<div class="nav-wrapper wrapper container_16">
        	<a href="http://www.hpcloud.com/" class="logo"><img src="/images/HP_Helion_logo_72.png" alt="HP Helion" /></a>
      		<nav class="nav hide-320 show-768">
      			<ul>
      				<li><a href="http://hpcloud.com/products-services">Products <span>& Services</span></a></li>
      				<li><a href="http://hpcloud.com/solutions">Cloud <span>Solutions</span></a></li>
      				<li><a href="http://hpcloud.com/why-hp-cloud">Why HP <span>Cloud?</span></a></li>
      				<li><a href="http://hpcloud.com/learning-center">Learning <span>Center</span></a></li>
      				<li><a href="http://hpcloud.com/blog">The <span>Blog</span></a></li>
      				<li><a href="http://hpcloud.com/free-trial">Sign Up <span>Today</span></a></li>
      			</ul>
      		</nav>
      	</div>
		-->
      </header>
    </div>
		<div id="main-container">
			<div id="main" class="wrapper clearfix container_16">
				<div id="content" class="grid_10 suffix_1">
	<article>
		<!--PUBLISHED-->

<script>
<![CDATA[

function PageRefresh {
onLoad="window.refresh"
}

PageRefresh();

]]>
</script><h1 id="hp-helion-openstack-10-flexible-control-plane-overview">HP Helion OpenStackÂ® 1.0 Flexible Control Plane Overview</h1>

<p>The HP Helion OpenStack Flexible Control Plane introduces the capacity to deploy the control plane in a virtual environment in addition to the current bare-metal physical deployment.  This new configuration reduces the control plane footprint to just three servers from the current seven servers.</p>

<p>This topic covers:</p>

<ul><li><a href="#deploy">Deployment Architecture</a></li>
<li><a href="#details">Environment Details</a></li>
<li><a href="#prereq">Pre-requisites</a>

<ul><li><a href="#kvmsetup">KVM Host Setup</a></li>
<li><a href="#variables">Configurable Variables</a></li>
<li><a href="#configfiles">Configuration Files</a></li>
</ul></li>
</ul><p>Due to length, the <a href="install/index.html">step-by-step installation instructions</a> are available separately.</p>

<h2 id="overview">Overview</h2>

<p>The Flexible Control Plane addresses the following concerns with the existing deployment model:</p>

<ul><li>Requires too many controller nodes</li>
<li>Controllers must be physical servers</li>
<li>Too large a footprint for smaller clouds</li>
</ul><p>The Flexible Control Plane is supported for the following use cases:</p>

<ul><li>Evaluation</li>
<li>Demonstration</li>
<li>Proof of concept</li>
</ul><p>Current Known Limitations:</p>

<ul><li>The Flexible Control Plane is not supported for production use.</li>
<li>Backup and Restore of a FCP Cloud is not supported.</li>
<li>VSA-AO is not supported.</li>
</ul><h2 id="deploy">Deployment Architecture</h2>

<p>Currently, the Flexible Control Plane requires deployment on three KVM hosts.
Figure 1 illustrates the deployment of overcloud compute nodes and VSA nodes to physical servers. In the diagram, the seed VM, undercloud controller node, overcloud controller nodes, and Swift nodes are in the virtualized environment. The StoreVirtual node and overcloud compute nodes remain baremetal servers.</p>

<p><img src="../../../content/documentation/media/flexiblecontrolpane1.png" /><br />
Figure 1</p>

<p>In the deployment scenario in Figure 2, the cloud control plane is distributed across three KVM hosts with the deployment of VSA storage nodes and overcloud Nova compute nodes on physical servers.</p>

<p><img src="../../../content/documentation/media/flexiblecontrolpane2.png" /><br />
Figure 2</p>

<h2 id="details">Environment Details</h2>

<p>The above environment contains the following networks:</p>

<ul><li>Management Network</li>
<li>IPMI</li>
<li>Service</li>
<li>External</li>
</ul><h3 id="management-network">Management Network</h3>

<p>This network is used for most cloud traffic including: PXE boot nodes, tenant access to service APIs, internal API traffic between services (one service to another), HA heartbeats, tenant access to services, VxLAN traffic for between tenant VMs, VM access to block and object storage, object storage replication and synchronization between StoreVirtual VSAs, Object Operations service nodes, MySQL clusters, RabbitMQ clusters, keepalived, CODN access to catalog, logging traffic to centralized logging, monitoring checks to Icinga.</p>

<p>In this example, the Management Network CIDR is 192.168.124.0/24.</p>

<h3 id="ipmi-intelligent-platform-management-interface">IPMI (Intelligent Platform Management Interface)</h3>

<p>This is the network for server hardware management. 
In this example the CIDR (Classless Inter-Domain Routing) address of the IPMI network is 192.168.1.0/24.</p>

<h3 id="service">Service</h3>

<p>Connects trusted VMs in the overcloud to communicate with the cloud infrastructure component using this network. In this example, the Service Network CIDR is 192.168.125.0/24.</p>

<h3 id="external">External</h3>

<p>This network is connected to the Internet or intranet and provides floating IPs. In this example the External Network CIDR is 172.32.100.0/24.</p>

<h2 id="hardware">Hardware Details</h2>

<h3 id="kvmhost">KVMHost</h3>

<p>The following configuration is used for the KVM host.</p>

<ul><li>RAM: 256 GB</li>
<li>CPU Cores: 20</li>
<li>HDD: 2TB</li>
<li>OS Installed: Ubuntu 14.04 LTS</li>
</ul><h3 id="vsa-nodes">VSA Nodes</h3>

<p>Three (3) physical servers are used as VSA nodes.</p>

<ul><li>RAM: 12 GB</li>
<li>CPU Cores: 8</li>
<li>HDD: 8*1 TB</li>
</ul><h3 id="physical-compute">Physical Compute</h3>

<p>The following configuration is used for the overcloud compute node.
- RAM: 96GB
- CPU Core: 40
- HDD: 2TB</p>

<h2 id="prereq">Prerequisites</h2>

<p>The Flexible Control Plane configuration has the same prerequisites as HP Helion OpenStack 1.01. Please be sure the environment satisfies the prerequisites before beginning installation.</p>

<ul><li><a href="../install/prereqs/index.html">Installation Prerequisites</a></li>
<li><a href="../technical-overview/index.html">Network Topology Requirements</a></li>
<li><a href="../support-matrix/index.html">Hardware/Software Requirements</a></li>
</ul><h3 id="kvmsetup">KVM Host Setup</h3>

<p>Set up KVM hosts and ensure all the hardware requirements are met and the required prerequisites are fulfilled before you begin your installation. Note that there are further prerequisites beyond those listed for HP Helion OpenStack 1.01 mentioned previously.</p>

<ol><li>The following packages must be installed on all the KVM hosts. 

<ul><li>xrdp</li>
<li>xfce4</li>
<li>qemu-kvm</li>
<li>openvswitch-switch</li>
<li>openvswitch-common</li>
<li>libssl-dev</li>
<li>libffi-dev</li>
<li>virt-manager</li>
<li>libvirt-bin</li>
<li>python-libvirt</li>
<li>chromium-browser</li>
</ul></li>
<li>Set up password-less SSH logins using the key generator in PuTTy or a similar application.

<ul><li>Set up the password-less logins between all the KVM hosts. This enables the root user of any KVM host to be able to log in via SSH to all other KVM hosts without a password.</li>
<li>Set up password-less login for the root user of the same KVM host. This enables the root user of the KVM host to be able to log in to the same KVM host without a password.</li>
</ul></li>
</ol><h2 id="options">Configurable Options for Flexible Control Plane</h2>

<p>The following section describes the environment variables involved in configuring the Flexible Control Plane. These variables are new with Flexible Control Plane, so you won't have seen them before if you are familiar with the HP Helion OpenStack installation process.  You will set them during the installation process outlined in the <a href="install.html">installation instructions</a>. Here, just take note of what is configurable in this release, and what the settings mean.</p>

<h3 id="variables">Configurable Variables</h3>

<p>Below are descriptions of available configuration variables. Again, you will set these later, during the installation step-by-step process.</p>

<p><strong>HP_VM_MODE</strong> Set this variable to specify the mode of deployment as single or hybrid. Currently, the options supported are: "Y", "HYBRID" and "Not Set".  To enable this feature, set the value to "HYBRID".</p>

<pre>
  <code>export HP_VM_MODE=HYBRID
</code>
</pre>

<p><strong>HP_ MULTI_ KVM</strong>  This variable enables the heterogeneous environment to support the multiple hypervisors to host HP Helion OpenStack Control Plane. The best practice is to set it to three (3).</p>

<pre>
  <code>export HP_MULTI_ KVM=3
</code>
</pre>

<p>All of the remaining variable values you set here will match the flavor specified in the <a href="#configfiles">uc_custom.flavors.json</a> file. (A <em>flavor</em> is a description of a hardware resource in terms of CPU, RAM, and memory. If all of these three are the same, the resources are the same flavor.)</p>

<p><strong>OvercloudBlockStorageFlavor</strong> Set this variable to specify the overcloud block storage flavors to be used at the time of deployment.</p>

<pre>
  <code>export OvercloudBlockStorageFlavor=BlockStorageFlavor   
</code>
</pre>

<p><strong>OvercloudComputeFlavor</strong> Set this variable to specify the overcloud compute flavor to be used at the time of deployment.</p>

<pre>
  <code>export OvercloudComputeFlavor=computeflavor
</code>
</pre>

<p><strong>OvercloudControlFlavor</strong> Set this variable to specify the flavor for the overcloud management controller to be used at the time of deployment.</p>

<pre>
  <code>export OvercloudControlFlavor=controllerMgmtFlavor
</code>
</pre>

<p><strong>controller0Flavor</strong> Set this variable to specify the overcloud controller0 flavor to be used at the time of deployment.</p>

<pre>
  <code>export controller0Flavor= controller0Flavor
</code>
</pre>

<p><strong>controller1Flavor</strong> Set this variable to specify the overcloud controller1 flavor to be used at the time of deployment.</p>

<pre>
  <code>export controller1Flavor= controller1Flavor
</code>
</pre>

<p><strong>OvercloudSwiftScaleoutProxyFlavor</strong> Set this variable to specify the overcloud Swift Scale-out Proxy flavor to be used at the time of deployment.</p>

<pre>
  <code>export OvercloudSwiftScaleoutProxyFlavor= SwiftScaleoutProxyFlavor
</code>
</pre>

<p><strong>OvercloudVsaFlavor</strong> Set this variable to specify the overcloud VSA flavor to be used at the time of deployment.</p>

<pre>
  <code>export OvercloudVsaFlavor= VsaFlavor
</code>
</pre>

<p><strong>OvercloudSwiftStorageFlavor</strong> Set this variable to specify the overcloud Swift Storage flavor to be used at the time of deployment.</p>

<pre>
  <code>export OvercloudSwiftStorageFlavor=SwiftStorageFlavor
</code>
</pre>

<p><strong>OvercloudSwiftScaleoutObjectFlavor</strong> Set this variable to specify the overcloud Swift Scale-out object flavor to be used at the time of deployment.</p>

<pre>
  <code>export OvercloudSwiftScaleoutObjectFlavor=SwiftScaleoutObjectFlavor
</code>
</pre>

<h3 id="configfiles">Configuration Files</h3>

<p>The Flexible Control Plane will also require the following configuration files in the root directory: <strong>uc_custom_flavors.json</strong> and <strong>kvms.csv</strong>. Note the following explanations of what these files will contain. They will be created later in the installation process (<a href="install.html">installation instructions</a>).</p>

<h4 id="uc-custom-flavorsjson">uc_custom_flavors.json</h4>

<p>The <em>uc_custom_flavors.json</em> file, which you will create later, during the installation process defined in the <a href="install.html">installation instructions</a> is required to define the flavors that will be used during the deployment. This flavor information is added to the undercloud and used when deploying the control plane nodes as VMs on target KVM host.</p>

<p>A flavor node in <em>uc_custom_flavors.json</em> consists of the following values:</p>

<ul><li><strong>name</strong>: Name of the node</li>
<li><strong>memory</strong>:  Memory consumed by the node</li>
<li><strong>Disk</strong>:   Disk consumed by the node </li>
<li><strong>cpu</strong>: Number of CPUs used </li>
<li><strong>arch</strong>: Architecture type of the node</li>
<li><strong>hw_type</strong>: Hardware type. It can be Baremetal or Virtual machine</li>
<li><strong>node_type</strong>:  Role of the node. For example: compute, VSA, Swift etc.</li>
</ul><h4 id="kvmscsv">kvms.csv</h4>

<p>A kvms.csv file will also be created later via the <a href="install.html">installation instructions</a>. It is required to define the KVM hosts being used for Flexible Control Plane deployment. This file contains the IP of the KVM host and an account with administrator or root privileges.</p>

<hr /><p>Continue to <a href="install.html">step-by-step installation instructions and known issues</a>.</p>
	</article>
</div>

<div id="sidebar" class="grid_5 top-spacer">
	<aside class="signup-box">
		<p class="align-center">
			Start using HP Cloud<br>
			<a href="../../../../external.html?link=https://helion.hpwsportal.com/#/Home/Show" class="signup-button-orange gutter-top-half">Sign Up Now</a>
		</p>
	</aside>
	<aside class="box section-navigation">
  
     
  
  <ul>
    
      
      
      <li>
        <a class="" href="../../../index.html"><span>HP Helion Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../index.html"><span>HP Helion OpenStack Documentation Home</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../release-notes/101/index.html"><span>Release Notes</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../faq/index.html"><span>FAQ</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../technical-overview/index.html"><span>Technical Overview</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../services/overview/index.html"><span>Services Overview</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../support-matrix/index.html"><span>Support Matrix</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../install/overview/index.html"><span>Installation Overview</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../install/security/index.html"><span>Network Security</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../backup.restore/index.html"><span>Back Up and Restore</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../services/troubleshooting/index.html"><span>Troubleshooting</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../related-links/index.html"><span>Related Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../glossary/index.html"><span>Glossary</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../eula/index.html"><span>End User License Agreement</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../3rd-party-license-agreements/index.html"><span>Open Source and Third-Party Software License Agreements</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../siteindex/index.html"><span>Site Index</span></a>
      </li>
    
  </ul>
</aside>
</div>

			</div> <!-- #main -->
		</div> <!-- #main-container -->
	</div> <!-- #wrapper -->

		
  <footer class="footer">
    <div class="container_16">
    	<div class="wrapper grid_16">
    		<ul class="footer-social">
    			<li class="twitter"><a href="../../../../external.html?link=https://twitter.com/hphelioncloud"></a></li>
    			<li class="youtube"><a href="../../../../external.html?link=http://www.youtube.com/hpcloud"></a></li>
    			<li class="rss"><a href="../../../../external.html?link=http://h30499.www3.hp.com/hpeb/rss/board?board.id=sws-661"></a></li>
    			<li class="facebook"><a href="../../../../external.html?link=https://www.facebook.com/HPCloud"></a></li>
    			<li class="linkedin stretch"><a href="../../../../external.html?link=https://www.linkedin.com/company/hewlett-packard"></a></li>
    		</ul>
    		<ul class="contact-info">
    			<li>In the U.S.<br />1-855-61CLOUD</li>
    			<li>Worldwide<br />+1678-745-9010</li>
    			<li class="col-3">Online Support<br /><a href="mailto:support@hpcloud.com">Email</a> 
				<!-- comment out per JC
				or <span class="link" onclick="jQuery('#hpcloud-chat-button a').click();">Chat with us</span>
				-->
				</li>
    		</ul>
    		<div class="copyright">
    			<p>The OpenStack&reg; Word Mark and OpenStack Logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.</p><br />
    			<p>&copy; 2014 Hewlett-Packard Development Company, L.P.<br /><a href="../../../../external.html?link=http://www.hpcloud.com/legal-documents">HP Cloud legal documents and privacy policy</a></p>
    		</div>
    	</div>
    </div>
  </footer>

	<script src="../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="../../../../ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../../js/jquery-1.8.2f.min.html"><\/script>')</script>

  <script src="../../../js/combined.js"></script>
  <script>
      __HP_CHAT_CONF = {};
      __HP_CHAT_CONF.sales = true;
      __HP_CHAT_CONF.support = true;
    </script>
	
    <script> //removed per JC
    //(function($, window) {
    //    $(window).load(function() {
    //    var sNew = document.createElement("script");
    //  sNew.async = true;
    //sNew.src = 'https://a248.e.akamai.net/cdn.hpcloudsvc.com/gcbb18d905d32174e6eb205943b0dea4a/prodae1/chat.js';
    //var s0 = document.getElementsByTagName('script')[0];
    //s0.parentNode.insertBefore(sNew, s0);
    //});
    //})(jQuery, this);
    </script>
    <script>
        //Executes your code when the DOM is ready.  Acts the same as $(document).ready().
        function styleRestCmds() {
            $("h5:contains('GET')").addClass('rest_cmd cmd_get');
            $("h5:contains('POST')").addClass('rest_cmd cmd_post');
            $("h5:contains('FormPOST')").removeClass('rest_cmd cmd_post');
            $("h5:contains('PUT')").addClass('rest_cmd cmd_put');
            $("h5:contains('COPY')").addClass('rest_cmd cmd_copy');
            $("h5:contains('PATCH')").addClass('rest_cmd cmd_patch');
            $("h5:contains('HEAD')").addClass('rest_cmd cmd_head');
            $("h5:contains('DELETE')").addClass('rest_cmd cmd_delete');
        }

        $(function() {
            //Calls the tocify method on your HTML div.
            $("#toc").tocify({
                'selectors': 'h2,h3,h4',
                'showAndHideOnScroll': false,
                'hideEffect': 'slideUp',
                'scrollTo': 55    // Amount of space between top of page and selected content
              }
            );
            // Style the REST commands
            styleRestCmds();
        });
    </script>
</body>

<!-- Mirrored from docs.hpcloud.com/helion/openstack/flexiblecontrol/overview by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 14:59:20 GMT -->
</html>
