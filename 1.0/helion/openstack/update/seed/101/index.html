<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<!-- Mirrored from docs.hpcloud.com/helion/openstack/update/seed/101/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 14:58:34 GMT -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>HP Helion OpenStack&#174; Updating the Seed Cloud Host</title>
	
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="shortcut icon" href="../../../../../favicon.ico" type="image/vnd.microsoft.icon" />
  <link rel="stylesheet" href="../../../../../css/combined.css">

	<script src="../../../../../js/modernizr-2.5.3.min.js"></script>
	<script src="../../../../../js/metrics.js"></script> 
</head>
<body>
  <div id="wrapper">
    <!--[if lt IE 7]>
    	<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div class="header-container">
      <header class="header">
      	<div class="top-bar" style="height: 75px;">
		
      		<div class="search-wrapper wrapper container_16">
			
      			<a href="#" class="sales-rep show-320 show-480 hide-768"><span aria-hidden="true" class="icon-icon-sales-rep"></span></a>
      			<nav class="sub-nav" >
				<a href="../../../../../index.html" class="logo"  ><img src="../../../../../images/HP_Helion_logo_72.png" style="position: absolute;top: 10px;" alt="HP Helion" /></a>
        			<ul>
					
 

         
        				<li><a href="../../../../../../external.html?link=http://www8.hp.com/us/en/cloud/helion-portfolio.html">Helion@HP</a></li>
						<li><a href="../../../../../../external.html?link=https://h30580.www3.hp.com/">Support</a></li>
        				<li><a href="mailto:heliondocs@hp.com">Contact</a></li>
						
        				 
        			</ul>
      			</nav>
          </div>
      	</div>
		<!-- per JC
      	<div class="nav-wrapper wrapper container_16">
        	<a href="http://www.hpcloud.com/" class="logo"><img src="/images/HP_Helion_logo_72.png" alt="HP Helion" /></a>
      		<nav class="nav hide-320 show-768">
      			<ul>
      				<li><a href="http://hpcloud.com/products-services">Products <span>& Services</span></a></li>
      				<li><a href="http://hpcloud.com/solutions">Cloud <span>Solutions</span></a></li>
      				<li><a href="http://hpcloud.com/why-hp-cloud">Why HP <span>Cloud?</span></a></li>
      				<li><a href="http://hpcloud.com/learning-center">Learning <span>Center</span></a></li>
      				<li><a href="http://hpcloud.com/blog">The <span>Blog</span></a></li>
      				<li><a href="http://hpcloud.com/free-trial">Sign Up <span>Today</span></a></li>
      			</ul>
      		</nav>
      	</div>
		-->
      </header>
    </div>
		<div id="main-container">
			<div id="main" class="wrapper clearfix container_16">
				<div id="content" class="grid_10 suffix_1">
	<article>
		<!--PUBLISHED -->

<script>
<![CDATA[

function PageRefresh {
onLoad="window.refresh"
}

PageRefresh();

]]>
</script><!--
<p style="font-size: small;"> <a href="/helion/openstack/">&#9664; PREV | <a href="/helion/openstack/">&#9650; UP</a> | <a href="/helion/openstack/faq/">NEXT &#9654; </a></p>
--><h1 id="hp-helion-openstack-10-updating-the-seed-vm">HP Helion OpenStack® 1.0 Updating the Seed VM</h1>

<p>The seed update instructions are different from the instructions for the undercloud and overcloud updates.  Not all updates will include seed updates, please check the <a href="../../../release-notes/101/index.html">HP Helion OpenStack Release Notes</a> to determine if there is a seed update.</p>

<p>For HP Helion OpenStack 1.01, you do not need to update the seed. However, you should perform the following steps to back up the seed VM and  download and extract the HP Helion OpenStack patch update.</p>

<!-- Not needed for 1.01
Updating the seed node involves saving current environment and configuration settings and restoring them after the update.
-->

<ul><li><a href="#backup">Backup the seed cloud host</a></li>
<li><a href="#backupsettings">Backup the original seed settings</a></li>
<li><a href="#extract">Extract the required scripts and libraries</a></li>
<li><a href="#updateseed">Update the seed</a></li>
<li><a href="#extractpatch">Download and extract the patch update</a>
<!-- Not needed for 1.01
* [Restore the original seed settings](#restoreseed)
* [Verify the update](#verify)
--></li>
</ul><h2 id="backup">Back up the seed cloud host</h2>

<p>Back up the seed node to restore in case of catastrophic failures.  For information, see <a href="../../../backup.restore/index.html">Back Up and Restore</a>.</p>

<h2 id="backupsettings">Back up the original seed settings</h2>

<p>Before you proceed with seed node update, you should extract the updated scripts that is delivered as part of the patch.</p>

<h3 id="extract">Extract the required scripts and libraries</h3>

<p>As mentioned in the <a href="../../overview/101/index.html">Update Overview</a>, a HP Helion OpenStack patch update is composed of multiple major components.</p>

<p>The Overcloud node images can be one of the components. If you have <a href="../../download/101/index.html">downloaded the patch update using Sherpa</a>, at this stage the overcloud node images are located in the undercloud image repository.</p>

<p>The other files come as TAR files and are delivered to the undercloud local filesystem, by default, the <code>/tmp/heat_templates</code> folder.  It is possible to change the location of the undercloud patch update tarballs, during or after deployment. See <a href="#default">Change the default</a> below.</p>

<p>To extract the files:</p>

<!---
1. Use SSH to access the seed cloud host:

        ssh root@<seed_cloud_host_IP>
        sudo -i
-->

<ol><li><p>Copy the TAR file to the seed cloud host and extract contents. From an SSH session to the seed cloud host do the following:</p>

<pre><code>ssh root@&lt;seed_cloud_host_IP&gt;
scp heat-admin@&lt;Insert undercloudIP&gt;:/tmp/heat_templates/* /tmp

tar xvf tripleo-ansible&lt;version&gt;.tar 
mv /opt/stack/tripleo-ansible /opt/stack/tripleo-ansible-orig
mv /tmp/tripleo-ansible /opt/stack/
</code></pre>

<p>Where:</p>

<ul><li><insert undercloudip=""> is the IP of the undercloud node</insert></li>
<li>/tmp/heat_templates/ is the default location of the TAR files; enter the appropriate location, if you have <a href="#default">changed the location</a>.</li>
</ul><p>The files extracted in the seed tmp node.  If desired, you can delete the files in the <code>/tmp/heat_templates</code> directory.</p></li>
<li><p>Copy the TAR file to the KVM Host and extract contents. From an SSH session to the seed cloud host do the following:</p>

<pre><code>ssh root@&lt;seed_cloud_host_IP&gt;
ssh heat-admin@&lt;Insert undercloudIP&gt;
sudo -i
scp /tmp/heat_templates/seed_update_1.0.0-1.01.tar &lt;username&gt;@&lt;KVMHOST_IP&gt;:/tmp/
</code></pre></li>
<li><p>Login to KVM Host and execute the following command:</p>

<pre><code>cd /tmp/
tar xvf seed_update_1.0.0-1.01.tar
</code></pre></li>
</ol><h5 id="default">Change the default</h5>

<p>It is possible to change the location of the undercloud patch update TAR files, during or after deployment. The default location is the <code>/tmp/heat_templates</code> folder.</p>

<p>If you have done so you can recall where you have changed the directory to by viewing the Sherpa configuration file.</p>

<p>The Sherpa configuration file for the undercloud can be found at <code>/etc/sherpa/sherpa.conf</code>.</p>

<p>The directory where the files where stored can be found by looking in the <code>RepositoryMgr</code> portion of <code>/etc/sherpa/sherpa.conf</code>. Search for the directory attribute as seen below:</p>

<pre>
  <code>'file': {
'classname': 'sherpa.handlers.repository.file.FileSystemHandler',
'destinations': [
{
'directory': '/tmp/heat_templates',
</code>
</pre>

<p>When locating the update files, use the directory set in <code>/etc/sherpa/sherpa.conf</code>.</p>

<h3 id="update-the-seed-updateseed">Update the seed (#updateseed)</h3>

<ul><li><p>Execute the <code>seed_update.sh</code> script to backup and copy the seed settings to host system:</p>

<pre><code>./seed_update.sh --backup-seed &lt;IP Address of Seed&gt; &lt;Backup Destination Folder&gt;
</code></pre></li>
</ul><h2 id="extractpatch">Download and extract the patch update</h2>

<p>For HP Helion OpenStack 1.01, you do not need to update the seed.</p>

<ol><li><a href="../../download/101/index.html">Download and extract the HP Helion OpenStack patch update</a>, if you have not done so already.  </li>
</ol><p><!-- Not needed for 1.01
2. Update the seed node as described in the [installation instructions](/helion/openstack/install/overview/) providing details for pre-requisites as used during  the initial installation.

## Restore original seed settings ## {#restoreseed}

Once the seed installation is complete, SSH into the seed node to confirm it is accessible.  

On the host node where the scripts were extracted, execute the script to restore seed settings on the updated seed.

    ./seed_update.sh --restore-seed <Ip Address of Seed> <Backup Source Folder>


## Verify the update ## {#verify}

Perform these basic tests to verify that the environment settings have been restored on seed node.  Connect to seed node using SSH.

1.  Verify local services

        . stackrc - Source the credentials for verification 
        nova list - Should list the servers
        glance image-list - Should list the images in glance
        heat stack-list - Should list the undercloud stack
        neutron net-list - Should list the ctlplanes

2.  Verify connectivity

        ssh heat-admin@<undercloud-IP>  -  Should be able to successful connect to undercloud
-->
<strong>Note:</strong> If the above verification steps fail, rerun the instructions to restore original seed settings. If the node is unrecoverable, <a href="../../../backup.restore/index.html">restore the old image</a>.</p>

<h2 id="next-steps">Next Steps</h2>

<p>Update the undercloud. For installation instructions, see <a href="../../undercloud/101/index.html">Updating the Undercloud</a>.</p>

<p>
  <a href="#top" style="padding:14px 0px 14px 0px; text-decoration: none;"> Return to Top ↑ </a>
</p>

<hr />
	</article>
</div>

<div id="sidebar" class="grid_5 top-spacer">
	<aside class="signup-box">
		<p class="align-center">
			Start using HP Cloud<br>
			<a href="../../../../../../external.html?link=https://helion.hpwsportal.com/#/Home/Show" class="signup-button-orange gutter-top-half">Sign Up Now</a>
		</p>
	</aside>
	<aside class="box section-navigation">
  
     
  
  <ul>
    
      
      
      <li>
        <a class="" href="../../../../../index.html"><span>HP Helion Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../index.html"><span>HP Helion OpenStack Documentation Home</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../release-notes/101/index.html"><span>Release Notes</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../faq/index.html"><span>FAQ</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../technical-overview/index.html"><span>Technical Overview</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../services/overview/index.html"><span>Services Overview</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../support-matrix/index.html"><span>Support Matrix</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../install/overview/index.html"><span>Installation Overview</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../install/security/index.html"><span>Network Security</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../backup.restore/index.html"><span>Back Up and Restore</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../services/troubleshooting/index.html"><span>Troubleshooting</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../related-links/index.html"><span>Related Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../glossary/index.html"><span>Glossary</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../eula/index.html"><span>End User License Agreement</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../3rd-party-license-agreements/index.html"><span>Open Source and Third-Party Software License Agreements</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../siteindex/index.html"><span>Site Index</span></a>
      </li>
    
  </ul>
</aside>
</div>

			</div> <!-- #main -->
		</div> <!-- #main-container -->
	</div> <!-- #wrapper -->

		
  <footer class="footer">
    <div class="container_16">
    	<div class="wrapper grid_16">
    		<ul class="footer-social">
    			<li class="twitter"><a href="../../../../../../external.html?link=https://twitter.com/hphelioncloud"></a></li>
    			<li class="youtube"><a href="../../../../../../external.html?link=http://www.youtube.com/hpcloud"></a></li>
    			<li class="rss"><a href="../../../../../../external.html?link=http://h30499.www3.hp.com/hpeb/rss/board?board.id=sws-661"></a></li>
    			<li class="facebook"><a href="../../../../../../external.html?link=https://www.facebook.com/HPCloud"></a></li>
    			<li class="linkedin stretch"><a href="../../../../../../external.html?link=https://www.linkedin.com/company/hewlett-packard"></a></li>
    		</ul>
    		<ul class="contact-info">
    			<li>In the U.S.<br />1-855-61CLOUD</li>
    			<li>Worldwide<br />+1678-745-9010</li>
    			<li class="col-3">Online Support<br /><a href="mailto:support@hpcloud.com">Email</a> 
				<!-- comment out per JC
				or <span class="link" onclick="jQuery('#hpcloud-chat-button a').click();">Chat with us</span>
				-->
				</li>
    		</ul>
    		<div class="copyright">
    			<p>The OpenStack&reg; Word Mark and OpenStack Logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.</p><br />
    			<p>&copy; 2014 Hewlett-Packard Development Company, L.P.<br /><a href="../../../../../../external.html?link=http://www.hpcloud.com/legal-documents">HP Cloud legal documents and privacy policy</a></p>
    		</div>
    	</div>
    </div>
  </footer>

	<script src="../../../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="../../../../../../ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../../../../js/jquery-1.8.2f.min.html"><\/script>')</script>

  <script src="../../../../../js/combined.js"></script>
  <script>
      __HP_CHAT_CONF = {};
      __HP_CHAT_CONF.sales = true;
      __HP_CHAT_CONF.support = true;
    </script>
	
    <script> //removed per JC
    //(function($, window) {
    //    $(window).load(function() {
    //    var sNew = document.createElement("script");
    //  sNew.async = true;
    //sNew.src = 'https://a248.e.akamai.net/cdn.hpcloudsvc.com/gcbb18d905d32174e6eb205943b0dea4a/prodae1/chat.js';
    //var s0 = document.getElementsByTagName('script')[0];
    //s0.parentNode.insertBefore(sNew, s0);
    //});
    //})(jQuery, this);
    </script>
    <script>
        //Executes your code when the DOM is ready.  Acts the same as $(document).ready().
        function styleRestCmds() {
            $("h5:contains('GET')").addClass('rest_cmd cmd_get');
            $("h5:contains('POST')").addClass('rest_cmd cmd_post');
            $("h5:contains('FormPOST')").removeClass('rest_cmd cmd_post');
            $("h5:contains('PUT')").addClass('rest_cmd cmd_put');
            $("h5:contains('COPY')").addClass('rest_cmd cmd_copy');
            $("h5:contains('PATCH')").addClass('rest_cmd cmd_patch');
            $("h5:contains('HEAD')").addClass('rest_cmd cmd_head');
            $("h5:contains('DELETE')").addClass('rest_cmd cmd_delete');
        }

        $(function() {
            //Calls the tocify method on your HTML div.
            $("#toc").tocify({
                'selectors': 'h2,h3,h4',
                'showAndHideOnScroll': false,
                'hideEffect': 'slideUp',
                'scrollTo': 55    // Amount of space between top of page and selected content
              }
            );
            // Style the REST commands
            styleRestCmds();
        });
    </script>
</body>

<!-- Mirrored from docs.hpcloud.com/helion/openstack/update/seed/101/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 14:58:34 GMT -->
</html>
