<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<!-- Mirrored from docs.hpcloud.com/als/v1/user/deploy/manifestyml by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 14:59:35 GMT -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Manifest.yml Options</title>
	
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="shortcut icon" href="../../../../favicon.ico" type="image/vnd.microsoft.icon" />
  <link rel="stylesheet" href="../../../../css/combined.css">

	<script src="../../../../js/modernizr-2.5.3.min.js"></script>
	<script src="../../../../js/metrics.js"></script> 
</head>
<body>
  <div id="wrapper">
    <!--[if lt IE 7]>
    	<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div class="header-container">
      <header class="header">
      	<div class="top-bar" style="height: 75px;">
		
      		<div class="search-wrapper wrapper container_16">
			
      			<a href="#" class="sales-rep show-320 show-480 hide-768"><span aria-hidden="true" class="icon-icon-sales-rep"></span></a>
      			<nav class="sub-nav" >
				<a href="../../../../index.html" class="logo"  ><img src="../../../../images/HP_Helion_logo_72.png" style="position: absolute;top: 10px;" alt="HP Helion" /></a>
        			<ul>
					
 

         
        				<li><a href="../../../../../external.html?link=http://www8.hp.com/us/en/cloud/helion-portfolio.html">Helion@HP</a></li>
						<li><a href="../../../../../external.html?link=https://h30580.www3.hp.com/">Support</a></li>
        				<li><a href="mailto:heliondocs@hp.com">Contact</a></li>
						
        				 
        			</ul>
      			</nav>
          </div>
      	</div>
		<!-- per JC
      	<div class="nav-wrapper wrapper container_16">
        	<a href="http://www.hpcloud.com/" class="logo"><img src="/images/HP_Helion_logo_72.png" alt="HP Helion" /></a>
      		<nav class="nav hide-320 show-768">
      			<ul>
      				<li><a href="http://hpcloud.com/products-services">Products <span>& Services</span></a></li>
      				<li><a href="http://hpcloud.com/solutions">Cloud <span>Solutions</span></a></li>
      				<li><a href="http://hpcloud.com/why-hp-cloud">Why HP <span>Cloud?</span></a></li>
      				<li><a href="http://hpcloud.com/learning-center">Learning <span>Center</span></a></li>
      				<li><a href="http://hpcloud.com/blog">The <span>Blog</span></a></li>
      				<li><a href="http://hpcloud.com/free-trial">Sign Up <span>Today</span></a></li>
      			</ul>
      		</nav>
      	</div>
		-->
      </header>
    </div>
		<div id="main-container">
			<div id="main" class="wrapper clearfix container_16">
				<div id="content" class="grid_10 suffix_1">
	<article>
		<!--PUBLISHED-->

<h1 id="manifest-yml-options">HP Helion 1.0 Development Platform: Manifest.yml Options</h1>

<p>Using a <em>manifest.yml</em> file is the standard configuration file format for all
Cloud Foundry systems, allowing for portability from those systems to
Application Lifecycle Service without configuration changes.</p>

<p>The client uses the keys to determine values
that are otherwise passed by the user as arguments or as answers to
prompts.</p>

<p>
  <a href="#name">name:</a>
</p>

<ul><li><p><a href="#applications">applications</a></p>

<ul><li><a href="#depends-on">depends-on</a></li>
<li><a href="#helion">helion</a></li>
</ul></li>
<li><p><a href="#buildpack">buildpack:</a></p>

<ul><li><a href="#framework">framework:</a>

<ul><li><a href="#type">type:</a></li>
<li><a href="#runtime">runtime:</a></li>
<li><a href="#document-root">document-root:</a></li>
<li><a href="#start-file">start-file:</a></li>
</ul></li>
<li><a href="#app-dir">app-dir</a></li>
<li><a href="#services">services:</a></li>
<li><a href="#requirements">requirements:</a>

<ul><li><a href="#os-packages">OS Packages</a></li>
<li><a href="#language-modules">Language Modules</a></li>
</ul></li>
<li><a href="#mem">mem:</a></li>
<li><a href="#disk">disk:</a></li>
<li><a href="#instances">instances:</a></li>
<li><a href="#url-or-urls">url (or urls):</a></li>
<li><a href="#env">env:</a>

<ul><li><a href="#env-attributes">env Attributes</a></li>
</ul></li>
<li><a href="#processes">processes:</a>

<ul><li><a href="#web">web:</a></li>
</ul></li>
<li><a href="#command">command:</a></li>
<li><a href="#cron">cron:</a></li>
<li><a href="#ignores">ignores:</a></li>
<li><a href="#inherit">inherit:</a></li>
<li><a href="#hooks">hooks:</a>

<ul><li><a href="#pre-push">pre-push:</a></li>
<li><a href="#pre-staging">pre-staging:</a></li>
<li><a href="#post-staging">post-staging:</a></li>
<li><a href="#pre-running">pre-running:</a></li>
</ul></li>
<li><a href="#drain">drain:</a></li>
<li><a href="#min-version">min_version:</a>

<ul><li><a href="#client">client:</a></li>
<li><a href="#server">server:</a></li>
</ul></li>
<li><a href="#key-substitution">Key Substitution</a></li>
</ul></li>
</ul><h2 id="applications">applications:</h2>

<p>This key contains a list of options corresponding to individual apps to
be pushed. Each sub-key should match the name of folders where the files
for each app are contained. For example:</p>

<pre>
  <code>applications:
  web:
    name: springweb
    framework:
      name: spring
    instances: 1
    mem: 512
  worker:
    name: springweb-helper
    framework:
      name: node
    instances: 1
    mem: 64
</code>
</pre>

<p>Here the two keys <code>web:</code> and <code>worker:</code> match subdirectories (named <code>web</code> and
<code>worker</code>) of the directory containing the
<em>manifest.yml</em> file.</p>

<p>The shortcut "." can be used if the application code is in the top level
directory along with the <em>manifest.yml</em> file:</p>

<pre>
  <code>applications:
  .:
    name: singleapp
    framework:
      name: spring
    instances: 1
    mem: 512
</code>
</pre>

<h3 id="depends-on">depends-on:</h3>

<p>When deploying multiple applications from a single <em>manifest.yml</em> use
the <code>depends-on:</code> key to set the order in which the
apps are started and stopped. An app with the <code>depends-on:</code> option will be pushed only after the listed apps have been
pushed and are running on the server.</p>

<p>In the previous example, if you wanted to ensure that <code>web</code> was started before <code>worker</code>, you would add
<code>depends-on: worker</code> in the <code>web:</code> section:</p>

<pre>
  <code>applications:
  web:
    depends-on: worker
    name: springweb
    framework:
      name: spring
    instances: 1
    mem: 512
  worker:
    name: springweb-helper
    framework:
      name: node
    instances: 1
    mem: 64
</code>
</pre>

<p>If an app is stopped or restarted, the process happens in the reverse
order.</p>

<h3 id="helion">helion:</h3>

<p>The following Application Lifecycle Service-specific options need to be placed in a
<code>helion:</code> block within the application block.</p>

<ul><li>processes:</li>
<li>min_version:</li>
<li>env:</li>
<li>ignores:</li>
<li>hooks:</li>
<li>cron:</li>
<li>requirements</li>
</ul><p>For example:</p>

<pre>
  <code>applications:
  .:
    name: celery-demo
    framework:
      name: python
      runtime: python27
    mem: 128
    helion:
      env:
        CELERY_ENV:
          default: crisper
      processes:
        web: celeryd
      requirements:
        pypm: [celery]
      hooks:
        pre-running:
          - sudo cp $HOME/fstab /etc/fstab
          - sudo mount /dev/shm
      min_version:
        server: 0.9.0.143
        client: 1.0
</code>
</pre>

<p>Configuration options for Application Lifecycle Service applications can be stored in a
<em>manifest.yml</em> file in the top-level application directory.</p>

<p>The <em>manifest.yml</em> file defines <strong>keys</strong> and associated <strong>values</strong> which
the <code>helion</code> client uses to set options that are
otherwise passed by the user as command arguments or answers to prompts.
Other values are used by the server to install needed packages, or run
setup scripts during the staging, post-staging, or pre-running steps in
deployment.</p>

<p><a href="#key-substitution"><em>Key substitution</em></a> can be used to
insert values from one key into another.</p>

<p>The following sections describe the available keys and the values that
can be assigned to them:</p>

<h2 id="name">name:</h2>

<p>This is the name of the application being pushed. If not specified, the
user will be prompted during <code>helion push</code> to
provide a name. The name can also be specified on the command line (eg.
<code>helion push currency-converter</code>).</p>

<p>Example:</p>

<pre>
  <code>name: currency-converter
</code>
</pre>

<p>
  <strong>Note</strong>
</p>

<p>The application name must be a valid <a href="../../../../../external.html?link=http://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_host_names">hostname
label</a>
(i.e. containing only alphanumeric characters and hyphens).</p>

<h2 id="buildpack">buildpack:<a href="#buildpack" title="Permalink to this headline"></a></h2>

<p>The Git repository URL for the specific
<a href="buildpack/index.html#buildpacks"><em>buildpack</em></a> used to deploy the application.
For example:</p>

<pre>
  <code>name: java-app
mem: 512M
buildpack: https://github.com/heroku/heroku-buildpack-java.git
</code>
</pre>

<p>If unset, Application Lifecycle Service will check to see if the application triggers the
<code>detect</code> scripts in any of its <a href="buildpack/index.html#buildpacks-built-in"><em>built-in
buildpacks</em></a>.</p>

<h2 id="framework">framework:<a href="#framework" title="Permalink to this headline"></a></h2>

<p>Allows the app to specify a framework and runtime to be used. Specifying
a value for the <code>framework</code> key triggers the use of
the <a href="buildpack/index.html#buildpacks-legacy"><em>Legacy Buildpack</em></a>.</p>

<p>
  <strong>Note</strong>
</p>

<p>The keys in the <code>framework</code> section are used with
the <a href="buildpack/index.html#buildpacks-legacy"><em>Legacy Buildpack</em></a> only.
Applications using language or framework-specific buildpacks do not
require these values, and should instead specify the
<a href="#yml-buildpack"><em>buildpack</em></a> or rely on the detection scripts
of the <a href="buildpack/index.html#buildpacks-built-in"><em>built-in buildpacks</em></a>.</p>

<h3 id="type">type:<a href="#type" title="Permalink to this headline"></a></h3>

<p>The framework to use. Check <code>helion frameworks</code>
for a complete list of available frameworks. If not specified, user may
be prompted during <code>helion push</code>. Can also be
input with the command line option --framework, -f (eg.
<code>helion push --framework python</code>).</p>

<h3 id="runtime">runtime:<a href="#runtime" title="Permalink to this headline"></a></h3>

<p>The runtime to use. Check <code>helion runtimes</code> for a
complete list of available runtimes. If not specified, server will
select the best option based on available data. Can also be input with
the command line option --runtime, -f (eg.
<code>helion push --runtime python32</code>).</p>

<p>Example:</p>

<pre>
  <code>framework:
  type: python
  runtime: python32
</code>
</pre>

<h3 id="document-root">document-root:<a href="#document-root" title="Permalink to this headline"></a></h3>

<p>Overrides the default document-root setting (\$HOME) for the web server.</p>

<p>
  <strong>Note</strong>
</p>

<p>Node.js, Perl, PHP, and Python frameworks only.</p>

<p>Setting a deeper document root directory avoids the problem of exposing
supporting files (e.g. <em>manifest.yml</em>) over HTTP.</p>

<p>Example:</p>

<pre>
  <code>framework:
  type: php
  document-root: web
</code>
</pre>

<p>The document-root must always be specified relative to \$HOME
(/home/helion/app).</p>

<h3 id="start-file">start-file:<a href="#start-file" title="Permalink to this headline"></a></h3>

<p>Set the main application filename.</p>

<p>
  <strong>Note</strong>
</p>

<p>Perl and Python frameworks only.</p>

<p>If your application does not use a conventional filename (e.g. app.psgi
for Perl, wsgi.py for Python) using this option, possibly in conjunction
with <strong>document-root</strong>, avoids the need to refactor the application for
Application Lifecycle Service. For example:</p>

<pre>
  <code>framework:
  start-file: temp.psgi
</code>
</pre>

<p>Or:</p>

<pre>
  <code>framework:
  start-file: temp.py
</code>
</pre>

<p>This value will be used by the
<a href="../reference/environment/index.html#term-processes-web"><em>PROCESSES_WEB</em></a> and
HELION_START_FILE environment variables. Any changes to
HELION_START_FILE at runtime will not change the value of
<a href="../reference/environment/index.html#term-processes-web"><em>PROCESSES_WEB</em></a> as
the macro is expanded before the pre-running hooks are run.</p>

<h2 id="app-dir">app-dir<a href="#app-dir" title="Permalink to this headline"></a></h2>

<p>The directory containing the application code to be pushed to Application Lifecycle Service
(if it's not in the top-level directory). This directory becomes the
\$HOME directory of the application when the application is pushed to
Application Lifecycle Service. For example, Java applications will often have a 'target'
sub-directory containing the output of ant or mvn builds:</p>

<pre>
  <code>name: sample
framework:
  type: java_web
  runtime: java7
app-dir: target
</code>
</pre>

<p>If required, you can also set
<a href="#yml-document-root"><em>document-root</em></a> in the
<a href="#yml-framework"><em>framework</em></a> section to specify a
sub-directory of the application \$HOME to be used as the document root.</p>

<p>To launch multiple applications from multiple sub-directories use a
<a href="manifestyml/index.html#manifest-yml"><em>manifest.yml</em></a> file.</p>

<h3 id="services">services:</h3>

<p>A list of services to create and bind to the application. Each sub key
is the name of the service to create / bind, and the associated value is
the type of the new service. If multiple services of the same type are
needed, list them on separate lines as in the example below.</p>

<p>Use <code>helion services</code> for a complete list of
available services. If not specified, the user may be prompted during
<code>helion push</code>.</p>

<p>Example:</p>

<pre>
  <code>services:
  customerdb: mysql
  paymentsdb: mysql
</code>
</pre>

<p>The Application Lifecycle Service client supports <a href="#yml-key-substitution"><em>key
substitution</em></a> for service names,
allowing you to create service names based on the specified application
name. For example:</p>

<pre>
  <code>services:
  ${name}-db: mysql
</code>
</pre>

<p>The application name can be set as an option to the <a href="../reference/client-ref/index.html#command-push"><em>helion
push</em></a> command, overriding
the <strong>name</strong> value defined in <em>manifest.yml</em>. Use this technique when
pushing multiple versions of the same application (using different
names) if you want them to use separate databases. For example:</p>

<pre>
  <code>name: sample

framework:
  type: node

services:
  ${name}-db: mysql
</code>
</pre>

<p>Using the name specified in <em>manifest.yml</em>, a data service is created to
match that name:</p>

<pre>
  <code>$ helion push -n
Pushing application 'sample'...
Framework:       node
Runtime:         &lt;framework-specific default&gt;
Application Url: sample.helion-pjw3.local
Creating Application [sample]: OK
Binding service [sample-db]: OK
...
Starting Application [sample]: ...OK
</code>
</pre>

<p>If you specify a new name for the application as an argument to
<code>helion push</code>, a new service with a matching name
is created rather than binding to the existing 'sample-db' service:</p>

<pre>
  <code>$ helion push sample-2 -n
Pushing application 'sample-2'...
Framework:       node
Runtime:         &lt;framework-specific default&gt;
Application Url: sample-2.helion-pjw3.local
Creating Application [sample-2]: OK
Binding service [sample-2-db]: OK
...
Starting Application [sample-2]: ..OK

$ helion apps

+-------------+---+---------+------------------------------+-------------+
| Application | # | Health  | URLS                         | Services    |
+-------------+---+---------+------------------------------+-------------+
| sample      | 1 | RUNNING | sample.helion-pjw3.local   | sample-db   |
| sample-2    | 1 | RUNNING | sample-2.helion-pjw3.local | sample-2-db |
+-------------+---+---------+------------------------------+-------------+
</code>
</pre>

<h2 id="requirements">requirements:<a href="#requirements" title="Permalink to this headline"></a></h2>

<p>Specifies required modules, and allows the installation of additional OS
packages.</p>

<h3 id="os-packages">OS Packages<a href="#os-packages" title="Permalink to this headline"></a></h3>

<p>OS packages can be added in an <code>ubuntu:</code> block
within a <code>staging:</code> and/or <code>running:</code> block. Plain strings are treated as package names:</p>

<pre>
  <code>requirements:
  staging:
    ubuntu:
      - libfoo-dev
  running:
    ubuntu:
      - libfoo
      - some-app
</code>
</pre>

<p>To add the OS requirements to both the staging and running phases add
the <code>ubuntu:</code> block directly beneath the
<code>requirements:</code> key:</p>

<pre>
  <code>requirements:
  ubuntu:
    - libfoo-dev
</code>
</pre>

<p>If your account has been given sudo privileges in application
containers, you can use arrays to add additional repositories,
overriding repository restrictions set by admins.</p>

<p>Example:</p>

<pre>
  <code>requirements:
  staging:
    ubuntu:
      - ["ppa:gophers/go"]
      - golang-stable
  running:
    ubuntu:
      - libfoo
</code>
</pre>

<h3 id="language-modules">Language Modules<a href="#language-modules" title="Permalink to this headline"></a></h3>

<p>For the installation of language modules, replace the
<em>requirements.txt</em> file. For Python, <code>pypm:</code> and <code>pip:</code> can be specified:</p>

<pre>
  <code>requirements:
  pypm:
    - tornado
    - pymongo
  pip:
    - pycurl
</code>
</pre>

<p>For Perl, <code>ppm:</code> or <code>cpan:</code> can be specified:</p>

<pre>
  <code>requirements:
  ppm:
    - CGI::Application::PSGI
    - Plack::Builder

requirements:
  cpan:
    - CGI::Application::PSGI
    - Plack::Builder
</code>
</pre>

<h2 id="mem">mem:<a href="#mem" title="Permalink to this headline"></a></h2>

<p>The amount of memory to allocate for the application.</p>

<p>Syntax: \&lt;int&gt; or \&lt;int&gt;M - Memory in megabytes. eg. 256M</p>

<p>Syntax: \&lt;int&gt;G or \&lt;float&gt;G - Memory in gigabytes. eg. 1.5G or 2G</p>

<p>If not specified, user may be prompted during <code>helion push</code>. Can also be specified on the command line (eg.
<code>helion push --mem 256M</code>).</p>

<p>Example:</p>

<pre>
  <code>mem: 64M
</code>
</pre>

<h2 id="disk">disk:<a href="#disk" title="Permalink to this headline"></a></h2>

<p>The amount of disk space to allocate for the application (minimum
512MB).</p>

<p>Syntax: \&lt;int&gt; or \&lt;int&gt;M - Disk in megabytes. eg. 768M</p>

<p>Syntax: \&lt;int&gt;G or \&lt;float&gt;G - Disk in gigabytes. eg. 1.5G or 2G</p>

<p>If not specified, 2GB of disk space is allocated. Can also be specified
on the command line (eg. <code>helion push --disk 768M</code>).</p>

<p>Example:</p>

<pre>
  <code>mem: 3.5GB
</code>
</pre>

<h2 id="instances">instances:<a href="#instances" title="Permalink to this headline"></a></h2>

<p>The number of instances to allocate for the application. If not
specified, defaults to 1. Can be specified on the command line (eg.
<code>helion push --instances 2</code>).</p>

<p>Example:</p>

<pre>
  <code>instances: 2
</code>
</pre>

<h2 id="url-or-urls">url (or urls):<a href="#url-or-urls" title="Permalink to this headline"></a></h2>

<p>List of URLs mapped to the application. For example:</p>

<pre>
  <code>name: cms-platform

url:
  - blog.example.org
  - exampleblog.com
</code>
</pre>

<p>With this key specified, Application Lifecycle Service will not assign a default
"appname.paasname.com" URL to the application. If you would like this
URL assigned as well, add <code>${name}.${target-base}</code>
to the list of URLs.</p>

<p>See <a href="index-2.html#deploy-map-url"><em>Mapping App URLs</em></a> for more
information.</p>

<h2 id="env">env:<a href="#env" title="Permalink to this headline"></a></h2>

<p>A map of environment variables to initialize for the application. Each
subkey is the name of the variable, with an associated value.</p>

<p>Example:</p>

<pre>
  <code>env:
  HOME_IP_ADDRESS: 127.0.0.1
</code>
</pre>

<p>Avoid using this for values which should not be stored in plain text,
such as API keys and passwords.</p>

<h3 id="env-attributes">env Attributes<a href="#env-attributes" title="Permalink to this headline"></a></h3>

<p>Each environment variable can have attributes which modify the
interactive behavior of the <a href="../reference/client-ref/index.html#command-ref-client"><em>helion
client</em></a> when using the
<a href="../reference/client-ref/index.html#command-push"><em>push</em></a> command. These
attributes are set with the following keys:</p>

<ul><li><strong>default</strong> (string): The value to use if nothing is entered by the
user interactively (no default).</li>
<li><strong>required</strong> (<a href="../../../../../external.html?link=http://yaml.org/type/bool">boolean</a>): If set,
the variable must have a value (defaults to "false" == "not
required").</li>
<li><strong>inherit</strong> (boolean): If set, the client looks in the local
environment for a variable of the same name and takes its value
(defaults to "false" == "no inheritance").</li>
<li><strong>prompt</strong> (string): The prompt to show when the client asks for the
variable value (Defaults to "Enter \&lt;varname&gt;:").</li>
<li><strong>choices</strong> (list of strings): If specified, a list of legal values
for the variable, to be presented to the user as a menu rather than
prompting for a string (no default).</li>
</ul><p>For example:</p>

<pre>
  <code>env:
  MY_SPECIAL_VAR:
    default: "development"
    required: y
    inherit: y
    prompt: "What type of deployment?: "
    choices:
      - "development"
      - "testing"
      - "staging"
      - "production"
</code>
</pre>

<p>Pushing with the <code>--no-prompt</code> option will fail with
the error message "Required variable <em>VAR_NAME</em> not set" if "required"
is set but no value is given (via "default", "inherit" or the
<code>--env</code> option).</p>

<p>
  <strong>Note</strong>
</p>

<p>These attributes are only recognized by the <a href="../reference/client-ref/index.html#command-ref-client"><em>Helion
client</em></a>.</p>

<h2 id="processes">processes:</h2>

<h3 id="web">web:</h3>

<p>
  <strong>Note</strong>
</p>

<p>Used with the <a href="buildpack/index.html#buildpacks-legacy"><em>Legacy buildpack</em></a>
only. When using other buildpacks, create a
<a href="../../../../../external.html?link=https://devcenter.heroku.com/articles/procfile">Procfile</a> in the
application's root directory.</p>

<p>Specify a custom command to launch your web application or to pass
custom arguments to uWSGI. For example:</p>

<pre>
  <code>processes:
  web: python3.2 app.py
</code>
</pre>

<p>This key is required when using the
<a href="other-frameworks/index.html#generic-framework"><em>generic</em></a> framework, but is
optionally available for all other frameworks.</p>

<p><strong>If defined</strong>, this process is expected to launch a HTTP server bound
to <code>0.0.0.0</code> host and <code>$PORT</code>
port.</p>

<p><strong>If set to Null ("\~")</strong>, the application is treated as a worker
application and not provisioned with a URL. For example, an application
that just runs a background Perl script might look like this:</p>

<pre>
  <code>name: perlwork
framework:
  type: perl
command: perl worker.pl
processes:
  web: ~
</code>
</pre>

<p>A 'command:' value must be present for worker applications.</p>

<p>If the application exists solely to run commands via
<a href="#yml-cron"><em>cron</em></a>, a dummy command such as '<em>sleep 365d</em>'
should be specified.</p>

<p>The <code>$PROCESSES_WEB</code> and <code>$HELION_UWSGI</code> variables can also be used with <code>processes: web:</code>.</p>

<p><code>$PROCESSES_WEB</code> contains the command that is used
to start the web application, if you want to override the default
command.</p>

<p><code>$HELION_UWSGI</code> is defined for runtimes using
uWSGI (Perl and Python), and it contains the command to start uWSGI with
all relevant options. It can be used if you are appending additional
uWSGI options to the command.</p>

<h2 id="command">command:<a href="#command" title="Permalink to this headline"></a></h2>

<p>Used for worker applications to start a background process. Below is an
example using the
<a href="other-frameworks/index.html#standalone-framework"><em>standalone</em></a> framework:</p>

<pre>
  <code>name: helion-worker
instances: 1
framework:
  type: standalone
  runtime: ruby18
command: ruby worker.rb
</code>
</pre>

<h2 id="cron">cron:<a href="#cron" title="Permalink to this headline"></a></h2>

<p>Commands listed here are added to the crontab file. See the section on
<a href="index-2.html#deploy-crontab"><em>Crontab Support</em></a> for details.</p>

<p>Example:</p>

<pre>
  <code>cron:
  - PLUGH=xyzzy
  - "*/1 * * * * env &gt; $HOME/env"
</code>
</pre>

<h2 id="ignores">ignores:<a href="#ignores" title="Permalink to this headline"></a></h2>

<p>A list of .gitignore-style patterns. Files and directories in the
application directory matching at least one pattern are ignored during
"push" and "update".</p>

<p>Example:</p>

<pre>
  <code>ignores: ["tmp", ".git"]
</code>
</pre>

<p>To include all hidden files or folders simply use an empty list.</p>

<p>Example:</p>

<pre>
  <code>ignores: []
</code>
</pre>

<p>If not specified, a default list is used to exclude files and folders
not typically required in a deployed application (e.g. the dot files and
folders of various source code control systems).</p>

<p>The default list contains the following: \~*/, .git/, *.svn/, *.hg/,
*CVS/, _FOSSIL_.fos, *.bzr, *.cdv, *.pc, *RCS, *SCCS,*_MTN,
*_build, *_darcs, *_sgbak, *autom4te.cache, *blib, *cover_db,
*\~.dep, *\~.dot, *\~.nib, *\~.plst</p>

<h2 id="inherit">inherit:<a href="#inherit" title="Permalink to this headline"></a></h2>

<p>This special key has the effect of treating its value as the name of a
file to be included into <em>manifest.yml</em>.</p>

<p>Example:</p>

<p><em>parent.yml</em>:</p>

<pre>
  <code>env:
  COMPANY: The ABC Company
</code>
</pre>

<p><em>manifest.yml</em>:</p>

<pre>
  <code>name: example-app
inherit: parent.yml
mem: 64M
</code>
</pre>

<p>effect from processing:</p>

<pre>
  <code>name: example-app
env:
  COMPANY: The ABC Company
mem: 64M
</code>
</pre>

<h2 id="hooks">hooks:</h2>

<p>Hooks are commands that are run at various point of the staging and
running process of an app.</p>

<h3 id="pre-push">pre-push:<a href="#pre-push" title="Permalink to this headline"></a></h3>

<p>Commands run <strong>on the local system</strong> before pushing the code to
Application Lifecycle Service. This can be useful for building source files (e.g. with
<code>make</code>) or performing configuration steps that need
to be done on the local system before the application code can be
pushed. Commands are executed between application creation (when the URL
and application resources are reserved) and the actual upload of the
local code.</p>

<p>The client will set the HELION_HOOK_ACTION variable to "create" if
the application is new, or "update" if it detects the application
already exists. You can use this variable to run hooks differently in
either context.</p>

<h3 id="pre-staging">pre-staging:<a href="#pre-staging" title="Permalink to this headline"></a></h3>

<p>A list of commands to be run in the root of the app's directory before
the staging process is started. The commands are only run a single time
on push or update.</p>

<h3 id="post-staging">post-staging:<a href="#post-staging" title="Permalink to this headline"></a></h3>

<p>A list of commands to be run in the root of the app's directory after
the staging process is complete. The commands are only run a single time
on push or update.</p>

<h3 id="pre-running">pre-running:<a href="#pre-running" title="Permalink to this headline"></a></h3>

<p>A list of commands to be run in the root of the app's directory after
staging is complete and before the app is started. The commands are run
sequentially, in the order listed, each time an app is started or
restarted.</p>

<p>Example:</p>

<pre>
  <code>hooks:
  pre-staging:
    - python prestagingsetup.py
  post-staging:
    - python manage.py syncdb --noinput
    - python manage.py migrate --noinput
  pre-running:
  - python prerunsetup.py
</code>
</pre>

<p>Hook processing ends and staging aborts if a command returns a nonzero
exit status (i.e. if the command fails). You can suppress this behavior
by prefacing the command with "-" to force staging to proceed despite
failures. The "-" must be included in a quoted command string. For
example:</p>

<pre>
  <code>hooks:
  post-staging:
    - "-python manage.py syncdb --noinput"
</code>
</pre>

<p>Commands used in the <code>hooks:</code> keys may not include
shell metacharacters, such as "&amp;&amp;" for combining commands, "#" for
comments, "\&lt;", "&gt;" or "|" for I/O redirection.</p>

<p>If you need shell functionality such as metacharacters, signal trapping,
or forcing zero exit status, wrap your command in a <em>script.sh</em> file and
use <code>sh +x script.sh</code> as your hook command.</p>

<p>Also note that if only a single command needs to be run, the list format
is not needed and can be included on the same line:</p>

<pre>
  <code>hooks:
  post-staging: python staging.py
  pre-running:  python running.py
</code>
</pre>

<h2 id="drain">drain:<a href="#drain" title="Permalink to this headline"></a></h2>

<p><a href="app-logs/index.html#application-logs-drain"><em>Application log drains</em></a> can be
added to an application when it is deployed by describing them in a
<code>drain:</code> block with a drain name and URL:</p>

<pre>
  <code>drain:
  drain_name: protocol://host.domain.tld:port/
</code>
</pre>

<p>To enable JSON logging, specify the URL separately along with a
<code>json: true</code> line:</p>

<pre>
  <code>drain:
  drain_name:
    url: protocol://host.domain.tld:port/
    json: true
</code>
</pre>

<p>For example:</p>

<pre>
  <code>drain:
  mytestdrain: udp://logs.loggly.com:12346/
  otherdrain:
    url: tcp://logs.papertrailapp.com:12345/
    json: true
</code>
</pre>

<h2 id="min-version">min_version:<a href="#min-version" title="Permalink to this headline"></a></h2>

<p>Sets requirements for the minimum version of the client and server under
which the app will run.</p>

<h3 id="client">client:<a href="#client" title="Permalink to this headline"></a></h3>

<p>The minimum version of the Application Lifecycle Service client needed to manage the app.</p>

<p>To determine the client version, use:</p>

<pre>
  <code>$ helion version

helion 0.3.13.0.18
</code>
</pre>

<p>Example:</p>

<pre>
  <code>min_version:
  client: 0.3.13.0.18
</code>
</pre>

<h3 id="server">server:<a href="#server" title="Permalink to this headline"></a></h3>

<p>The minimum version of the Application Lifecycle Service server needed to run the app.</p>

<h2 id="key-substitution">Key Substitution</h2>

<p>The value of any key in <em>manifest.yml</em> can be inserted in other keys
using the \${<em>key</em>} syntax. For example:</p>

<pre>
  <code>name: example-app
env:
  MY_NAME: ${name}
</code>
</pre>

<p>This defines a "MY_NAME" environment variable with the value
"example-app".</p>

<p>A small number of keys are predefined for your use within
<em>manifest.yml</em>:</p>

<pre>
  <code>  ------------------------------------------------------------------------
  key
  substitution
  value
  -------------- ---------------------------------------------------------
  \${random-word \${target-base}
  }              The hostname of the targeted Application Lifecycle Service system, for
  A short        example **helion-xxxx.local**
  alphanumeric   
  string of      
  random         
  characters     
  ------------------------------------------------------------------------
</code>
</pre>

<p>
  <strong>Note</strong>
</p>

<p>See the <a href="#services"><em>services</em></a> section for an example of
variable key substitution for yaml key names.</p>
	</article>
</div>

<div id="sidebar" class="grid_5 top-spacer">
	<aside class="signup-box">
		<p class="align-center">
			Download the<br>Development Platform<br>
			<a href="../../../../../external.html?link=https://helion.hpwsportal.com/#/Home/Show">DOWNLOAD NOW</a>
		</p>
	</aside>
	
 
	<aside class="signup-box">
		<p class="align-center">
			Take the Helion Development Platform for a Free Spin<br>
			<a href="../../../../helion/devplatform/ALS-developer-trial-quick-start/index.html">Quick Start Developer Trial</a>
		</p>
	</aside>
<!--	
	<aside class="signup-box">
		<p class="align-center">Make sure to check out our Developer Portal
			<a href="https://dev.hpcloud.com">dev.hpcloud.com
</a><br>
 
		</p>
	</aside>
-->	
	<aside class="box section-navigation">
  
     
  
  <ul>
    
      
      
      <li>
        <a class="" href="../../../../index.html"><span>HP Helion Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/devplatform/index.html"><span>HP Helion Development Platform Documentation Home</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/devplatform/install/index.html"><span>Development Platform Installation & Configuration</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/devplatform/install/community/index.html"><span>Development Platform Community Edition Installation & Configuration</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/openstack/update/devplat/101/index.html"><span>Development Platform Commercial 1.0.1 Update</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/devplatform/appdev/index.html"><span>Application Developer Resources</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/devplatform/sysadmin/index.html"><span>IT Ops Resources</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/devplatform/appdev/index.html#sample"><span>Sample Code</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/devplatform/release-notes/index.html"><span>Release Notes</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/devplatform/related-topics/index.html"><span>Related Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/devplatform/deploy/index.html"><span>Application Lifecycle Service Configuration and Deployment</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../admin/index.html"><span>ALS Admin Guide</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/devplatform/eula/index.html"><span>End User License Agreement</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../helion/devplatform/3rd-party-license-agreements/index.html"><span>Open Source and Third-Party Software License Agreements</span></a>
      </li>
    
  </ul>
</aside>
</div>

			</div> <!-- #main -->
		</div> <!-- #main-container -->
	</div> <!-- #wrapper -->

		
  <footer class="footer">
    <div class="container_16">
    	<div class="wrapper grid_16">
    		<ul class="footer-social">
    			<li class="twitter"><a href="../../../../../external.html?link=https://twitter.com/hphelioncloud"></a></li>
    			<li class="youtube"><a href="../../../../../external.html?link=http://www.youtube.com/hpcloud"></a></li>
    			<li class="rss"><a href="../../../../../external.html?link=http://h30499.www3.hp.com/hpeb/rss/board?board.id=sws-661"></a></li>
    			<li class="facebook"><a href="../../../../../external.html?link=https://www.facebook.com/HPCloud"></a></li>
    			<li class="linkedin stretch"><a href="../../../../../external.html?link=https://www.linkedin.com/company/hewlett-packard"></a></li>
    		</ul>
    		<ul class="contact-info">
    			<li>In the U.S.<br />1-855-61CLOUD</li>
    			<li>Worldwide<br />+1678-745-9010</li>
    			<li class="col-3">Online Support<br /><a href="mailto:support@hpcloud.com">Email</a> 
				<!-- comment out per JC
				or <span class="link" onclick="jQuery('#hpcloud-chat-button a').click();">Chat with us</span>
				-->
				</li>
    		</ul>
    		<div class="copyright">
    			<p>The OpenStack&reg; Word Mark and OpenStack Logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.</p><br />
    			<p>&copy; 2014 Hewlett-Packard Development Company, L.P.<br /><a href="../../../../../external.html?link=http://www.hpcloud.com/legal-documents">HP Cloud legal documents and privacy policy</a></p>
    		</div>
    	</div>
    </div>
  </footer>

	<script src="../../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="../../../../../ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../../../js/jquery-1.8.2f.min.html"><\/script>')</script>

  <script src="../../../../js/combined.js"></script>
  <script>
      __HP_CHAT_CONF = {};
      __HP_CHAT_CONF.sales = true;
      __HP_CHAT_CONF.support = true;
    </script>
	
    <script> //removed per JC
    //(function($, window) {
    //    $(window).load(function() {
    //    var sNew = document.createElement("script");
    //  sNew.async = true;
    //sNew.src = 'https://a248.e.akamai.net/cdn.hpcloudsvc.com/gcbb18d905d32174e6eb205943b0dea4a/prodae1/chat.js';
    //var s0 = document.getElementsByTagName('script')[0];
    //s0.parentNode.insertBefore(sNew, s0);
    //});
    //})(jQuery, this);
    </script>
    <script>
        //Executes your code when the DOM is ready.  Acts the same as $(document).ready().
        function styleRestCmds() {
            $("h5:contains('GET')").addClass('rest_cmd cmd_get');
            $("h5:contains('POST')").addClass('rest_cmd cmd_post');
            $("h5:contains('FormPOST')").removeClass('rest_cmd cmd_post');
            $("h5:contains('PUT')").addClass('rest_cmd cmd_put');
            $("h5:contains('COPY')").addClass('rest_cmd cmd_copy');
            $("h5:contains('PATCH')").addClass('rest_cmd cmd_patch');
            $("h5:contains('HEAD')").addClass('rest_cmd cmd_head');
            $("h5:contains('DELETE')").addClass('rest_cmd cmd_delete');
        }

        $(function() {
            //Calls the tocify method on your HTML div.
            $("#toc").tocify({
                'selectors': 'h2,h3,h4',
                'showAndHideOnScroll': false,
                'hideEffect': 'slideUp',
                'scrollTo': 55    // Amount of space between top of page and selected content
              }
            );
            // Style the REST commands
            styleRestCmds();
        });
    </script>
</body>

<!-- Mirrored from docs.hpcloud.com/als/v1/user/deploy/manifestyml by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 14:59:35 GMT -->
</html>
