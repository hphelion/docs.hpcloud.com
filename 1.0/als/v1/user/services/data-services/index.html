<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<!-- Mirrored from docs.hpcloud.com/als/v1/user/services/data-services/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 15:04:26 GMT -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Data Services</title>
	
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="shortcut icon" href="../../../../../favicon.ico" type="image/vnd.microsoft.icon" />
  <link rel="stylesheet" href="../../../../../css/combined.css">

	<script src="../../../../../js/modernizr-2.5.3.min.js"></script>
	<script src="../../../../../js/metrics.js"></script> 
</head>
<body>
  <div id="wrapper">
    <!--[if lt IE 7]>
    	<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div class="header-container">
      <header class="header">
      	<div class="top-bar" style="height: 75px;">
		
      		<div class="search-wrapper wrapper container_16">
			
      			<a href="#" class="sales-rep show-320 show-480 hide-768"><span aria-hidden="true" class="icon-icon-sales-rep"></span></a>
      			<nav class="sub-nav" >
				<a href="../../../../../index.html" class="logo"  ><img src="../../../../../images/HP_Helion_logo_72.png" style="position: absolute;top: 10px;" alt="HP Helion" /></a>
        			<ul>
					
 

         
        				<li><a href="../../../../../../external.html?link=http://www8.hp.com/us/en/cloud/helion-portfolio.html">Helion@HP</a></li>
						<li><a href="../../../../../../external.html?link=https://h30580.www3.hp.com/">Support</a></li>
        				<li><a href="mailto:heliondocs@hp.com">Contact</a></li>
						
        				 
        			</ul>
      			</nav>
          </div>
      	</div>
		<!-- per JC
      	<div class="nav-wrapper wrapper container_16">
        	<a href="http://www.hpcloud.com/" class="logo"><img src="/images/HP_Helion_logo_72.png" alt="HP Helion" /></a>
      		<nav class="nav hide-320 show-768">
      			<ul>
      				<li><a href="http://hpcloud.com/products-services">Products <span>& Services</span></a></li>
      				<li><a href="http://hpcloud.com/solutions">Cloud <span>Solutions</span></a></li>
      				<li><a href="http://hpcloud.com/why-hp-cloud">Why HP <span>Cloud?</span></a></li>
      				<li><a href="http://hpcloud.com/learning-center">Learning <span>Center</span></a></li>
      				<li><a href="http://hpcloud.com/blog">The <span>Blog</span></a></li>
      				<li><a href="http://hpcloud.com/free-trial">Sign Up <span>Today</span></a></li>
      			</ul>
      		</nav>
      	</div>
		-->
      </header>
    </div>
		<div id="main-container">
			<div id="main" class="wrapper clearfix container_16">
				<div id="content" class="grid_10 suffix_1">
	<article>
		<!--PUBLISHED-->

<h1 id="index-0">HP Helion 1.0 Development Platform: Application Lifecycle Service Data Services</h1>

<p>The Application Lifecycle Service includes a number of data services which can be bound to the
applications you deploy. These include several databases (PostgreSQL,
MySQL, Redis), the RabbitMQ messaging service, a <a href="../filesystem/index.html#persistent-file-system">persistent
file system</a> service and
<a href="../memcached/index.html#memcached">Memcached</a>.</p>

<p>For detailed information on using an <strong>external</strong> database system, see <a href="#database-external">Using External Database Services</a>.</p>

<ul><li><a href="#configuring-helion-data-services">Configuring Application Lifecycle Service Data Services</a>

<ul><li><a href="#using-manifest-yml">Defining Services in the <em>manifest.yml</em> File (before push)</a></li>
<li><a href="#using-helion-push">Creating Services During Push</a></li>
<li><a href="#creating-and-binding-services">Creating and Binding Services After Push</a></li>
</ul></li>
<li><a href="#using-database-services">Using Database Service Environment Variables</a>

<ul><li><a href="#vcap-services">VCAP_SERVICES</a></li>
<li><a href="#using-external-databases">Connecting to External Databases</a></li>
<li><a href="#accessing-database-services">Directly Accessing Database Services</a>

<ul><li><a href="#using-dbshell">Using <em>dbshell</em></a></li>
<li><a href="#using-tunnel">Using Tunnel</a></li>
</ul></li>
</ul></li>
<li><a href="#pre-populating-a-database-while-pushing-an-app">Pre-populating a database while pushing an app</a></li>
<li><a href="#backing-up-a-mysql-database">Backing up a MySQL database</a>

<ul><li><a href="#using-helion-run">Using <em>helion run</em></a></li>
<li><a href="#using-helion-tunnel">Using <em>helion tunnel</em></a></li>
</ul></li>
<li><a href="#importing-a-mysql-database">Importing a MySQL database</a>

<ul><li><a href="#id2">Using <em>dbshell</em></a></li>
<li><a href="#id3">Using <em>helion tunnel</em></a></li>
</ul></li>
<li><a href="#database-version-changes">Changing Database Versions</a></li>
<li><a href="#sqlite" title="Permalink to this headline">Using SQLite</a></li>
</ul><h2 id="configuring-helion-data-services">Configuring Application Lifecycle Service Data Services</h2>

<p>The data services your application requires need to be specified when your app is pushed to the Application Lifecycle Service server. This can be done in a
number of ways:</p>

<ol><li>Specifying the required services in the <em>manifest.yml</em> file.</li>
<li>Configuring services during the push process.</li>
<li>Configuring services manually.</li>
</ol><h3 id="using-manifest-yml">Defining Services in the <em>manifest.yml</em> File</h3>

<p>The manifest.yml file can define a lot of application-specific details
that tell the Application Lifecycle Service Client what to do without having to enter them
when you run <code>helion push</code>. For complete details
for using the <em>manifest.yml</em> file, please see <a href="../../deploy/manifestyml/index.html">Configuration With
<em>manifest.yml</em></a>.</p>

<p>A simple example telling the Application Lifecycle Service Client to request a MySQL database named
<strong>cirrusdb</strong>:</p>

<pre>
  <code>name: cirrus
mem: 256M
instances: 2
services:
    cirrusdb: mysql
</code>
</pre>

<p>Possible service types are:</p>

<ul><li><a href="../../reference/glossary/index.html#term-filesystem">filesystem</a></li>
<li><a href="../../reference/glossary/index.html#term-memcached">memcached</a></li>
<li><a href="../../reference/glossary/index.html#term-mysql">mysql</a></li>
<li><a href="../../reference/glossary/index.html#term-postgresql">postgresql</a></li>
<li><a href="../../reference/glossary/index.html#term-rabbitmq">rabbitmq</a></li>
<li><a href="../../reference/glossary/index.html#term-redis">redis</a></li>
</ul><p>To access the database services after they've been created, see <a href="#database-accessing">Accessing
Configured Database Services</a>.</p>

<h3 id="creating-services-during-push">Creating Services During Push<a href="#using-helion-push" title="Permalink to this headline"></a></h3>

<p>In order to ensure that the correct services are configured each time the app is pushed, list the services in the <em>manifest.yml</em> file.</p>

<p>However, if you do not specify any services in the <em>manifest.yml</em> file, you will be prompted to create them during the push process.</p>

<p>To set up a database service, for example, enter "y" when asked and follow the prompts:</p>

<pre>
  <code>$ helion push

...
Would you like to bind any services to 'cirrus' ?  [yN]: y
The following system services are available
1. mongodb
2. mysql
3. postgresql
4. redis
5. &lt;None of the above&gt;
Please select one you wish to provision: 2
Specify the name of the service [mysql-18cab]: cirrusdb
Creating Service: OK
Binding Service: OK
...
</code>
</pre>

<h3 id="creating-and-binding-services">Creating and Binding Services After Push</h3>

<p>It is possible to create services and bind them to an app after they are pushed to the Application Lifecycle Service server.</p>

<p>There are two ways to do this:</p>

<ol><li><p>Combine all parameters into a single command.</p>

<pre><code>helion create-service \&lt;service\&gt; \&lt;name\&gt; \&lt;app\&gt;**
</code></pre>

<p><strong>service</strong> is the <em>type</em> of service you want to create (mysql, redis, postgresql). 
<strong>name</strong> is the name you want to assign to the service.
<strong>app</strong> is the name of the application the service is to be bound to.</p>

<pre><code>$ helion create-service mysql ordersdb myapp
Creating Service: OK
Binding Service: OK
Stopping Application [myapp]: OK
Staging Application [myapp]: OK
Starting Application [myapp]: OK

$ helion apps

+-------------+---+-------------+---------------------------+----------------+
| Application | # | Health      | URLS                      | Services       |
+-------------+---+-------------+---------------------------+----------------+
| myapp       | 1 | RUNNING     | myapp.helion-xxxx.local | ordersdb       |
+-------------+---+-------------+---------------------------+----------------+
</code></pre></li>
<li><p>Pass all parameters in separate commands.</p>

<p>These two commands do the same thing as if all three parameters were passed using <code>create-service</code>, but provide additional flexibility to create and configure the service before binding it to an app.</p>

<pre><code>create-service \&lt;service\&gt; \&lt;name\&gt;

bind-service \&lt;servicename\&gt; \&lt;app\&gt;
</code></pre>

<p><strong>service</strong> is the <em>type</em> of service to be created (mysql, redis, postgresql, mongodb). 
<strong>name</strong> is the name you want to assign to the service.
<strong>servicename</strong> is the name assigned to this service during the <code>create-service</code> command. 
<strong>app</strong> is the name of the application the service is to be bound to.</p>

<pre><code>$ helion create-service mysql customerdb
Creating Service: OK

$ helion bind-service customerdb myapp
Binding Service: OK
Stopping Application [myapp]: OK
Staging Application [myapp]: OK
Starting Application [myapp]: OK

$ helion apps

+-------------+---+---------+---------------------------+-----------------------+
| Application | # | Health  | URLS                      | Services              |
+-------------+---+---------+---------------------------+-----------------------+
| myapp       | 1 | RUNNING | myapp.helion-xxxx.local | ordersdb, customerdb  |
+-------------+---+---------+---------------------------+-----------------------+
</code></pre></li>
</ol><p>For further information on the commands for managing services, or to remotely check the settings and credentials of any ALS service, please see
the <a href="../../reference/client-ref/index.html#command-services">Helion services</a> command reference.</p>

<h2 id="using-database-services">Using Database Service Environment Variables</h2>

<p>When you bind a database service to an application running as an Application Lifecycle Service,
<a href="../../reference/environment/index.html#environment-variables">environment
variables</a>
containing that service's host, port, and credentials are added to the
application container. You can use these environment variables in your
code to connect to the service, rather than having to discover and then hard-code in such details.</p>

<p>Examples of how to parse and use these variables can be found in the
<a href="../../deploy/index.html#language-specific-deploy">Language-Specific Deployment</a> section.</p>

<h3 id="database-url">DATABASE_URL<a name="database-url" id="database-url"></a></h3>

<p><strong>If only one relational database service</strong> is bound to an application,
use the DATABASE_URL environment variable. It contains the connection
string for the bound database in the following format:</p>

<pre>
  <code>protocol://username:password@host:port/database_name
</code>
</pre>

<p>For example, a DATABASE_URL for a PostgreSQL service would look like
this:</p>

<pre>
  <code>postgres://u65b0afbc8f8f4a1192b73e8d0eb38a24:p9eb83c11c59c4bcabfa475a4871e9242@192.168.69.117:5432/da17e48ddc82848499cb387bc65f5d4f9
</code>
</pre>

<p>The <strong>protocol</strong> portion specifies the type of database. For example:</p>

<ul><li>mysql://</li>
<li>postgresql://</li>
</ul><p>The <strong>database name</strong> portion of the URL is the <em>actual</em> database name
(e.g. "da17e48ddc82848499cb387bc65f5d4f9"), not the user-specific
service name set during deployment/service creation (e.g. "myapp-db").</p>

<h3 id="database-specific-urls">Database-Specific URLs</h3>

<p><strong>If a non-relational data service type</strong> is bound to the application,
use the corresponding named environment variable:</p>

<ul><li>REDIS_URL</li>
<li>RABBITMQ_URL</li>
</ul><p><strong>If more than one relational database service type</strong> is bound to the
application (e.g. MySQL and PostgreSQL), the DATABASE_URL variable will
not be set but the following database-specific variables will:</p>

<ul><li>MYSQL_URL</li>
<li>POSTGRESQL_URL</li>
<li>ORACLE_URL (with Oracle Database add-on)</li>
</ul><p>These have the same format as DATABASE_URL.</p>

<p><strong>If more than one database of the same type</strong> is bound to the
application (e.g. two MongoDB services), none of the URL formatted
environment variables will be available. Use
VCAP_SERVICES instead.</p>

<h3 id="vcap-services">VCAP_SERVICES</h3>

<p>Contains a JSON string listing the credentials for all bound services,
grouped by service type. VCAP_SERVICES variables use non-versioned service names, and the version number remains in the <strong>label</strong> key.</p>

<p>For example:</p>

<pre>
  <code>{
        "mysql": [
                {
                        "name": "mydb",
                        "label": "mysql-5.5",
                        "plan": "free",
                        "tags": [
                                "mysql",
                                "mysql-5.5",
                                "relational"
                        ],
                        "credentials": {
                                "name": "d0a60c0be931f4982bbef153f993237bc",
                                "hostname": "192.168.0.112",
                                "host": "192.168.0.112",
                                "port": 3306,
                                "user": "u93Mm8XmGXQ9R",
                                "username": "u93Mm8XmGXQ9R",
                                "password": "p8LwNeQXMrNzi"
                        }
                }
        ]
}
</code>
</pre>

<p>This variable contains some additional meta-information and can be used for compatibility with Cloud Foundry.</p>

<h3 id="using-external-databases">Connecting External Databases</h3>

<p>Applications running in Application Lifecycle Service can use external databases as long as the host and credentials are provided. There are two ways to pass this data:</p>

<ol><li>hard-coding: writing them during staging rather than taking them from environment variable at run time</li>
<li>specifying the data in a custom environment variable.</li>
</ol><p>Note that hard-coded applications <strong>must</strong> be conmpletely re-staged (e.g. redeployed or updated) to pick up the new service location and credentials. Restarting the application will not automatically force restaging.</p>

<h2 id="accessing-database-services">Directly Accessing Database Services</h2>

<p>You may need to connect to a database service directly for purposes of
initial database setup, modifying fields, running queries, or doing
backups. These operations can be done using the <code>dbshell</code> (preferred) or <code>tunnel</code> commands.</p>

<h3 id="using-dbshell">Via <em>dbshell</em></h3>

<p>The <em>helion dbshell</em> command creates an SSH tunnel to database services. To open an interactive shell to a service:</p>

<pre>
  <code>$ helion dbshell &lt;application_name&gt; &lt;service_name&gt;
</code>
</pre>

<p>The command automatically opens the appropriate database client for
the database you're connecting to, provided that client is installed on
the local system.</p>

<p>It is also available inside application containers, providing a quick
way to import data from dump files or set up schemas. For example,
to import data from file in an application directory, you could use a
hook in <em>manifest.yml</em> such as:</p>

<pre>
  <code>hooks:
  post-staging:
    - dbshell &lt; setup/sample-data.sql
</code>
</pre>

<h3 id="using-tunnel">Using Tunnel<a href="#using-tunnel" title="Permalink to this headline"></a></h3>

<p>The <em>helion tunnel</em> command is an alternative
method for accessing database services. The command creates a small Ruby
application which proxies database requests over HTTP. This is the
standard method for database access in Cloud Foundry, but tends to be
slower than using <em>dbshell</em>.</p>

<p>To create or use a tunnel, execute the command:</p>

<pre>
  <code>helion tunnel &lt;servicename&gt;
</code>
</pre>

<p>Depending on the service you are connecting to, a list of options will
be provided. Here is an example of a connection to a MySQL service:</p>

<pre>
  <code>helion tunnel mydb

Getting tunnel url: OK, at https://tunnel-xxxxx.helion-xxxx.local
Getting tunnel connection info: OK

Service connection info:
+----------+-----------------------------------+
| Key      | Value                             |
+----------+-----------------------------------+
| username | uT9efVVFCk                        |
| password | pHFitpIU1z                        |
| name     | d5eb2468f70ef4997b1514da1972      |
+----------+-----------------------------------+

1. none
2. mysql
3. mysqldump
Which client would you like to start?
</code>
</pre>

<p>You now have all the information you need to access the data. Note the
<strong>Service connection info</strong> box that displays your username,
password, and the actual database name.</p>

<p>For simple command line access, select option <strong>2. mysql</strong>.</p>

<p>To get a dump of the entire database, select option <strong>3. mysqldump</strong>.
You will be prompted to enter a path to where the dump will be saved to.</p>

<p>If you want to connect with a database viewer, or run multiple commands
from the command line, or pass in SQL files, select option <strong>1. none</strong>.
This will set up a port for you to connect with locally.</p>

<pre>
  <code>1. none
2. mysql
3. mysqldump

Which client would you like to start? **none**

Starting tunnel to remarks on port 10000.
Open another shell to run command-line clients or
use a UI tool to connect using the displayed information.
Press Ctrl-C to exit...
</code>
</pre>

<p>Open a new command line window. You can connect to the MySQL database
directly with:</p>

<pre>
  <code>$ mysql --protocol=TCP --host=localhost --port=10000 --user=&lt;user&gt; --password=&lt;password&gt; &lt;name&gt;
</code>
</pre>

<p>For example:</p>

<pre>
  <code>$ mysql --protocol=TCP --host=localhost --port=10000 --user=uT9efVVFCk --password=pHFitpIU1z d5eb2468f70ef4997b1514da1972
</code>
</pre>

<p>To import an SQL file, call the same command and pipe in the file:</p>

<pre>
  <code>$ mysql --protocol=TCP --host=localhost --port=10000 --user=&lt;user&gt; --password=&lt;pass&gt; &lt;name&gt; &lt; mydatabase.sql
</code>
</pre>

<p>To pull a dump of all databases:</p>

<pre>
  <code>$ mysqldump -A --protocol=TCP --port=10000 --host=localhost --user=&lt;user&gt; --password=&lt;pass&gt;
</code>
</pre>

<h2 id="pre-populating-a-database-while-pushing-an-app">Pre-populating a database while pushing an app<a href="#pre-populating-a-database-while-pushing-an-app" title="Permalink to this headline"></a></h2>

<p>When a database needs to be populated with data the first time it is
run, it can be done by the use of a hook during the staging process.
This can be accomplished in two steps.</p>

<p>First, create a script file in the app's root directory that uses the
same data source variables from VCAP_SERVICES as the ones being
used in the app. This file will open a connection to the database,
create tables, and insert records as necessary, as in this Perl example:</p>

<pre>
  <code>use strict;
use warnings;

use DBI;
use DBD::mysql;
use JSON "decode_json";

my $services = decode_json($ENV{VCAP_SERVICES});
my $credentials = $services-&gt;{mydb};

my $dbh = DBI-&gt;connect("DBI:mysql:database=$credentials-&gt;{name};hostname=$credentials-&gt;{hostname};port=$credentials-&gt;{port};",
                       $credentials-&gt;{'user'}, $credentials-&gt;{'password'})
    or die "Unable to connect: $DBI::errstr\n";

my $sql_init =
    'CREATE TABLE customers (
                    id INT(11) AUTO_INCREMENT PRIMARY KEY,
                    customername TEXT,
                    created DATETIME
            );
    ';
$dbh-&gt;do($sql_init);

$sql_init =
            'INSERT INTO customers
                    (customername, created)
            VALUES
                    ("John Doe", now()),
                    ("Sarah Smith", now());
    ';
$dbh-&gt;do($sql_init);

$dbh-&gt;disconnect;
</code>
</pre>

<p>Next, modify your <em>manifest.yml</em> file to make use of the
<code>post-staging</code> hook which will execute a command to
run the script:</p>

<pre>
  <code>name: customertracker
services:
  mysql: customerdb
hooks:
  post-staging: perl preload.pl
</code>
</pre>

<p>With those changes, the data from your script will be executed after the
staging process is complete but before the app starts to run.</p>

<h2 id="backing-up-a-mysql-database">Backing up a MySQL database<a href="#backing-up-a-mysql-database" title="Permalink to this headline"></a></h2>

<h3 id="using-helion-run">Using helion run<a href="#using-helion-run" title="Permalink to this headline"></a></h3>

<p>To export a MySQL database, use the <em>helion run</em>
command to remotely execute the dbexport tool:</p>

<pre>
  <code>$ helion run [application-name] dbexport service-name &gt; dumpfile.sql
</code>
</pre>

<p>This will run a <code>dbexport</code> of the named data service
remotely and direct the output to a local file. If run from a directory
containing the manifest.yml file, the application name may be omitted.</p>

<h3 id="using-helion-tunnel">Using helion tunnel<a href="#using-helion-tunnel" title="Permalink to this headline"></a></h3>

<p>This method of database backup is provided for compatibility with Cloud Foundry. It tends to be slower than using <code>helion run ...</code>.</p>

<p>To back up a MySQL database, use the <a href="#database-tunnel">tunnel</a>
command to make a connection to the server and export the data using
<code>mysqldump</code>.</p>

<p>Use the <code>tunnel</code> command to access the service (in
this example a MySQL database named <code>customerdb</code>):</p>

<pre>
  <code>$ helion tunnel customerdb

Password: ********
Getting tunnel url: OK, at https://tunnel-xxxxx.helion-xxxx.local
Getting tunnel connection info: OK

Service connection info:
+----------+-----------------------------------+
| Key      | Value                             |
+----------+-----------------------------------+
| username | uT9efVVFCk                        |
| password | pHFitpIU1z                        |
| name     | d5eb2468f70ef4997b1514da1972      |
+----------+-----------------------------------+

1. none
2. mysql
3. mysqldump
Which client would you like to start?
</code>
</pre>

<p>Select option <strong>3. mysqldump</strong>. You will be prompted to enter a path to
where the dump will be saved.</p>

<p>See the <a href="#database-tunnel">tunnel</a> command documentation for other
ways of accessing a MySQL database. See <a href="#bestpractices-importing-mysql">Importing a MySQL database</a> for details on importing a
file created by mysqldump into an existing MySQL database service.</p>

<h2 id="importing-a-mysql-database">Importing a MySQL database<a href="#importing-a-mysql-database" title="Permalink to this headline"></a></h2>

<h3 id="using-dbshell">Using dbshell<a href="#id2" title="Permalink to this headline"></a></h3>

<p>To import a MySQL database, use the <code>helion dbshell</code> command:</p>

<pre>
  <code>$ helion dbshell [application name] [service name] &lt; dumpfile.sql
</code>
</pre>

<p>This command redirects the contents of a local database dump file to the
appropriate database client running in the application instance (i.e.
equivalent to <code>helion run dbshell ...</code>). If run
from a directory containing the <em>manifest.yml</em> file, the application and
service names may be omitted.</p>

<h3 id="using-helion-tunnel">Using helion tunnel<a href="#id3" title="Permalink to this headline"></a></h3>

<p>This method of database import is provided for compatibility with Cloud Foundry. It tends to be slower than using <code>helion run ...</code>.</p>

<p>To import data from a <em>mysqldump</em> file into an existing
MySQL database service, use the <code>tunnel</code> command:</p>

<pre>
  <code>helion tunnel &lt;servicename&gt;

Password: ********
Getting tunnel url: OK, at https://tunnel-xxxxx.helion-xxxx.local
Getting tunnel connection info: OK

Service connection info:
+----------+-----------------------------------+
| Key      | Value                             |
+----------+-----------------------------------+
| username | uT9efVVFCk                        |
| password | pHFitpIU1z                        |
| name     | d5eb2468f70ef4997b1514da1972      |
+----------+-----------------------------------+

1. none
2. mysql
3. mysqldump
Which client would you like to start?
</code>
</pre>

<p>Choose option <strong>1. none</strong> which will allow for command line access to
the database. A MySQL service is configured on Port 10000, so open a new
terminal window to enter commands through.</p>

<p>Then, import an SQL file with the following command:</p>

<pre>
  <code>$ mysql --protocol=TCP --host=localhost --port=10000 --user=&lt;user&gt; --password=&lt;pass&gt; &lt;name&gt; &lt; mydatabase.sql
</code>
</pre>

<p>See the <a href="#database-tunnel">tunnel</a> command documentation for other
ways of accessing a MySQL database. See <a href="#bestpractices-backing-up-mysql">Backing up a MySQL database</a> for details on how to create
a <code>mysqldump</code> backup that can then be imported into
another database service.</p>

<h2 id="changing-database-versions">Changing Database Versions<a href="#database-version-changes" title="Permalink to this headline"></a></h2>

<p>The VCAP_SERVICES environment variable in Application Lifecycle Service does not include
version numbers in the service name string. This can cause problems when
migrating applications from Cloud Foundry v1 systems which reference
versioned database names in VCAP_SERVICES.</p>

<p>There are two application level fixes for this issue:</p>

<h3 id="method-1">Method 1<a href="#method-1" title="Permalink to this headline"></a></h3>

<p>Update references to VCAP_SERVICES in the application code to exclude
version numbers. For example:</p>

<pre>
  <code>MySQL:         'mysql-5.x' -&gt; 'mysql'
PostgreSQL:    'postgresql-x.x' -&gt; 'postgresql'
Redis:         'redis-2.x' -&gt; 'redis'
</code>
</pre>

<h3 id="method-2">Method 2<a href="#method-2" title="Permalink to this headline"></a></h3>

<p>Update the application code to use the DATABASE_URL environment
variable. See <a href="#database-accessing"><em>Using Database Services</em></a> for
general information and the following language-specific documentation:</p>

<ul><li><a href="../../deploy/languages/php/index.html#php-data-services">PHP Data Services</a></li>
</ul><p>The following changes to sample applications show this modification:</p>

<ul><li>PERL:
<a href="../../../../../../external.html?link=https://github.com/Stackato-Apps/bugzilla/commit/414804f3c02dab5104f048c013b8a3127e5268b2">https://github.com/Stackato-Apps/bugzilla/commit/414804f3c02dab5104f048c013b8a3127e5268b2</a></li>
<li>PYTHON:
<a href="../../../../../../external.html?link=https://github.com/Stackato-Apps/django-gtd/commit/fdc7361086c5a1f9d2b10ee5e7af918e9f60b999">https://github.com/Stackato-Apps/django-gtd/commit/fdc7361086c5a1f9d2b10ee5e7af918e9f60b999</a></li>
<li>PHP:
<a href="../../../../../../external.html?link=https://github.com/Stackato-Apps/owncloud-core/commit/3bd87948f48910f27fa1e059e863bcf312cce5f3">https://github.com/Stackato-Apps/owncloud-core/commit/3bd87948f48910f27fa1e059e863bcf312cce5f3</a></li>
</ul><h2 id="sqlite">SQLite</h2>

<p>Applications can use an <a href="../../../../../../external.html?link=http://www.sqlite.org/">SQLite database</a> as an alternative to Application Lifecycle Service database services. However, since the filesystem of an application container is ephemeral -- destroyed when an application is stopped, restarted, or updated -- <strong>always</strong> store the SQLite file on a <a href="../filesystem/index.html#persistent-file-system">Persistent File System</a> mount point to avoid losing data.</p>
	</article>
</div>

<div id="sidebar" class="grid_5 top-spacer">
	<aside class="signup-box">
		<p class="align-center">
			Download the<br>Development Platform<br>
			<a href="../../../../../../external.html?link=https://helion.hpwsportal.com/#/Home/Show">DOWNLOAD NOW</a>
		</p>
	</aside>
	
 
	<aside class="signup-box">
		<p class="align-center">
			Take the Helion Development Platform for a Free Spin<br>
			<a href="../../../../../helion/devplatform/ALS-developer-trial-quick-start/index.html">Quick Start Developer Trial</a>
		</p>
	</aside>
<!--	
	<aside class="signup-box">
		<p class="align-center">Make sure to check out our Developer Portal
			<a href="https://dev.hpcloud.com">dev.hpcloud.com
</a><br>
 
		</p>
	</aside>
-->	
	<aside class="box section-navigation">
  
     
  
  <ul>
    
      
      
      <li>
        <a class="" href="../../../../../index.html"><span>HP Helion Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/index.html"><span>HP Helion Development Platform Documentation Home</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/install/index.html"><span>Development Platform Installation & Configuration</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/install/community/index.html"><span>Development Platform Community Edition Installation & Configuration</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/openstack/update/devplat/101/index.html"><span>Development Platform Commercial 1.0.1 Update</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/appdev/index.html"><span>Application Developer Resources</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/sysadmin/index.html"><span>IT Ops Resources</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/appdev/index.html#sample"><span>Sample Code</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/release-notes/index.html"><span>Release Notes</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/related-topics/index.html"><span>Related Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/deploy/index.html"><span>Application Lifecycle Service Configuration and Deployment</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../admin/index.html"><span>ALS Admin Guide</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/eula/index.html"><span>End User License Agreement</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/3rd-party-license-agreements/index.html"><span>Open Source and Third-Party Software License Agreements</span></a>
      </li>
    
  </ul>
</aside>
</div>

			</div> <!-- #main -->
		</div> <!-- #main-container -->
	</div> <!-- #wrapper -->

		
  <footer class="footer">
    <div class="container_16">
    	<div class="wrapper grid_16">
    		<ul class="footer-social">
    			<li class="twitter"><a href="../../../../../../external.html?link=https://twitter.com/hphelioncloud"></a></li>
    			<li class="youtube"><a href="../../../../../../external.html?link=http://www.youtube.com/hpcloud"></a></li>
    			<li class="rss"><a href="../../../../../../external.html?link=http://h30499.www3.hp.com/hpeb/rss/board?board.id=sws-661"></a></li>
    			<li class="facebook"><a href="../../../../../../external.html?link=https://www.facebook.com/HPCloud"></a></li>
    			<li class="linkedin stretch"><a href="../../../../../../external.html?link=https://www.linkedin.com/company/hewlett-packard"></a></li>
    		</ul>
    		<ul class="contact-info">
    			<li>In the U.S.<br />1-855-61CLOUD</li>
    			<li>Worldwide<br />+1678-745-9010</li>
    			<li class="col-3">Online Support<br /><a href="mailto:support@hpcloud.com">Email</a> 
				<!-- comment out per JC
				or <span class="link" onclick="jQuery('#hpcloud-chat-button a').click();">Chat with us</span>
				-->
				</li>
    		</ul>
    		<div class="copyright">
    			<p>The OpenStack&reg; Word Mark and OpenStack Logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.</p><br />
    			<p>&copy; 2014 Hewlett-Packard Development Company, L.P.<br /><a href="../../../../../../external.html?link=http://www.hpcloud.com/legal-documents">HP Cloud legal documents and privacy policy</a></p>
    		</div>
    	</div>
    </div>
  </footer>

	<script src="../../../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="../../../../../../ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../../../../js/jquery-1.8.2f.min.html"><\/script>')</script>

  <script src="../../../../../js/combined.js"></script>
  <script>
      __HP_CHAT_CONF = {};
      __HP_CHAT_CONF.sales = true;
      __HP_CHAT_CONF.support = true;
    </script>
	
    <script> //removed per JC
    //(function($, window) {
    //    $(window).load(function() {
    //    var sNew = document.createElement("script");
    //  sNew.async = true;
    //sNew.src = 'https://a248.e.akamai.net/cdn.hpcloudsvc.com/gcbb18d905d32174e6eb205943b0dea4a/prodae1/chat.js';
    //var s0 = document.getElementsByTagName('script')[0];
    //s0.parentNode.insertBefore(sNew, s0);
    //});
    //})(jQuery, this);
    </script>
    <script>
        //Executes your code when the DOM is ready.  Acts the same as $(document).ready().
        function styleRestCmds() {
            $("h5:contains('GET')").addClass('rest_cmd cmd_get');
            $("h5:contains('POST')").addClass('rest_cmd cmd_post');
            $("h5:contains('FormPOST')").removeClass('rest_cmd cmd_post');
            $("h5:contains('PUT')").addClass('rest_cmd cmd_put');
            $("h5:contains('COPY')").addClass('rest_cmd cmd_copy');
            $("h5:contains('PATCH')").addClass('rest_cmd cmd_patch');
            $("h5:contains('HEAD')").addClass('rest_cmd cmd_head');
            $("h5:contains('DELETE')").addClass('rest_cmd cmd_delete');
        }

        $(function() {
            //Calls the tocify method on your HTML div.
            $("#toc").tocify({
                'selectors': 'h2,h3,h4',
                'showAndHideOnScroll': false,
                'hideEffect': 'slideUp',
                'scrollTo': 55    // Amount of space between top of page and selected content
              }
            );
            // Style the REST commands
            styleRestCmds();
        });
    </script>
</body>

<!-- Mirrored from docs.hpcloud.com/als/v1/user/services/data-services/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 15:04:26 GMT -->
</html>
