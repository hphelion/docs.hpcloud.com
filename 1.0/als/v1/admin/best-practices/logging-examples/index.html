<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<!-- Mirrored from docs.hpcloud.com/als/v1/admin/best-practices/logging-examples/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 15:00:01 GMT -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Log Drain Examples</title>
	
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="shortcut icon" href="../../../../../favicon.ico" type="image/vnd.microsoft.icon" />
  <link rel="stylesheet" href="../../../../../css/combined.css">

	<script src="../../../../../js/modernizr-2.5.3.min.js"></script>
	<script src="../../../../../js/metrics.js"></script> 
</head>
<body>
  <div id="wrapper">
    <!--[if lt IE 7]>
    	<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div class="header-container">
      <header class="header">
      	<div class="top-bar" style="height: 75px;">
		
      		<div class="search-wrapper wrapper container_16">
			
      			<a href="#" class="sales-rep show-320 show-480 hide-768"><span aria-hidden="true" class="icon-icon-sales-rep"></span></a>
      			<nav class="sub-nav" >
				<a href="../../../../../index.html" class="logo"  ><img src="../../../../../images/HP_Helion_logo_72.png" style="position: absolute;top: 10px;" alt="HP Helion" /></a>
        			<ul>
					
 

         
        				<li><a href="../../../../../../external.html?link=http://www8.hp.com/us/en/cloud/helion-portfolio.html">Helion@HP</a></li>
						<li><a href="../../../../../../external.html?link=https://h30580.www3.hp.com/">Support</a></li>
        				<li><a href="mailto:heliondocs@hp.com">Contact</a></li>
						
        				 
        			</ul>
      			</nav>
          </div>
      	</div>
		<!-- per JC
      	<div class="nav-wrapper wrapper container_16">
        	<a href="http://www.hpcloud.com/" class="logo"><img src="/images/HP_Helion_logo_72.png" alt="HP Helion" /></a>
      		<nav class="nav hide-320 show-768">
      			<ul>
      				<li><a href="http://hpcloud.com/products-services">Products <span>& Services</span></a></li>
      				<li><a href="http://hpcloud.com/solutions">Cloud <span>Solutions</span></a></li>
      				<li><a href="http://hpcloud.com/why-hp-cloud">Why HP <span>Cloud?</span></a></li>
      				<li><a href="http://hpcloud.com/learning-center">Learning <span>Center</span></a></li>
      				<li><a href="http://hpcloud.com/blog">The <span>Blog</span></a></li>
      				<li><a href="http://hpcloud.com/free-trial">Sign Up <span>Today</span></a></li>
      			</ul>
      		</nav>
      	</div>
		-->
      </header>
    </div>
		<div id="main-container">
			<div id="main" class="wrapper clearfix container_16">
				<div id="content" class="grid_10 suffix_1">
	<article>
		<!--PUBLISHED-->

<h1 id="-hp-helion-10-development-platform-log-drain-examples"># HP Helion 1.0 Development Platform: Log Drain Examples<a href="#log-drain-examples" title="Permalink to this headline"></a></h1>

<p><a href="#papertrail">Papertrail</a>
    -   <a href="#loggly">Loggly</a>
    -   <a href="#splunk">Splunk</a>
    -   <a href="#hello-world-custom-drain">Hello World Custom Drain</a></p>

<p>Detailed instructions on how to use drains with third party log analysis
software or services:</p>

<ul><li><a href="#logging-examples-papertrail"><em>Papertrail</em></a></li>
<li><a href="#logging-examples-loggly"><em>Loggly</em></a></li>
<li><a href="#logging-examples-splunk"><em>Splunk</em></a></li>
</ul><p>
  <strong>Note</strong>
</p>

<p>Do not forward both application and system logs to the same destination.</p>

<h2 id="papertrail">Papertrail<a href="#papertrail" title="Permalink to this headline"></a></h2>

<ol><li><a href="../../../../../../external.html?link=https://papertrailapp.com/plans">Create an account for Papertrail</a></li>
<li><p>In the Dashboard screen, click <em>Add Systems</em>.
<img src="content/documentation/devplatform/helion/imagesppt1.html" /></p></li>
<li><p>In the Setup Systems screen under <em>Other log methods</em>, click
<em>Alternatives</em>.
<img src="../../../../../content/documentation/devplatform/helion/images/ppt2.png" /></p></li>
<li><p>Choose option C: <em>My system's hostname changes</em> and give it a
suitable name.
<img src="../../../../../content/documentation/devplatform/helion/images/ppt3.png" /></p></li>
<li><p>Note down the <strong>port number</strong>. You need this later on.
<img src="../../../../../content/documentation/devplatform/helion/images/ppt4.png" /></p></li>
<li><p>Enable system logging (via udp) by executing the following kato command:</p></li>
</ol><p>
  <code>kato log drain add drain-name udp://logs.papertrailapp.com:port#</code>
</p>

<p>
  <strong>Note</strong>
</p>

<p>Papertrail requires systail log lines to have <code>&lt;13&gt;l</code> at the beginning of each line. Make sure the drain you are
forwarding is formatted this way (see example in <a href="../../server/logging/index.html#logging-drains-save-format"><em>Saving Custom Log
Formats</em></a>).</p>

<h2 id="loggly">Loggly<a href="#loggly" title="Permalink to this headline"></a></h2>

<ol><li><a href="../../../../../../external.html?link=https://app.loggly.com/pricing">Create an account for Loggly</a></li>
<li>Under <em>Incoming Data</em> tab, click <em>Add Input</em>.
<img src="../../../../../content/documentation/devplatform/helion/images/loggly1.png" /></li>
<li>In the Add Input screen:

<ul><li>Choose <em>Syslog UDP or TCP</em></li>
<li>Choose <em>Combination Log Type</em></li>
<li>[Optional] For JSON Logging, Choose UDP or TCP <strong>with Stripe</strong> and enable <strong>JSON Logging</strong>. (for system logs)
<img src="../../../../../content/documentation/devplatform/helion/images/loggly2.png" /></li>
</ul></li>
<li>If we want to accept logs from any Application Lifecycle Service nodes or applications modify Allowed Devices section:

<ul><li>Click <em>Add device</em>
<img src="../../../../../content/documentation/devplatform/helion/images/images/loggly3.html" /></li>
<li>Add IP Address 0.0.0.0/0 when prompted
<img src="../../../../../content/documentation/devplatform/helion/images/loggly4.png" /></li>
</ul></li>
<li>Turn off discovery since we allowed all devices. Also, note down the
<strong>port number</strong>.
 <img src="../../../../../content/documentation/devplatform/helion/images/loggly5.png" /></li>
<li><p>Enable system logging by executing <strong>one</strong> of the following kato commands:</p>

<pre><code>kato log drain add drain-name udp://logs.loggly.com:port#

kato log drain add drain-name tcp://logs.loggly.com:port#
</code></pre></li>
</ol><p>Loggly supports JSON format with minor configuration changes shown above. Enable system JSON logging by executing the following kato command:</p>

<pre>
  <code>kato log drain add --format json drain-name tcp://logs.loggly.com:port#
</code>
</pre>

<h2 id="splunk">Splunk<a href="#splunk" title="Permalink to this headline"></a></h2>

<ol><li><a href="../../../../../../external.html?link=http://www.splunk.com/download">Set up Splunk Server</a>.</li>
<li>In the welcome screen, click <em>Add data</em>
<img src="../../../../../content/documentation/devplatform/helion/images/splunk1.png" /></li>
<li><p>Under <em>Choose a Data Source</em>, click <strong>From a TCP port</strong> (or UDP)<br /><img src="../../../../../content/documentation/devplatform/helion/images/splunk2.png" /></p></li>
<li><p>In the <strong>Add New Source</strong> screen:</p>

<ul><li>Select a TCP/UDP port greater than <strong>9999</strong></li>
<li>Give it a suitable <strong>Source name</strong>.</li>
<li>Set sourcetype to <strong>Manual</strong></li>
<li>Leave Source Type <strong>empty</strong>
<img src="../../../../../content/documentation/devplatform/helion/images/splunk3.png" /></li>
</ul></li>
<li><p>Enable system logging by executing <strong>one</strong> of the following kato commands:</p>

<pre><code>kato log drain add drain-name splunk-server-address:port#

kato log drain add drain-name tcp://splunk-server-address:port#
</code></pre></li>
</ol><p>Splunk supports JSON format without further configuration. Enable system JSON logging by executing the following kato command:</p>

<pre>
  <code>kato log drain add --format json drain-name tcp://splunk-server-address:port#
</code>
</pre>

<h2 id="hello-world-custom-drain">Hello World Custom Drain<a href="#hello-world-custom-drain" title="Permalink to this headline"></a></h2>

<p>The command below starts a drain target server on a node and pipes it to a local file:</p>

<pre>
  <code>nc -lk 0.0.0.0 10000 &gt; log-output.txt
</code>
</pre>

<p>As long as that nc command runs, this will funnel logs from all drains, targeting it into the file log-output.txt</p>

<p>Enable system logging by executing <strong>one</strong> of the following kato commands:</p>

<pre>
  <code>kato log drain add drain-name udp://server-address:port#
kato log drain add drain-name tcp://server-address:port#
</code>
</pre>
	</article>
</div>

<div id="sidebar" class="grid_5 top-spacer">
	<aside class="signup-box">
		<p class="align-center">
			Download the<br>Development Platform<br>
			<a href="../../../../../../external.html?link=https://helion.hpwsportal.com/#/Home/Show">DOWNLOAD NOW</a>
		</p>
	</aside>
	
 
	<aside class="signup-box">
		<p class="align-center">
			Take the Helion Development Platform for a Free Spin<br>
			<a href="../../../../../helion/devplatform/ALS-developer-trial-quick-start/index.html">Quick Start Developer Trial</a>
		</p>
	</aside>
<!--	
	<aside class="signup-box">
		<p class="align-center">Make sure to check out our Developer Portal
			<a href="https://dev.hpcloud.com">dev.hpcloud.com
</a><br>
 
		</p>
	</aside>
-->	
	<aside class="box section-navigation">
  
     
  
  <ul>
    
      
      
      <li>
        <a class="" href="../../../../../index.html"><span>HP Helion Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/index.html"><span>HP Helion Development Platform Documentation Home</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/install/index.html"><span>Development Platform Installation & Configuration</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/install/community/index.html"><span>Development Platform Community Edition Installation & Configuration</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/openstack/update/devplat/101/index.html"><span>Development Platform Commercial 1.0.1 Update</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/appdev/index.html"><span>Application Developer Resources</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/sysadmin/index.html"><span>IT Ops Resources</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/appdev/index.html#sample"><span>Sample Code</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/release-notes/index.html"><span>Release Notes</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/related-topics/index.html"><span>Related Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/deploy/index.html"><span>Application Lifecycle Service Configuration and Deployment</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../index.html"><span>ALS Admin Guide</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/eula/index.html"><span>End User License Agreement</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/3rd-party-license-agreements/index.html"><span>Open Source and Third-Party Software License Agreements</span></a>
      </li>
    
  </ul>
</aside>
</div>

			</div> <!-- #main -->
		</div> <!-- #main-container -->
	</div> <!-- #wrapper -->

		
  <footer class="footer">
    <div class="container_16">
    	<div class="wrapper grid_16">
    		<ul class="footer-social">
    			<li class="twitter"><a href="../../../../../../external.html?link=https://twitter.com/hphelioncloud"></a></li>
    			<li class="youtube"><a href="../../../../../../external.html?link=http://www.youtube.com/hpcloud"></a></li>
    			<li class="rss"><a href="../../../../../../external.html?link=http://h30499.www3.hp.com/hpeb/rss/board?board.id=sws-661"></a></li>
    			<li class="facebook"><a href="../../../../../../external.html?link=https://www.facebook.com/HPCloud"></a></li>
    			<li class="linkedin stretch"><a href="../../../../../../external.html?link=https://www.linkedin.com/company/hewlett-packard"></a></li>
    		</ul>
    		<ul class="contact-info">
    			<li>In the U.S.<br />1-855-61CLOUD</li>
    			<li>Worldwide<br />+1678-745-9010</li>
    			<li class="col-3">Online Support<br /><a href="mailto:support@hpcloud.com">Email</a> 
				<!-- comment out per JC
				or <span class="link" onclick="jQuery('#hpcloud-chat-button a').click();">Chat with us</span>
				-->
				</li>
    		</ul>
    		<div class="copyright">
    			<p>The OpenStack&reg; Word Mark and OpenStack Logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.</p><br />
    			<p>&copy; 2014 Hewlett-Packard Development Company, L.P.<br /><a href="../../../../../../external.html?link=http://www.hpcloud.com/legal-documents">HP Cloud legal documents and privacy policy</a></p>
    		</div>
    	</div>
    </div>
  </footer>

	<script src="../../../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="../../../../../../ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../../../../js/jquery-1.8.2f.min.html"><\/script>')</script>

  <script src="../../../../../js/combined.js"></script>
  <script>
      __HP_CHAT_CONF = {};
      __HP_CHAT_CONF.sales = true;
      __HP_CHAT_CONF.support = true;
    </script>
	
    <script> //removed per JC
    //(function($, window) {
    //    $(window).load(function() {
    //    var sNew = document.createElement("script");
    //  sNew.async = true;
    //sNew.src = 'https://a248.e.akamai.net/cdn.hpcloudsvc.com/gcbb18d905d32174e6eb205943b0dea4a/prodae1/chat.js';
    //var s0 = document.getElementsByTagName('script')[0];
    //s0.parentNode.insertBefore(sNew, s0);
    //});
    //})(jQuery, this);
    </script>
    <script>
        //Executes your code when the DOM is ready.  Acts the same as $(document).ready().
        function styleRestCmds() {
            $("h5:contains('GET')").addClass('rest_cmd cmd_get');
            $("h5:contains('POST')").addClass('rest_cmd cmd_post');
            $("h5:contains('FormPOST')").removeClass('rest_cmd cmd_post');
            $("h5:contains('PUT')").addClass('rest_cmd cmd_put');
            $("h5:contains('COPY')").addClass('rest_cmd cmd_copy');
            $("h5:contains('PATCH')").addClass('rest_cmd cmd_patch');
            $("h5:contains('HEAD')").addClass('rest_cmd cmd_head');
            $("h5:contains('DELETE')").addClass('rest_cmd cmd_delete');
        }

        $(function() {
            //Calls the tocify method on your HTML div.
            $("#toc").tocify({
                'selectors': 'h2,h3,h4',
                'showAndHideOnScroll': false,
                'hideEffect': 'slideUp',
                'scrollTo': 55    // Amount of space between top of page and selected content
              }
            );
            // Style the REST commands
            styleRestCmds();
        });
    </script>
</body>

<!-- Mirrored from docs.hpcloud.com/als/v1/admin/best-practices/logging-examples/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 15:00:01 GMT -->
</html>
