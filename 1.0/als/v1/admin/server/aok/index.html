<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<!-- Mirrored from docs.hpcloud.com/als/v1/admin/server/aok/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 14:59:55 GMT -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>AOK Authentication Server</title>
	
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="shortcut icon" href="../../../../../favicon.ico" type="image/vnd.microsoft.icon" />
  <link rel="stylesheet" href="../../../../../css/combined.css">

	<script src="../../../../../js/modernizr-2.5.3.min.js"></script>
	<script src="../../../../../js/metrics.js"></script> 
</head>
<body>
  <div id="wrapper">
    <!--[if lt IE 7]>
    	<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div class="header-container">
      <header class="header">
      	<div class="top-bar" style="height: 75px;">
		
      		<div class="search-wrapper wrapper container_16">
			
      			<a href="#" class="sales-rep show-320 show-480 hide-768"><span aria-hidden="true" class="icon-icon-sales-rep"></span></a>
      			<nav class="sub-nav" >
				<a href="../../../../../index.html" class="logo"  ><img src="../../../../../images/HP_Helion_logo_72.png" style="position: absolute;top: 10px;" alt="HP Helion" /></a>
        			<ul>
					
 

         
        				<li><a href="../../../../../../external.html?link=http://www8.hp.com/us/en/cloud/helion-portfolio.html">Helion@HP</a></li>
						<li><a href="../../../../../../external.html?link=https://h30580.www3.hp.com/">Support</a></li>
        				<li><a href="mailto:heliondocs@hp.com">Contact</a></li>
						
        				 
        			</ul>
      			</nav>
          </div>
      	</div>
		<!-- per JC
      	<div class="nav-wrapper wrapper container_16">
        	<a href="http://www.hpcloud.com/" class="logo"><img src="/images/HP_Helion_logo_72.png" alt="HP Helion" /></a>
      		<nav class="nav hide-320 show-768">
      			<ul>
      				<li><a href="http://hpcloud.com/products-services">Products <span>& Services</span></a></li>
      				<li><a href="http://hpcloud.com/solutions">Cloud <span>Solutions</span></a></li>
      				<li><a href="http://hpcloud.com/why-hp-cloud">Why HP <span>Cloud?</span></a></li>
      				<li><a href="http://hpcloud.com/learning-center">Learning <span>Center</span></a></li>
      				<li><a href="http://hpcloud.com/blog">The <span>Blog</span></a></li>
      				<li><a href="http://hpcloud.com/free-trial">Sign Up <span>Today</span></a></li>
      			</ul>
      		</nav>
      	</div>
		-->
      </header>
    </div>
		<div id="main-container">
			<div id="main" class="wrapper clearfix container_16">
				<div id="content" class="grid_10 suffix_1">
	<article>
		<!--PUBLISHED-->

<h1 id="-hp-helion-10-development-platform-aok-authentication-server"># HP Helion 1.0 Development Platform: AOK Authentication Server<a href="#aok-authentication-server" title="Permalink to this headline"></a></h1>

<p><a href="#end-user-login">End User Login</a>
        -   <a href="#web">Web</a>
        -   <a href="#client">Client</a>
    -   <a href="#strategies">Strategies</a>
    -   <a href="#configuration">Configuration</a>
    -   <a href="#user-management">User Management</a>
    -   <a href="#first-admin-user-setup">First Admin User Setup</a>
    -   <a href="#regular-ldap-user-setup">Regular LDAP User Setup</a></p>

<p>AOK is Application Lifecycle Service's authentication management service (replacing Cloud
Foundry's UAA Server). It issues tokens via OAuth2 for client
applications such as the <code>helion</code> client and the
Management Console. AOK can connect to other back-end SSO services such
as LDAP by using different <a href="#aok-strategies"><em>Strategies</em></a>.</p>

<h2 id="end-user-login">End User Login<a href="#end-user-login" title="Permalink to this headline"></a></h2>

<h3 id="web">Web<a href="#web" title="Permalink to this headline"></a></h3>

<p>Users log in to the web Management Console as they would with any other
web application. The Management Console checks with the AOK endpoint
(e.g. https://aok.helion.example.com) in the background.</p>

<h3 id="client">Client<a href="#client" title="Permalink to this headline"></a></h3>

<p>If the strategy has been changed to something other than builtin (see
below), then users connecting with the
<a href="../../../user/client/index.html#client"><em>helion</em></a> client should be aware
that:</p>

<ul><li>The user must enter their identifier in the format expected by the
<a href="#aok-strategies"><em>strategy</em></a> used by AOK (e.g. username or email
address).</li>
<li>When using an existing authentication token to log in as a second
user (e.g. an admin connecting as another user), use the second
user's helion username, <em>not the identifier used by AOK's
strategy</em>.</li>
</ul><p>These caveats also apply when using other Cloud-Foundry-compatible
clients.</p>

<h2 id="strategies">Strategies<a href="#strategies" title="Permalink to this headline"></a></h2>

<p>The term <em>strategy</em> refers to the method used to authenticate users.
There are currently two supported strategies:</p>

<ul><li><p><strong>builtin</strong>: The default builtin strategy uses a local database of
users and passwords to authenticate.</p></li>
<li><p><strong>ldap</strong>: The ldap strategy authenticates using the LDAP server
specified in <a href="#aok-configuration"><em>kato config</em></a>. Any user that can
successfully authenticate with the LDAP server will be allowed to
use Application Lifecycle Service and will have a (non-admin) user account created for
them automatically. The LDAP server must return an email address for
the user to allow them to log in to Application Lifecycle Service. AOK will look for the
email address under the <code>mail</code>,
<code>email</code>, and <code>userPrincipalName</code> attributes.</p>

<p>LDAP groups are not currently supported as a visible construct in
Application Lifecycle Service.</p></li>
</ul><p>The use key in the configuration controls the strategy that AOK will
use. This value must correspond exactly to one of the supported strategy
names.</p>

<h2 id="configuration">Configuration<a href="#configuration" title="Permalink to this headline"></a></h2>

<p>To configure AOK, set the following keys in the AOK config using <a href="../../reference/kato-ref/index.html#kato-command-ref-config"><em>kato
config set</em></a>:</p>

<ul><li><p>strategy:</p>

<ul><li><p>use: set to either 'builtin' (default) or 'ldap'. The builtin
strategy requires no further modification. The ldap strategy
requires setting options in the corresponding block below.</p></li>
<li><p>ldap:</p>

<ul><li><p>host: hostname or IP of the LDAP server</p></li>
<li><p>port: LDAP server port, typically 389</p></li>
<li><p>method: plain, ssl, or tls</p></li>
<li><p>base: list of domain components (e.g. 'dc=example, dc=com')</p></li>
<li><p>uid: LDAP attribute name for the user name that will used in
the login form. Active Directory (AD) is typically
'sAMAccountName' or 'UserPrincipalName', while OpenLDAP is
'uid'.</p></li>
<li><p>email: the LDAP attribute containing the user's fully
qualified email address. An email address attribute is
necessary for AOK to work properly with the cloud
controller. This may be a scalar attribute or an array of
attributes to search. The default is shown. The first
non-null attribute will be used (AOK will not validate that
this is an email address). The default attributes are:</p>

<ul><li>mail</li>
<li>email</li>
<li>userPrincipalName</li>
</ul></li>
<li><p>bind_dn: (optional) credentials for user lookup (e.g.
'cn=Administrator,cn=Users,dc=example,dc=com'). LDAP servers
that allow anonymous bind will not require this setting.</p></li>
<li><p>password: (optional) default credentials for user lookup</p></li>
<li><p>try_sasl: (optional) when set to true attempts a SASL
connection to the LDAP server</p></li>
<li><p>sasl_mechanims: (optional) 'DIGEST-MD5' or 'GSS-SPNEGO'</p></li>
</ul></li>
</ul></li>
</ul><p>
  <strong>Note</strong>
</p>

<p>An additional 'name_proc' option in the 'ldap' block allows users to
enter email addresses instead of LDAP user names, matching the user name
entered with the format of the uid attributes. For example, value of
'sAMAccountName' in AD contains only the Windows user name. If your
users prefer using email to login, the following 'name_proc' value will
trim the email string down to just the Windows login name:</p>

<pre>
  <code>Proc.new {|name| name.gsub(/@.*$/,'')}
</code>
</pre>

<p>Value must be valid ruby code. Since the provided code will be accepting
arbitrary user input, administrators are urged to use this setting only
when absolutely necessary, and to check the code thoroughly for possible
security implications.</p>

<p>To see the default AOK configuration (default settings) run the
command:</p>

<pre>
  <code>$ kato config get aok
</code>
</pre>

<p>Settings are nested as per the option list above. To set an option,
specify the full config path to that option. For example:</p>

<pre>
  <code>$ kato config set aok strategy/ldap/base 'dc=yourdomain, dc=com'
</code>
</pre>

<p>To add an attribute to the 'email' array:</p>

<pre>
  <code>kato config push aok strategy/ldap/email "ADMailAcct"
</code>
</pre>

<p>To set the entire array in one step, use the <code>--json</code> option:</p>

<pre>
  <code>kato config set --json aok strategy/ldap/email '["mail","ADMailAcct", "email"]'
</code>
</pre>

<h2 id="user-management">User Management<a href="#user-management" title="Permalink to this headline"></a></h2>

<p>When using AOK with any strategy other than 'builtin', users in Application Lifecycle Service
will be created automatically for any user who successfully
authenticates.</p>

<p>Administrators can still use the functions as before, but should be
aware of the following caveats:</p>

<ul><li>Admins may manually create users if they wish. This may be useful if
the admin wants to pre-assign users to groups in Application Lifecycle Service before
those users have logged in for the first time. The admin must create
the user with the same username that AOK will receive from the
strategy.</li>
<li>Passwords set while creating users or using the password-change
function will be disregarded - Application Lifecycle Service/AOK does not manage the
external authentication systems.</li>
<li>Admins may delete users, but the user will be recreated if they log
in again via AOK. If an admin wishes to prevent a user from using
Application Lifecycle Service, the user's login credentials should be revoked in the
external authentication system.</li>
</ul><h2 id="first-admin-user-setup">First Admin User Setup<a href="#first-admin-user-setup" title="Permalink to this headline"></a></h2>

<p>When setting up an Application Lifecycle Service system using AOK, complete the "Set Up First
Admin User" form shown by the web Management Console before configuring
LDAP authentication. This creates an administrative user, and changes
the password of the 'helion' user on the VM to match whatever was
entered in the form.</p>

<p>You may use either a temporary username (e.g. "firstuser") which will be
deleted later, or use the LDAP username you will ultimately use once AOK
is configured.</p>

<p>Once the first user has been created:</p>

<ul><li><p>Log in to the micro cloud VM or Core node as the 'helion' user
(with the password set previously)</p></li>
<li><p><a href="#aok-configuration"><em>Configure AOK</em></a> to use LDAP</p></li>
<li><p>Set the <code>admin_user</code> key with the desired LDAP
admin username:</p>

<pre><code>$ kato config set aok strategy/ldap/admin_user &lt;username&gt;
</code></pre>

<p>This user will be granted admin privileges when logging in for the
first time.</p></li>
<li><p>If you created a temporary admin user, delete it at this point.</p></li>
</ul><h2 id="regular-ldap-user-setup">Regular LDAP User Setup<a href="#regular-ldap-user-setup" title="Permalink to this headline"></a></h2>

<p>New users logging in to the Management Console for the first time using
LDAP authentication will not be a member of any organization (and won't
be able to do anything). An admin will have to add each user to an
organization after their initial login.</p>
	</article>
</div>

<div id="sidebar" class="grid_5 top-spacer">
	<aside class="signup-box">
		<p class="align-center">
			Download the<br>Development Platform<br>
			<a href="../../../../../../external.html?link=https://helion.hpwsportal.com/#/Home/Show">DOWNLOAD NOW</a>
		</p>
	</aside>
	
 
	<aside class="signup-box">
		<p class="align-center">
			Take the Helion Development Platform for a Free Spin<br>
			<a href="../../../../../helion/devplatform/ALS-developer-trial-quick-start/index.html">Quick Start Developer Trial</a>
		</p>
	</aside>
<!--	
	<aside class="signup-box">
		<p class="align-center">Make sure to check out our Developer Portal
			<a href="https://dev.hpcloud.com">dev.hpcloud.com
</a><br>
 
		</p>
	</aside>
-->	
	<aside class="box section-navigation">
  
     
  
  <ul>
    
      
      
      <li>
        <a class="" href="../../../../../index.html"><span>HP Helion Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/index.html"><span>HP Helion Development Platform Documentation Home</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/install/index.html"><span>Development Platform Installation & Configuration</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/install/community/index.html"><span>Development Platform Community Edition Installation & Configuration</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/openstack/update/devplat/101/index.html"><span>Development Platform Commercial 1.0.1 Update</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/appdev/index.html"><span>Application Developer Resources</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/sysadmin/index.html"><span>IT Ops Resources</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/appdev/index.html#sample"><span>Sample Code</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/release-notes/index.html"><span>Release Notes</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/related-topics/index.html"><span>Related Documentation</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/deploy/index.html"><span>Application Lifecycle Service Configuration and Deployment</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../index.html"><span>ALS Admin Guide</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/eula/index.html"><span>End User License Agreement</span></a>
      </li>
    
      
      
      <li>
        <a class="" href="../../../../../helion/devplatform/3rd-party-license-agreements/index.html"><span>Open Source and Third-Party Software License Agreements</span></a>
      </li>
    
  </ul>
</aside>
</div>

			</div> <!-- #main -->
		</div> <!-- #main-container -->
	</div> <!-- #wrapper -->

		
  <footer class="footer">
    <div class="container_16">
    	<div class="wrapper grid_16">
    		<ul class="footer-social">
    			<li class="twitter"><a href="../../../../../../external.html?link=https://twitter.com/hphelioncloud"></a></li>
    			<li class="youtube"><a href="../../../../../../external.html?link=http://www.youtube.com/hpcloud"></a></li>
    			<li class="rss"><a href="../../../../../../external.html?link=http://h30499.www3.hp.com/hpeb/rss/board?board.id=sws-661"></a></li>
    			<li class="facebook"><a href="../../../../../../external.html?link=https://www.facebook.com/HPCloud"></a></li>
    			<li class="linkedin stretch"><a href="../../../../../../external.html?link=https://www.linkedin.com/company/hewlett-packard"></a></li>
    		</ul>
    		<ul class="contact-info">
    			<li>In the U.S.<br />1-855-61CLOUD</li>
    			<li>Worldwide<br />+1678-745-9010</li>
    			<li class="col-3">Online Support<br /><a href="mailto:support@hpcloud.com">Email</a> 
				<!-- comment out per JC
				or <span class="link" onclick="jQuery('#hpcloud-chat-button a').click();">Chat with us</span>
				-->
				</li>
    		</ul>
    		<div class="copyright">
    			<p>The OpenStack&reg; Word Mark and OpenStack Logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.</p><br />
    			<p>&copy; 2014 Hewlett-Packard Development Company, L.P.<br /><a href="../../../../../../external.html?link=http://www.hpcloud.com/legal-documents">HP Cloud legal documents and privacy policy</a></p>
    		</div>
    	</div>
    </div>
  </footer>

	<script src="../../../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="../../../../../../ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../../../../js/jquery-1.8.2f.min.html"><\/script>')</script>

  <script src="../../../../../js/combined.js"></script>
  <script>
      __HP_CHAT_CONF = {};
      __HP_CHAT_CONF.sales = true;
      __HP_CHAT_CONF.support = true;
    </script>
	
    <script> //removed per JC
    //(function($, window) {
    //    $(window).load(function() {
    //    var sNew = document.createElement("script");
    //  sNew.async = true;
    //sNew.src = 'https://a248.e.akamai.net/cdn.hpcloudsvc.com/gcbb18d905d32174e6eb205943b0dea4a/prodae1/chat.js';
    //var s0 = document.getElementsByTagName('script')[0];
    //s0.parentNode.insertBefore(sNew, s0);
    //});
    //})(jQuery, this);
    </script>
    <script>
        //Executes your code when the DOM is ready.  Acts the same as $(document).ready().
        function styleRestCmds() {
            $("h5:contains('GET')").addClass('rest_cmd cmd_get');
            $("h5:contains('POST')").addClass('rest_cmd cmd_post');
            $("h5:contains('FormPOST')").removeClass('rest_cmd cmd_post');
            $("h5:contains('PUT')").addClass('rest_cmd cmd_put');
            $("h5:contains('COPY')").addClass('rest_cmd cmd_copy');
            $("h5:contains('PATCH')").addClass('rest_cmd cmd_patch');
            $("h5:contains('HEAD')").addClass('rest_cmd cmd_head');
            $("h5:contains('DELETE')").addClass('rest_cmd cmd_delete');
        }

        $(function() {
            //Calls the tocify method on your HTML div.
            $("#toc").tocify({
                'selectors': 'h2,h3,h4',
                'showAndHideOnScroll': false,
                'hideEffect': 'slideUp',
                'scrollTo': 55    // Amount of space between top of page and selected content
              }
            );
            // Style the REST commands
            styleRestCmds();
        });
    </script>
</body>

<!-- Mirrored from docs.hpcloud.com/als/v1/admin/server/aok/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 14:59:55 GMT -->
</html>
