<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<!-- Mirrored from docs.hpcloud.com/publiccloud/api/block-storage/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 15:01:25 GMT -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>HP Helion Public Cloud Block Storage API</title>
	
		<meta name="description" content="HP Helion Public Cloud Block Storage API Specification">
	
	
		<meta name="keywords" content="block storage, volume, cinder, bootable volume, volume backup">
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="shortcut icon" href="../../../favicon.ico" type="image/vnd.microsoft.icon" />
  <link rel="stylesheet" href="../../../css/combined.css">

	<script src="../../../js/modernizr-2.5.3.min.js"></script>
	<script src="../../../js/metrics.js"></script> 
	
	
	
	
	<!--[if IEMobile 7]><html class="iem7"  lang="en" dir="ltr"><![endif]-->
<!--[if lte IE 6]><html class="lt-ie9 lt-ie8 lt-ie7"  lang="en" dir="ltr"><![endif]-->
<!--[if (IE 7)&(!IEMobile)]><html class="lt-ie9 lt-ie8"  lang="en" dir="ltr"><![endif]-->
<!--[if IE 8]><html class="lt-ie9"  lang="en" dir="ltr"><![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)]><!--><html  lang="en" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#"><!--<![endif]-->

<head profile="../../../../external.html?link=http://www.w3.org/1999/xhtml/vocab">
  
  
  <meta charset="utf-8" />
<meta name="web_section_id" content="R11646" />
<meta name="bu" content="corp" />
<meta name="hp_design_version" content="hpweb.2.0" />
<meta name="segment" content="Commercial.B2B" />
<meta name="page_content" content="HP Public Cloud - Enterprise Public Cloud Products &amp;amp; Services" />
<meta name="content_country_applicability" content="w1" />
<meta name="target_country" content="US" />
<meta name="lifecycle" content="presales.awareness" />
<link rel="shortcut icon" href="../../../../external.html?link=http://www.hpcloud.com/sites/all/themes/hpcloud/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<meta name="description" content="HP Public Cloud provides on-demand, pay-as-you-go cloud services for computing, storage infrastructure as well as platform services. Explore the cloud." />
<meta about="/hp-helion-public-cloud" property="sioc:num_replies" content="0" datatype="xsd:integer" />
<meta content="HP Helion Public Cloud" about="/hp-helion-public-cloud" property="dc:title" />
<link rel="canonical" href="../../../../external.html?link=http://www.hpcloud.com/" />
<link rel="shortlink" href="../../../../external.html?link=http://www.hpcloud.com/" />
<meta property="og:url" content="http://www.hpcloud.com/" />
<meta property="og:type" content="website" />
<meta property="og:title" content="HP Public Cloud" />
<meta property="og:site_name" content="HP Public Cloud" />
   

      <meta name="MobileOptimized" content="width">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="cleartype" content="on">
<!--
  <link type="text/css" rel="stylesheet" href="http://www.hpcloud.com/sites/default/files/css/css_791YXBaKKm1ORM_7huSKEsIV9tSWq6wmRkERhuXpN6w.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://www.hpcloud.com/sites/default/files/css/css_mGbqk88-VTBvzao9MxjjAm60xrWNV9JbuxL-XsOdBKY.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://www.hpcloud.com/sites/default/files/css/css_UOCsF9jLPA1lMMj-BVVBzE0l5EIeCw_3PDG18zycRw4.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://www.hpcloud.com/sites/default/files/css/css_MfNt8ndX5CcdNjNUw-v__mhCPodpzDeR8KuzaXo-yzQ.css" media="all" />
-->
  <script src="../../../../www.hpcloud.com/sites/default/files/js/js__kIQ7mxn9cgBO3AAnwhKUMQqNbqZZQWibQB6EZRy6u0.html"></script>
<script src="../../../../www.hpcloud.com/sites/default/files/js/js_CC-zfeuQHcDhFtVRuKW53h30TL7j_105J32Nz8b8R38.js"></script>
<script>var WRInitTime=(new Date()).getTime(); // ClickTale top part</script>
<script src="../../../../www.hpcloud.com/sites/default/files/js/js_mZQzCl35imgkCIIjGS2RPLYDNuLk9ncwZ5c7lh6STTw.js"></script>
<script>		<!-- Start Visual Website Optimizer Asynchronous Code -->
		var _vwo_code=(function(){
		var account_id=37831,
		settings_tolerance=2000,
		library_tolerance=2500,
		use_existing_jquery=false,
		// DO NOT EDIT BELOW THIS LINE
		f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('../../../../external.html?link=http://dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
		<!-- End Visual Website Optimizer Asynchronous Code --></script>
<script src="../../../../www.hpcloud.com/sites/default/files/js/js_kv2zkR2iCsl2ctlEzg-TiOxz1jEVBjx7VzAR0mTzlew.js"></script>
<script src="../../../../www.hpcloud.com/sites/default/files/js/js_qz7rta8c7yTiJLYNkf4WKFMgEeuRUE1AgWXd6NCAQZU.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"hpcloud","theme_token":"NwfPTBjz4hDLctcBflIoKqD4J2r3kIAtWobc48FZKTo","js":{"https:\/\/clicktale.pantherssl.com\/WRd.js":1,"0":1,"sites\/all\/modules\/custom\/hpcs_referrer_url\/js\/referrer.min.js":1,"sites\/all\/modules\/custom\/kenshoo\/js\/kenshoo.min.js":1,"1":1,"sites\/all\/themes\/hpcloud\/js\/fastclick.min.js":1,"sites\/all\/themes\/hpcloud\/js\/main.min.js":1,"sites\/all\/modules\/custom\/lp_chat\/js\/le-mtagconfig.js":1,"sites\/all\/modules\/custom\/hpcloud_jquery\/js\/jquery-1.9.0.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"misc\/jquery.cookie.js":1,"2":1,"sites\/all\/modules\/custom\/omniture\/js\/hpcs_metrics.js":1,"sites\/all\/modules\/contrib\/environment_indicator\/tinycon.min.js":1,"sites\/all\/modules\/contrib\/environment_indicator\/environment_indicator.js":1,"sites\/all\/modules\/contrib\/environment_indicator\/color.js":1,"3":1,"sites\/all\/modules\/custom\/lp_chat\/js\/lp-initialize.js":1,"sites\/all\/themes\/hpcloud\/js\/vendor\/modernizr-2.6.2.min.js":1,"sites\/all\/themes\/hpcloud\/js\/respond.min.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/comment\/comment.css":1,"sites\/all\/modules\/contrib\/date\/date_api\/date.css":1,"sites\/all\/modules\/contrib\/date\/date_popup\/themes\/datepicker.1.7.css":1,"sites\/all\/modules\/contrib\/environment_indicator\/environment_indicator.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/views\/css\/views.css":1,"sites\/all\/modules\/contrib\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/uif\/uif.css":1,"sites\/all\/modules\/contrib\/field_collection\/field_collection.theme.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/hpcloud\/css\/screen.css":1,"sites\/all\/themes\/hpcloud\/css\/styles.css":1}}});</script>
      <!--[if lt IE 9]>
    <script src="/sites/all/themes/zen/js/html5-respond.js"></script>
    <![endif]-->
      <!--[if (lt IE 9) & (!IEMobile)]>
    <link rel="stylesheet" href="http://www.hpcloud.com/sites/all/themes/hpcloud//css/ie8.css">
    <script src="/sites/all/themes/zen/js/html5-respond.js"></script>
    <![endif]-->
    
    <!--[if IE]>
    <link rel="stylesheet" href="http://www.hpcloud.com/sites/all/themes/hpcloud//css/ie.css">
    <![endif]-->

    
	
	
	
	
	
	
	
	
	
	
</head>
<body>
  <div id="wrapper">
    <!--[if lt IE 7]>
    	<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div class="header-container">
      <header class="header">
      	<div class="top-bar" style="height: 75px;">
		
      		<div class="search-wrapper wrapper container_16">
			
      			<a href="#" class="sales-rep show-320 show-480 hide-768"><span aria-hidden="true" class="icon-icon-sales-rep"></span></a>
      			<nav class="sub-nav" ><!--
				<a href="http://docs.hpcloud.com/" class="logo"  ><img src="/images/HP_Helion_logo_72.png" style="position: absolute;top: 10px;" alt="HP Helion" /></a>-->
        			<ul class="menu"><li class="first leaf menu-mlid-1845"><a href="../../../../external.html?link=http://www.hpcloud.com/support">Support</a></li>
<li class="leaf has-children menu-mlid-1222"><a href="../../../../external.html?link=http://www.hpcloud.com/partners">Partners</a></li>
<li class="leaf menu-mlid-1817"><a href="../../../../external.html?link=http://marketplace.hpcloud.com/" title="">Marketplace</a></li>
<li class="leaf has-children menu-mlid-1223"><a href="../../../../external.html?link=http://www.hpcloud.com/about" title="">About</a></li>
<li class="leaf menu-mlid-1224"><a href="../../../../external.html?link=http://www.hp.com/" title="">hp.com</a></li>
<li class="leaf menu-mlid-1225"><a href="../../../../external.html?link=http://www.hpcloud.com/about/contact">Contact</a></li>
<li class="last leaf menu-mlid-1226"><a href="../../../../external.html?link=http://www.hpcloud.com/console">Log In</a></li>
</ul>
      			</nav>
          </div>
      	</div>
		<!-- per JC
      	<div class="nav-wrapper wrapper container_16">
        	<a href="http://www.hpcloud.com/" class="logo"><img src="/images/HP_Helion_logo_72.png" alt="HP Helion" /></a>
      		<nav class="nav hide-320 show-768">
      			<ul>
      				<li><a href="http://hpcloud.com/products-services">Products <span>& Services</span></a></li>
      				<li><a href="http://hpcloud.com/solutions">Cloud <span>Solutions</span></a></li>
      				<li><a href="http://hpcloud.com/why-hp-cloud">Why HP <span>Cloud?</span></a></li>
      				<li><a href="http://hpcloud.com/learning-center">Learning <span>Center</span></a></li>
      				<li><a href="http://hpcloud.com/blog">The <span>Blog</span></a></li>
      				<li><a href="http://hpcloud.com/free-trial">Sign Up <span>Today</span></a></li>
      			</ul>
      		</nav>
      	</div>
		-->
      </header>
    </div>
		<div id="main-container">
			<div id="main" class="wrapper clearfix container_16">
				<div id="sidebar" class="grid_4 suffix_1 top-spacer">
    <aside>
      <div id="toc_header">
          
             
              <p class="title"><strong><a href="../../../api/copyright.html#block-storage">Copyright</a></strong></p>
             
          
          <p class="title"><strong><a href="../../../api/index.html">API Overview</a></strong></p>
          <p class="title"><strong>Table of Contents</strong></p>
      </div>
      <div id="toc">
      </div>
      <!--<aside class="box section-navigation fixed_menu">
  <ul>
    
  </ul>
</aside>-->
      <!--<aside class="block block-boxes box block-boxes-simple fixed">-->
        <!--<p>Having trouble finding the info you need? Try one of the following helpful links:</p>-->
            <!--<ul>-->
                <!--<li><a href="/downloads">Downloads</a></li>-->
                <!--<li><a href="https://community.hpcloud.com/knowledge-base">Knowledge Base</a></li>-->
                <!--<li><a href="https://community.hpcloud.com/forum">Forums</a></li>-->
                <!--<li><a href="/sitemap">Site Map</a></li>-->
            <!--</ul>-->
      <!--</aside>-->
    </aside>
</div>
<div id="content" class="grid_11">
	<article>
		<!--PUBLISHED-->

<h1 id="hp-helion-public-cloud-block-storage-api-specification">HP Helion Public Cloud Block Storage API Specification</h1>

<p><strong>Date:</strong> May 2014</p>

<p><strong>Document Version:</strong> 1.7</p>

<h2 id="1-overview">1. Overview</h2>

<p>The HP Helion Public Cloud Block Storage service is based on
<a href="../../../../external.html?link=http://docs.openstack.org/developer/cinder/">OpenStack Cinder</a>.</p>

<p>HP Helion Public Cloud Block Storage provides persistent block devices that can be attached to <a href="../../../api/compute/index.html">HP Helion Public Cloud Compute instances</a>. HP Helion Public Cloud Block Storage volumes can be created in sizes from 1GB to 2047GB. Volumes attached to instances can be used as standard block devices. As volumes areexposed as standard block devices, the user is responsible for partitioning them and creating filesystems on them. There are no limitations on whatfilesystems can be created on volumes other than those imposed by the operating system running on the instance to which to volume is attached. Volumes persistuntil the user deletes them. A volume can only be attached to one instance at a time.</p>

<p>HP Helion Public Cloud Block Storage provides data durability with volume snapshots and volume backups. Snapshots capture the point in time state of a volume and are quick to create. A volume from which snapshots have been created cannot be deleted while any of these snapshots remains in existence. To use a snapshot, the user must create a new volume from the snapshot. Backups are full copies of volumes stored to <a href="../../../api/object-storage/index.html">HP Helion Public Cloud Object Storage</a>. Since they are full copies, they take longer to create than snapshots. Backups are independent of the original volume once created and are intended for archival and disaster recovery purposes.</p>

<p>HP Helion Public Cloud Block Storage also supports bootable volumes, volumes which are pre-initialized with an operating system image.</p>

<p>We will be referring to HP Helion Public Cloud Block Storage in this document as simply Block Storage or Block Storage service.</p>

<h3 id="11-api-maturity-level">1.1 API Maturity Level</h3>

<p><strong>Maturity Level</strong>: <em>GA</em> (Block Storage is General Availability)</p>

<p><strong>Version API Status</strong>: <em>CURRENT</em></p>

<h3 id="12-document-revision-history">1.2 Document Revision History</h3>

<table>
  <thead>
    <tr><th align="left">Version</th>
  <th align="left">Date</th>
  <th align="left">Description</th>
</tr>
  </thead>
  <tbody>
    <tr><td align="left">1.0</td>
  <td align="left">27-Mar-2013</td>
  <td align="left">Initial draft.</td>
</tr>
    <tr><td align="left">1.1</td>
  <td align="left">02-May-2013</td>
  <td align="left">Added details of volume cloning to <a href="#create_volume">create volume</a>.</td>
</tr>
    <tr><td align="left">1.2</td>
  <td align="left">06-Jun-2013</td>
  <td align="left">Updated sections on volume snapshots to note volumes must be in an available state. Clarified that volumes with snapshots cannot be deleted. Added the additional availability zone az3. Changed the BASE_URI variable used in the curl examples to HOST_URI to avoid confusion with the BaseURI field used in the document. Updated from v1.1 to v2 for HP Helion Compute Service API Operations. Various other minor corrections.</td>
</tr>
    <tr><td align="left">1.3</td>
  <td align="left">27-Aug-2013</td>
  <td align="left">Added details of the limit on the maximum number of volumes and snapshots which can be created from an origin volume through any combination of create snapshot from volume, create volume from snapshot and clone volume operations. Documented the limit of 26 volumes which can be attached to a guest. Added details to 4.5.4.2 on how to reliably identify an attached volume from within a Linux guest.</td>
</tr>
    <tr><td align="left">1.4</td>
  <td align="left">30-Aug-2013</td>
  <td align="left">Updated references to tenant to use the term project.</td>
</tr>
    <tr><td align="left">1.5</td>
  <td align="left">Apr-2014</td>
  <td align="left">Updated section 3.2</td>
</tr>
    <tr><td align="left">1.6</td>
  <td align="left">April 2014</td>
  <td align="left">Added section 4.5.1 for Limits</td>
</tr>
    <tr><td align="left">1.7</td>
  <td align="left">May 2014</td>
  <td align="left">HP Helion updates</td>
</tr>
  </tbody>
</table><h3 id="13-changes-from-first-gen-api-to-next-gen-api">1.3 Changes from First Gen API to Next Gen API</h3>

<ul><li>Block Storage API status has changed from <em>Public Beta</em> to <em>General Availability</em>.</li>
<li>All operations now support XML output (in addition to existing JSON output).</li>
<li>Block Storage API requests are now cross-AZ, requests no longer need to be sent to individual AZ endpoints.</li>
<li>Create volume requests can specify the AZ to use, defaulting to AZ2.</li>
<li>Volumes can only be attached to instances in the same AZ. Similarly, Boot from volume instances can only be created in the same
AZ as the bootable volume.</li>
<li>Block Storage API endpoints changed from <em>az</em>.<em>region</em>.<em>geo</em>.compute.hpcloudsvc.com to <em>region</em>.<em>geo</em>.block.hpcloudsvc.com.</li>
<li>List volume backups and get volume backups use name instead of display_name.</li>
<li>List volume backups and get volume backups use description instead of display_description.</li>
<li>Backups API URI changed from /hp-volume-backups to /backups</li>
</ul><h2 id="2-architecture-view">2. Architecture View</h2>

<h3 id="21-overview">2.1 Overview</h3>

<p>The Block Storage API is implemented as a set of RESTful web services. All volume, snapshot and backup operations can be performed with standard HTTP calls. See the <a href="../../../../external.html?link=http://en.wikipedia.org/wiki/REST">Wikipedia article on REST</a>  for more information.</p>

<h3 id="22-resources">2.2 Resources</h3>

<p>The Block Storage API allows the management of the following resources:</p>

<ul><li><a href="#volume_resource">Volumes</a></li>
<li><a href="#volume_snapshot_resource">Volume Snapshots</a></li>
<li><a href="#volume_backup_resource">Volume Backups</a></li>
</ul><h4 id="volume_resource">2.2.1 Block Storage Volumes</h4>

<p>Volumes are persistent block devices provided by the Block Storage API. Data on volumes is accessed in the same way that a user accesses data on local physical block devices. On creation, volumes are in an unattached state (and the volume status is <em>available</em>). Volume size is specified at creation time and is fixed for the lifetime of the volume. Volume sizes can be from 1GB to 2047GB in units of 1GB. Volumes have an optional <em>display-name</em> and <em>display-description</em> associated with them.</p>

<p><strong>Bootable volumes</strong> can be created by specifying an <em>image-id</em> when creating
a new volume. The <em>image-id</em> must refer to a suitable image available from
the image service. The bootable volume can be used as the root file system for
a new instance, and offers a persistent storage model to an otherwise ephemeral
instance. An instance created from a bootable volume can be terminated without
losing the volume or its contents (although the instance should be terminated
using the best practices for the guest operating system to avoid the data loss which can result from the improper shutdown of any operating system). A new instance can be created from the same volume.</p>

<p>Volumes may also be created from existing <a href="#volume_snapshot_resource">Volume Snapshots</a> by specifying the <em>snapshot-id</em> at volume creation.</p>

<p>Custom metadata may be associated with a volume at creation time using a set
of optional key-value pairs.</p>

<h4 id="volume_snapshot_resource">2.2.2 Block Storage Volume Snapshots</h4>

<p>Volume Snapshots capture the point in time state of a volume. They are quick
to create.  A volume from which snapshots have been created cannot be deleted while any of these snapshots remains in existence. Volumes must be in an unattached state (with a volume status of <em>available</em>) before a snapshot can be taken from them. To use a snapshot, a new volume must be created from a snapshot. Volume snapshots cannot be attached or otherwise used directly.</p>

<h4 id="volume_backup_resource">2.2.3 Block Storage Volume Backups</h4>

<p>Volume Backups are full copies of volumes stored in HP Object Storage. Since
they are full copies, they take longer to create than snapshots. Backups are
independent of the original volume once created and are intended for archival
and disaster recovery purposes. Volumes must be in an unattached state (with
a volume status of <em>available</em>) before a backup can be taken from them. To use
a backup, the backup must be restored to a new or existing volume.</p>

<h3 id="23-conceptuallogical-architecture-view">2.3 Conceptual/Logical Architecture View</h3>

<p>The Block Storage facility consists of a,</p>

<ul><li>The Block Storage API - a RESTful API which allows users to view,
create, delete, modify, snapshot, backup and restore volumes.</li>
<li>An extension to the <a href="../../../api/compute/index.html">Compute API</a> which allows users
to attach/detach volumes to/from instances.</li>
<li>The volume service which handles volume requests.</li>
<li>The volume backup service which handles volume backup requests.</li>
</ul><p>The compute service handles the volume attach/detach requests, communicating directly with the volume service to do so.</p>

<p>The volume backup service handles volume backup requests, communicating
directly with the volume service and the Object Storage service to
do so.</p>

<h2 id="3-account-level-view">3. Account-level View</h2>

<h3 id="31-accounts">3.1 Accounts</h3>

<p>An account is created when a user first signs up with HP Helion Public Cloud. A <em>project</em> (with an associated <em>project_id</em>) is also created on first signing up with the cloud. All calls to the Block Storage APIs include the users
<em>project_id</em> as part of the call. HP Helion and the OpenStack community previously used the term <em>tenant</em> to refer to the what is now known as a <em>project</em>. The terms can be used interchangeably when reviewing HP Helion documentation (this document uses the term <em>project</em>).</p>

<p>Similarly, the references to <em>tenant_id</em> can be read as <em>project_id</em>. For upstream OpenStack tools and libraries (including <em>python-cinderclient</em> which can be used to interact with the Block Storage API), you can provide your <em>project_name</em> anywhere <em>tenant_name</em> is requested and your <em>project_id</em> anywhere <em>tenant_id</em> is requested. Similarly, where APIs return <em>tenant_id</em> or <em>tenantId</em>, this is equivalent to your <em>project_id</em>.</p>

<p>For additional details on accounts, tenants and projects please refer to the
<a href="../../../api/identity/index.html">Identity Service Overview</a>.</p>

<h3 id="32-regions-and-availability-zones">3.2 Regions and Availability Zones</h3>

<p><strong>Region(s)</strong>: region-a, region-b</p>

<p><strong>Availability Zone(s)</strong>: az1, az2 and az3</p>

<h3 id="33-service-catalog">3.3 Service Catalog</h3>

<p>The listing below shows a fragment of the Service Catalog returned by the
Identity Service which contains the endpoints for Block Storage.</p>

<pre>
  <code>{
endpoints: [2]
    0:  {
    links: {
    self: "https://region-b.geo-1.identity.hpcloudsvc.com/v3/endpoints/13000300_P"
    }
    url: "https://region-b.geo-1.block.hpcloudsvc.com/v1/65589599430509"
    region: "region-b.geo-1"
    interface: "public"
    service_Id: "130"
    id: "13000300_P"
    }
    1:  {
    links: {
    self: "https://region-b.geo-1.identity.hpcloudsvc.com/v3/endpoints/130140_P"
    }
    url: "https://region-a.geo-1.block.hpcloudsvc.com/v1/65589599430509"
    region: "region-a.geo-1"
    interface: "public"
    service_Id: "130"
    id: "130140_P"
    }
type: "volume"
id: "130"
links: {
self: "https://region-b.geo-1.identity.hpcloudsvc.com/v3/services/130"
}
name: "Block Storage"
}
</code>
</pre>

<h2 id="4-rest-api-specifications">4. REST API Specifications</h2>

<h3 id="service_api">4.1 Service API Operations</h3>

<p>In the following sections, a set of examples of how to use each API
operation are provided using the <em>curl</em> command. The examples provided
use Bourne shell style environment variables but should be easily adapted
to Windows style environment variables if you are testing the examples
from a Windows system.</p>

<p>The curl examples do require the following variables to be set before
they will work: AUTH_TOKEN, HOST_URI and PROJECT_ID. Some examples also
use VOLUME_ID, BACKUP_ID and SERVER_ID.</p>

<p>One easy way to retrieve the AUTH_TOKEN, HOST_URI and PROJECT_ID variables
is to run the python novaclient or python cinderclient with the --debug
option with a valid set of credentials configured in your environment.
The variables can be extracted from any of the REQ lines in the debug output.
The VOLUME_ID, BACKUP_ID and SERVER_ID will be valid IDs from the list
of volumes, volume backups and compute instances that your user has
access to respectively.</p>

<h4 id="411-block-storage-service-api-operations">4.1.1 Block Storage Service API Operations</h4>

<p><strong>Hosts</strong>:<br />
https://region-a.geo-1.block.hpcloudsvc.com<br />
https://region-b.geo-1.block.hpcloudsvc.com</p>

<p><strong>BaseURI</strong>: {Host}/v1/{project_id}</p>

<table>
  <thead>
    <tr><th align="left">Resource</th>
  <th align="left">Operation</th>
  <th align="left">HTTP Method</th>
  <th align="left">Path</th>
  <th align="left">JSON/XML?</th>
  <th align="left">Privilege Level</th>
</tr>
  </thead>
  <tbody>
    <tr><td align="left"><strong>Limits</strong></td>
  <td align="left"><a href="#list_limits">List limits</a></td>
  <td align="left">GET</td>
  <td align="left">/limits</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"><strong>Volumes</strong></td>
  <td align="left"><a href="#list_volumes">List volumes</a></td>
  <td align="left">GET</td>
  <td align="left">/volumes</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#list_volumes_details">List volumes details</a></td>
  <td align="left">GET</td>
  <td align="left">/volumes/detail</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#get_volume_details">Get volume details</a></td>
  <td align="left">GET</td>
  <td align="left">/volumes/{volume_id}</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#create_volume">Create volume</a></td>
  <td align="left">POST</td>
  <td align="left">/volumes</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#set_volume_details">Set volume details</a></td>
  <td align="left">PUT</td>
  <td align="left">/volumes/{volume_id}</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#delete_volume">Delete volume</a></td>
  <td align="left">DELETE</td>
  <td align="left">/volumes/{volume_id}</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"><strong>Snapshots</strong></td>
  <td align="left"><a href="#list_snapshots">List volume snapshots</a></td>
  <td align="left">GET</td>
  <td align="left">/snapshots</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#list_snapshots_details">List volume snapshots details</a></td>
  <td align="left">GET</td>
  <td align="left">/snapshots/detail</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#get_snapshot_details">Get volume snapshot details</a></td>
  <td align="left">GET</td>
  <td align="left">/snapshots/{snapshot_id}</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#create_snapshot">Create volume snapshot</a></td>
  <td align="left">POST</td>
  <td align="left">/snapshots</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#delete_snapshot">Delete volume snapshot</a></td>
  <td align="left">DELETE</td>
  <td align="left">/snapshots/{snapshot_id}</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"><strong>Backups</strong></td>
  <td align="left"><a href="#list_backups">List volume backups</a></td>
  <td align="left">GET</td>
  <td align="left">/backups</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#list_backups_details">List volume backups details</a></td>
  <td align="left">GET</td>
  <td align="left">/backups/detail</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#get_backup_details">Get volume backup details</a></td>
  <td align="left">GET</td>
  <td align="left">/backups/{backup_id}</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#create_backup">Create volume backup</a></td>
  <td align="left">POST</td>
  <td align="left">/backups</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#delete_backup">Delete volume backup</a></td>
  <td align="left">DELETE</td>
  <td align="left">/backups/{backup_id}</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#restore_backup">Restore volume backup</a></td>
  <td align="left">POST</td>
  <td align="left">/backups/{backup_id}/restore</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
  </tbody>
</table><h4 id="412-compute-service-api-operations">4.1.2 Compute Service API Operations</h4>

<p><strong>Hosts</strong>:<br />
https://region-a.geo-1.compute.hpcloudsvc.com<br />
https://region-b.geo-1.compute.hpcloudsvc.com</p>

<p><strong>BaseURI</strong>: {Host}/v2/{project_id}</p>

<table>
  <thead>
    <tr><th align="left">Resource</th>
  <th align="left">Operation</th>
  <th align="left">HTTP Method</th>
  <th align="left">Path</th>
  <th align="left">JSON/XML?</th>
  <th align="left">Privilege Level</th>
</tr>
  </thead>
  <tbody>
    <tr><td align="left"><strong>Servers</strong></td>
  <td align="left"><a href="#list_attached_volumes">List attached volumes</a></td>
  <td align="left">GET</td>
  <td align="left">/servers/{server_id}/os-volume_attachments</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#attach_volume">Attach a volume</a></td>
  <td align="left">POST</td>
  <td align="left">/servers/{server_id}/os-volume_attachments</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#detach_volume">Detach a volume</a></td>
  <td align="left">DELETE</td>
  <td align="left">/servers/{server_id}/os-volume_attachments/{volume_id}</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
    <tr><td align="left"></td>
  <td align="left"><a href="#get_attvolume_details">Get attached volume details</a></td>
  <td align="left">GET</td>
  <td align="left">/servers/{server_id}/os-volume_attachments/{volume_id}</td>
  <td align="left">Y/Y</td>
  <td align="left"></td>
</tr>
  </tbody>
</table><h3 id="42-common-request-headers">4.2 Common Request Headers</h3>

<p>Many operations accept request headers. This section provides an overview of
each request header. Consult the specific operation to determine if the
header applies to the operation and any other notes that are of interest.</p>

<h4 id="accept_request">4.2.1 Accept</h4>

<p>Where applicable, this specifies the media types which are acceptable for the
response. The tables in <a href="#service_api">Service API Operations</a> detail which
media types are supported for each operation. Typically, all operations
support either of the following formats:</p>

<ul><li>JSON (application/json)</li>
<li>XML (application/xml)</li>
</ul><p>The response format can also be specified by adding a <em>.json</em> or <em>.xml</em>
extension to the request URI. If both an <em>Accept</em> header and an
extension are used, the extension takes precedence. If no response format
is requested, JSON is the default.</p>

<p>For example:</p>

<pre>
  <code>curl -H "Accept: application/json" ...
</code>
</pre>

<h4 id="content_type_request">4.2.2 Content-Type</h4>

<p>Where applicable, this indicates the media type of the request body. The tables
in <a href="#service_api">Service API Operations</a> detail which formats are supported
for each operation. Typically, all operations support either of the following
formats:</p>

<ul><li>JSON (application/json)</li>
<li>XML (application/xml)</li>
</ul><p>For example:</p>

<pre>
  <code>curl -H "Content-Type: application/json" ...
</code>
</pre>

<h4 id="x_auth_token_request">4.2.3 X-Auth-Token</h4>

<p>All requests to the Block Storage API must be accompanied by a token.
This is issued by the Identity Service in response to a successful
authentication request. Each token has a scope which describes which resources
are accessible with it. If the token is not specified or if an invalid or
expired token is specified, the request will fail.</p>

<h3 id="43-common-response-headers">4.3 Common Response Headers</h3>

<h4 id="content_type_response">4.3.1 Content-Type</h4>

<p>When the response includes a body, this indicates the media type of the
response body. For operations that return a body, an <a href="#accept_request">Accept</a>
request header can be used to request a JSON or XML response.</p>

<h4 id="content_length_response">4.3.2 Content-Length</h4>

<p>When the response includes a body, this indicates the length of the body in
bytes.</p>

<h4 id="date_response">4.3.3 Date</h4>

<p>When supplied, the Date header is the time of the operation expressed in GMT
(effectively UTC) as shown in the following example:</p>

<pre>
  <code>  HTTP/1.1 200 OK
  Date: Sun, 06 Nov 1994 08:49:37 GMT
</code>
</pre>

<h4 id="request_id_response">4.3.4 X-Compute-Request-Id</h4>

<p>The Block Storage API generates a unique id for each request received.
This id is reported in the response with the <em>X-Compute-Request-Id</em> header and
can be used by support to track individual requests within the system in the
event of a failure.</p>

<h3 id="44-error-responses">4.4 Error Responses</h3>

<p>When an error occurs at request time, the system will return an HTTP
error response code denoting the type of error. The system will also
return additional information about the fault in the body of the
response.</p>

<p>JSON</p>

<pre>
  <code>{
    "badRequest": {
        "code": 400
        "message": "Malformed request body",
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;badRequest code="400"
xmlns="http://docs.openstack.org/volume/api/v1"&gt;
  &lt;message&gt;Malformed request body&lt;/message&gt;
&lt;/badRequest&gt;
</code>
</pre>

<p>The error code is returned in the body of the response for convenience.
The message section returns a human-readable message that is appropriate
for display to the end user.</p>

<p>The following error codes are used by Block Storage.</p>

<table>
  <thead>
    <tr><th align="left">Code</th>
  <th align="left">Description</th>
  <th align="left">Notes</th>
</tr>
  </thead>
  <tbody>
    <tr><td align="left">5xx Server Error</td>
  <td align="left">Response codes starting with 5 indicate the server has experienced an error and cannot process the request.</td>
  <td align="left">Retry the request after a short delay. Contact Public Cloud support if the error persists.</td>
</tr>
    <tr><td align="left">400 Bad Request</td>
  <td align="left">The request could not be processed by the server due to malformed syntax.</td>
  <td align="left">Fix the request.</td>
</tr>
    <tr><td align="left">401 Unauthorized</td>
  <td align="left">This usually means that the <a href="#x_auth_token_request">authorization token</a> is missing, invalid or expired.</td>
  <td align="left">Supply a valid token, possibly by request a new one with valid credentials.</td>
</tr>
    <tr><td align="left">403 Forbidden</td>
  <td align="left">The request was a valid request, you do not have the appropriate access rights to the resource.</td>
  <td align="left"></td>
</tr>
    <tr><td align="left">404 Not Found</td>
  <td align="left">The requested resource could not be found.</td>
  <td align="left">Either your are using an incorrect url or the resource request never existed or has been deleted.</td>
</tr>
  </tbody>
</table><p>The OverLimit fault is generated when any limit threshold is exceeded. Limits
can be either transient limits (the number of requests allowed per second) or
static limits (the number of volumes or backups allowed for a particular
project).</p>

<p>JSON</p>

<pre>
  <code>{
    "overLimit" : {
        "code" : 413,
        "message" : "This request was rate-limited."
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;overLimit
    xmlns="http://docs.openstack.org/compute/api/v1.1"
    code="413"&gt;
  &lt;message&gt;This request was rate-limited.&lt;/message&gt;
&lt;/overLimit&gt;
</code>
</pre>

<h3 id="45-service-api-operation-details">4.5 Service API Operation Details</h3>

<h4 id="451-limits--limits">4.5.1 Limits #### {limits}</h4>

<h5 id="list_limits">4.5.1.1 List limits</h5>

<h5 id="get-limits">GET /limits</h5>

<p>Returns current limits for the project.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    limits: {
    rate: [0]
    absolute: {
        maxTotalVolumeGigabytes: 3000
        maxTotalVolumes: 20
        }
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='UTF-8' ?&gt;
&lt;limits&gt;
&lt;rates /&gt;
    &lt;absolute&gt;
        &lt;limit name="maxTotalVolumeGigabytes" value="3000" /&gt;
        &lt;limit name="maxTotalVolumes" value="20" /&gt;
    &lt;/absolute&gt;
&lt;/limits&gt;
</code>
</pre>

<p>
  <strong>Curl Example</strong>
</p>

<pre>
  <code>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/limits
</code>
</pre>

<h4 id="volumes">4.5.2 Volumes</h4>

<p>See <a href="#volume_resource">Block Storage Volumes</a> for details.</p>

<p>
  <strong>Status Lifecycle</strong>
</p>

<p><em>creating</em> =&gt; <em>available</em> (creation of standard volume)</p>

<p><em>downloading</em> =&gt; <em>available</em> (creation of bootable volume)</p>

<p><em>available</em> =&gt; <em>attaching</em> (during attach)</p>

<p><em>attaching</em> =&gt; <em>in-use</em> (after attach)</p>

<p><em>in-use</em> =&gt; <em>detaching</em> (during detach)</p>

<p><em>detaching</em> =&gt; <em>available</em> (after detach)</p>

<p><em>available</em> =&gt; <em>backing-up</em> (during volume backup creation)</p>

<p><em>available</em> =&gt; <em>restoring-backup</em> (during volume backup restore)</p>

<p>In the event of an error the status can be  set to <em>error</em>. If an error occurs
 during attach, the status is set to <em>error_attaching</em>  and if an error occurs
during detach, the volume status is set to <em>error_detaching</em>. If an error occurs 
while restoring  a backup to a volume, the volume status is set to <em>error_restoring</em>.</p>

<p>
  <strong>Rate Limits</strong>
</p>

<p>The Block Storage API has a limit of 1 call per second for each project.</p>

<p>
  <strong>Quota Limits</strong>
</p>

<p>The quota as configured for the project governs the size of the volume that can
be created. An exception will be raised if quota is exceeded. Sample exception:</p>

<pre>
  <code>413 Request Entity Too Large
{
    "overLimit": {
        "code": 413,
        "message": "VolumeSizeExceedsAvailableQuota: Requested volume or snapshot exceeds allowed Gigabytes quota",
        "retryAfter": 0
    }
}
</code>
</pre>

<p>The error reported to the user when using the standard python-cinderclient is:</p>

<pre>
  <code>"ERROR: VolumeLimitExceeded: Maximum number of volumes allowed (10) exceeded"
</code>
</pre>

<p>when the number of volumes quota is exceeded and:</p>

<pre>
  <code>"ERROR: VolumeSizeExceedsAvailableQuota: Requested volume or snapshot exceeds allowed Gigabytes quota"
</code>
</pre>

<p>when the volume size quota is exceed.</p>

<p>The default per-project quotas are as follows:</p>

<table>
  <thead>
    <tr><th align="left">Resource</th>
  <th align="left">Quota</th>
</tr>
  </thead>
  <tbody>
    <tr><td align="left"><strong>Total No. of Volumes and Snapshots</strong></td>
  <td align="left">10</td>
</tr>
    <tr><td align="left"><strong>Total Storage (GB)</strong></td>
  <td align="left">3000</td>
</tr>
  </tbody>
</table><p>
  <strong>Business Rules</strong>
</p>

<p>There is an additional limit on the maximum number of volumes and snapshots which can
be created from an origin volume through any combination of create snapshot from
volume, create volume from snapshot and clone volume operations. The maximum number
of such operations that be performed on any one volume is currently 10. Attempting
to perform additional create snapshot, create volume from snapshot or clone volume
operations after hitting this limit will result in the created resources going into
an error state.</p>

<h5 id="list_volumes">4.5.2.1 List volumes</h5>

<h5 id="get-volumes">GET /volumes</h5>

<p>Lists volumes for this project.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "volumes": [
        {
            "attachments": [], 
            "availability_zone": "az1", 
            "bootable": "false", 
            "created_at": "2013-01-23T11:25:03.000000", 
            "display_description": "test volume 1", 
            "display_name": "testvol01", 
            "id": "128a2078-0de3-4ff2-bf9f-d315e91fe3bb", 
            "metadata": {}, 
            "size": 200, 
            "snapshot_id": null, 
            "source_volid": null, 
            "status": "available", 
            "volume_type": "None"
        }, 
        {
            "attachments": [
                {
                    "device": "/dev/vdd", 
                    "id": "29b53979-c09d-4944-a170-5430aac864df", 
                    "server_id": "c31ae64f-03d4-4bc9-b2bf-06f80db0ff62", 
                    "volume_id": "29b53979-c09d-4944-a170-5430aac864df"
                }
            ], 
            "availability_zone": "az1", 
            "bootable": "true", 
            "created_at": "2013-01-21T16:36:19.000000", 
            "display_description": "test volume 1", 
            "display_name": "testvol01", 
            "id": "29b53979-c09d-4944-a170-5430aac864df", 
            "metadata": {}, 
            "size": 5, 
            "snapshot_id": null, 
            "source_volid": null, 
            "status": "in-use", 
            "volume_type": "None"
        }, 
        {
            "attachments": [], 
            "availability_zone": "az1", 
            "bootable": "false", 
            "created_at": "2013-01-21T14:32:27.000000", 
            "display_description": null, 
            "display_name": null, 
            "id": "d9f5479a-a9af-4e96-b418-0d9a602a8b03", 
            "metadata": {}, 
            "size": 2, 
            "snapshot_id": "2ee9a7ed-48f3-481c-a20e-6c53bf08c067", 
            "source_volid": null, 
            "status": "available", 
            "volume_type": "None"
        }, 
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version="1.0" ?&gt;
&lt;volumes xmlns="http://docs.openstack.org/volume/api/v1" xmlns:atom="http://www.w3.org/2005/Atom"&gt;
    &lt;volume availability_zone="nova" created_at="2013-01-23 11:25:03" display_description="None" display_name="None" id="128a2078-0de3-4ff2-bf9f-d315e91fe3bb" size="200" snapshot_id="None" source_volid="None" status="error" volume_type="None"&gt;
        &lt;attachments/&gt;
        &lt;metadata/&gt;
    &lt;/volume&gt;
    &lt;volume availability_zone="nova" created_at="2013-01-21 16:36:19" display_description="None" display_name="None" id="29b53979-c09d-4944-a170-5430aac864df" size="5" snapshot_id="None" source_volid="None" status="in-use" volume_type="None"&gt;
        &lt;attachments&gt;
            &lt;attachment device="/dev/vdd" id="29b53979-c09d-4944-a170-5430aac864df" server_id="c31ae64f-03d4-4bc9-b2bf-06f80db0ff62" volume_id="29b53979-c09d-4944-a170-5430aac864df"/&gt;
        &lt;/attachments&gt;
        &lt;metadata/&gt;
    &lt;/volume&gt;
    &lt;volume availability_zone="nova" created_at="2013-01-21 14:32:27" display_description="None" display_name="None" id="d9f5479a-a9af-4e96-b418-0d9a602a8b03" size="2" snapshot_id="2ee9a7ed-48f3-481c-a20e-6c53bf08c067" source_volid="None" status="available" volume_type="None"&gt;
        &lt;attachments/&gt;
        &lt;metadata/&gt;
    &lt;/volume&gt;
    &lt;volume availability_zone="nova" created_at="2013-01-17 11:39:56" display_description="None" display_name="None" id="9b93609e-229f-4e99-8f1e-721fcd86e7db" size="1" snapshot_id="None" source_volid="None" status="available" volume_type="None"&gt;
        &lt;attachments/&gt;
        &lt;metadata/&gt;
    &lt;/volume&gt;
&lt;/volumes&gt;
</code>
</pre>

<p>
  <strong>Curl Example</strong>
</p>

<pre>
  <code>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/volumes
</code>
</pre>

<h5 id="list_volumes_details">4.5.2.2 List volumes details</h5>

<h5 id="get-volumesdetail">GET /volumes/detail</h5>

<p>Lists volumes for this project, providing more detail about each volume
than <a href="#list_volumes">List volumes</a>.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "volumes": [
        {
            "attachments": [], 
            "availability_zone": "az1", 
            "bootable": "false", 
            "created_at": "2013-01-23T11:25:03.000000", 
            "display_description": "test volume 1", 
            "display_name": "testvol01", 
            "id": "128a2078-0de3-4ff2-bf9f-d315e91fe3bb", 
            "metadata": {}, 
            "size": 200, 
            "snapshot_id": null, 
            "source_volid": null, 
            "status": "error", 
            "volume_type": "None"
        }, 
        {
            "attachments": [
                {
                    "device": "/dev/vdd", 
                    "id": "29b53979-c09d-4944-a170-5430aac864df", 
                    "server_id": "c31ae64f-03d4-4bc9-b2bf-06f80db0ff62", 
                    "volume_id": "29b53979-c09d-4944-a170-5430aac864df"
                }
            ], 
            "availability_zone": "az1", 
            "bootable": "true", 
            "created_at": "2013-01-21T16:36:19.000000", 
            "display_description": "test volume 2", 
            "display_name": "testvol02", 
            "id": "29b53979-c09d-4944-a170-5430aac864df", 
            "metadata": {}, 
            "size": 5, 
            "snapshot_id": null, 
            "source_volid": null, 
            "status": "in-use", 
            "volume_image_metadata": {
                "image_id": "62560ce2-ee31-4ee6-bc9b-81a98fd3d52b", 
                "image_name": "precise-server-cloudimg-i386"
            }, 
            "volume_type": "None"
        }, 
        {
            "attachments": [], 
            "availability_zone": "az1", 
            "bootable": "false", 
            "created_at": "2013-01-21T14:32:27.000000", 
            "display_description": null, 
            "display_name": null, 
            "id": "d9f5479a-a9af-4e96-b418-0d9a602a8b03", 
            "metadata": {}, 
            "size": 2, 
            "snapshot_id": "2ee9a7ed-48f3-481c-a20e-6c53bf08c067", 
            "source_volid": null, 
            "status": "available", 
            "volume_type": "None"
        }, 
        {
            "attachments": [], 
            "availability_zone": "az1", 
            "bootable": "false", 
            "created_at": "2013-01-17T11:39:56.000000", 
            "display_description": null, 
            "display_name": null, 
            "id": "9b93609e-229f-4e99-8f1e-721fcd86e7db", 
            "metadata": {}, 
            "size": 1, 
            "snapshot_id": null, 
            "source_volid": null, 
            "status": "available", 
            "volume_type": "None"
        }
    ]
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version="1.0" ?&gt;
volumes xmlns="http://docs.openstack.org/volume/api/v1" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:os-vol-image-meta="http://docs.openstack.org/volume/ext/volume_image_metadata/api/v1"&gt;
   &lt;volume availability_zone="nova" created_at="2013-01-23 11:25:03" display_description="None" display_name="None" id="128a2078-0de3-4ff2-bf9f-d315e91fe3bb" size="200" snapshot_id="None" source_volid="None" status="error" volume_type="None"&gt;
       &lt;attachments/&gt;
       &lt;metadata/&gt;
   &lt;/volume&gt;
   &lt;volume availability_zone="nova" created_at="2013-01-21 16:36:19" display_description="None" display_name="None" id="29b53979-c09d-4944-a170-5430aac864df" size="5" snapshot_id="None" source_volid="None" status="in-use" volume_type="None"&gt;
       &lt;attachments&gt;
           &lt;attachment device="/dev/vdd" id="29b53979-c09d-4944-a170-5430aac864df" server_id="c31ae64f-03d4-4bc9-b2bf-06f80db0ff62" volume_id="29b53979-c09d-4944-a170-5430aac864df"/&gt;
       &lt;/attachments&gt;
       &lt;metadata/&gt;
       &lt;volume_image_metadata&gt;
           &lt;meta key="image_id"&gt;62560ce2-ee31-4ee6-bc9b-81a98fd3d52b&lt;/meta&gt;
           &lt;meta key="image_name"&gt;precise-server-cloudimg-i386&lt;/meta&gt;
       &lt;/volume_image_metadata&gt;
   &lt;/volume&gt;
   &lt;volume availability_zone="nova" created_at="2013-01-21 14:32:27" display_description="None" display_name="None" id="d9f5479a-a9af-4e96-b418-0d9a602a8b03" size="2" snapshot_id="2ee9a7ed-48f3-481c-a20e-6c53bf08c067" source_volid="None" status="available" volume_type="None"&gt;
       &lt;attachments/&gt;
       &lt;metadata/&gt;
   &lt;/volume&gt;
   &lt;volume availability_zone="nova" created_at="2013-01-17 11:39:56" display_description="None" display_name="None" id="9b93609e-229f-4e99-8f1e-721fcd86e7db" size="1" snapshot_id="None" source_volid="None" status="available" volume_type="None"&gt;
       &lt;attachments/&gt;
       &lt;metadata/&gt;
   &lt;/volume&gt;
/volumes&gt;
</code>
</pre>

<p>
  <strong>Curl Examples</strong>
</p>

<pre>
  <code>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/volumes/detail
</code>
</pre>

<h5 id="get_volume_details">4.5.2.3 Get volume details</h5>

<h5 id="get-volumesvolume-id">GET /volumes/{volume_id}</h5>

<p>Gets the details of the volume specified by {volume_id}.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
<li><em>volume_id</em> - The identifier for the volume.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "volume": {
        "attachments": [], 
        "availability_zone": "az1", 
        "bootable": "false", 
        "created_at": "2013-01-17T11:39:56.000000", 
        "display_description": null, 
        "display_name": null, 
        "id": "9b93609e-229f-4e99-8f1e-721fcd86e7db", 
        "metadata": {}, 
        "size": 1, 
        "snapshot_id": null, 
        "source_volid": null, 
        "status": "available", 
        "volume_type": "None"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version="1.0" ?&gt;
&lt;volume availability_zone="nova" created_at="2013-01-17 11:39:56" display_description="None" display_name="None" id="9b93609e-229f-4e99-8f1e-721fcd86e7db" size="1" snapshot_id="None" source_volid="None" status="available" volume_type="None" xmlns="http://docs.openstack.org/volume/api/v1" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:os-vol-image-meta="http://docs.openstack.org/volume/ext/volume_image_metadata/api/v1"&gt;
    &lt;attachments/&gt;
    &lt;metadata/&gt;
&lt;/volume&gt;
</code>
</pre>

<p>
  <strong>Curl Examples</strong>
</p>

<pre>
  <code>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/volumes/{volume_id}
</code>
</pre>

<h5 id="create_volume">4.5.2.4 Create volume</h5>

<h5 id="post-volumes">POST /volumes</h5>

<p>Create a new volume of a given size in the specified <em>availability_zone</em>.
If <em>availability_zone</em> is not specified, it defaults to <em>az2</em>.</p>

<p>If <em>snapshot_id</em> is specified, then the volume created is a copy
of the specified snapshot. If the <em>imageRef</em> parameter is specified
then a bootable volume is created using the specified image for the
volume. If the <em>source_volid</em> is specified, then the volume created
is a copy or clone of the specified source volume.</p>

<p>If the <em>imageRef</em> parameter is specified, the <em>size</em> specified for the
volume needs to be sufficiently large to accomodate the size of the
specified image, specifying an inadequate size will result in an
error.</p>

<p>If the <em>source_volid</em> parameter is specified, the specified volume
must be in the <em>available</em> state, specifying a volume which is not
in an <em>available</em> state will result in an error.</p>

<p>The <em>snapshot_id</em>, <em>source_volid</em> and <em>imageRef</em> parameters are
mutually exclusive and only one should be specified in a request.
Specifying values for more than one of these in the same request
will result in an error.</p>

<p>The <em>volume_type</em> defaults to <em>standard</em> which is currently the only
supported type.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<ul><li><em>availability_zone</em> (Optional) - string - The availability zone (az1, az2 or az3)</li>
<li><em>display_description</em> (Optional) - string - Description for the volume</li>
<li><em>display_name</em> (Optional) - string - Name of the volume</li>
<li><em>imageRef</em> (Optional) - string - Id of an image service image from which to create the volume</li>
<li><em>metadata</em> (Optional) - hash or dictionary - Metadata key/value pairs</li>
<li><em>size</em> - (Optional if <em>snapshot_id</em> is specified) - integer - Size of the volume in GB</li>
<li><em>snapshot_id</em> (Optional) - string - Id of a volume snapshot from which to create the volume</li>
<li><em>source_volid</em> (Optional) - string - Id of a volume from which to create the volume</li>
<li><em>volume_type</em> (Optional) - string - The volume type</li>
</ul><p>JSON</p>

<pre>
  <code>{
    "volume":{
        "availability_zone": "az2", 
        "size":1,
        "display_description": "test volume 1", 
        "display_name": "testvol01"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;volume availability_zone="nova" size="1"/&gt;
</code>
</pre>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "volume": {
        "attachments": [], 
        "availability_zone": "az2", 
        "bootable": "false", 
        "created_at": "2013-01-30T13:38:50.411386", 
        "display_description": "test volume 1", 
        "display_name": "testvol01",
        "id": "b6f6b5fb-ba09-44c9-a263-b4acbdbf1d38", 
        "metadata": {}, 
        "size": 1, 
        "snapshot_id": null, 
        "source_volid": null, 
        "status": "creating", 
        "volume_type": "None"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;volume xmlns:atom="http://www.w3.org/2005/Atom"
    xmlns="http://docs.openstack.org/volume/api/v1" status="creating"
    display_name="testvol01" availability_zone="nova"
    created_at="2013-01-30 13:50:55.134360" display_description="test volume 1"
    volume_type="None" snapshot_id="None" source_volid="None"
    id="8276e101-2d67-4e67-b63f-78b3a34e678c" size="1"&gt;
  &lt;attachments /&gt;
  &lt;metadata /&gt;
&lt;/volume&gt;
</code>
</pre>

<p>
  <strong>Curl Example</strong>
</p>

<pre>
  <code>curl -i -k -X POST -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' -d '{"volume":{"availability_zone": "{az}","size":{size},"display_description": "{description}","display_name": "{display_name}"}}' {BaseURI}/volumes
</code>
</pre>

<h5 id="set_volume_details">4.5.2.5 Set volume details</h5>

<h5 id="put-volumesvolume-id">PUT /volumes/{volume_id}</h5>

<p>Modify the details of an existing volume. Details that can be
modified are <em>display_description</em>, <em>display_name</em> and 
<em>metadata</em>. All of these are optional.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
<li><em>volume_id</em> - The identifier for the volume.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<ul><li><em>display_description</em> (Optional) - string - Description for the volume</li>
<li><em>display_name</em> (Optional) - string - Name of the volume</li>
<li><em>metadata</em> (Optional) - hash or dictionary - Metadata key/value pairs</li>
</ul><p>JSON</p>

<pre>
  <code>{
    "volume":{
        "display_description": "new description"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;volume display_description="new description"/&gt;
</code>
</pre>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "volume": {
        "attachments": [], 
        "availability_zone": "az1", 
        "bootable": "false", 
        "created_at": "2013-04-02T14:38:47.000000", 
        "display_description": "new description", 
        "display_name": "testvol01", 
        "id": "d4a389d4-1612-409e-9e6b-d72c99c66a47", 
        "metadata": {}, 
        "size": 1, 
        "snapshot_id": null, 
        "source_volid": null, 
        "status": "available", 
        "volume_type": "None"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;volume xmlns:atom="http://www.w3.org/2005/Atom"
xmlns="http://docs.openstack.org/volume/api/v1" status="available"
display_name="testvol01" availability_zone="az1"
created_at="2013-04-02 14:38:47"
display_description="new description" volume_type="None"
snapshot_id="None" source_volid="None"
id="d4a389d4-1612-409e-9e6b-d72c99c66a47" size="1"&gt;
&lt;attachments /&gt;
&lt;metadata /&gt;
&lt;/volume&gt;
</code>
</pre>

<p>
  <strong>Curl Examples</strong>
</p>

<pre>
  <code>curl -i -k -X PUT -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' -d '{"volume":{"display_description": "{description}"}}' {BaseURI}/volumes/{volume_id}
</code>
</pre>

<h5 id="delete_volume">4.5.2.6 Delete volume</h5>

<h5 id="delete-volumesvolume-id">DELETE /volumes/{volume_id}</h5>

<p>Delete the volume specified by {volume_id}.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
<li><em>volume_id</em> - The identifier for the volume.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>202 - Accepted</p>

<p>
  <strong>Response Data</strong>
</p>

<p>This call does not return a response body.</p>

<p>
  <strong>Curl Example</strong>
</p>

<pre>
  <code>curl -i -k -X DELETE -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/volumes/{volume_id}
</code>
</pre>

<h4 id="453-volume-snapshots">4.5.3 Volume Snapshots</h4>

<p>See <a href="#volume_snapshot_resource">Block Storage Volume Snapshots</a> for details.</p>

<p>
  <strong>Status Lifecycle</strong>
</p>

<p><em>creating</em> =&gt; <em>available</em> (after creation)</p>

<p>In the event of an error status is set to <em>error</em>.</p>

<p>
  <strong>Rate Limits</strong>
</p>

<p>The Block Storage API has a limit of 1 call per second for each project.</p>

<p>
  <strong>Quota Limits</strong>
</p>

<p>The quota limits for snapshots are part of the quota limits for volumes, see
<em>Quota Limits</em> in <a href="#volumes">Block Storage Volumes</a> for details.</p>

<p>
  <strong>Business Rules</strong>
</p>

<p>A volume from which snapshots have been created cannot be deleted while
any of these snapshots remains in existence. After you create a volume
from a snapshot you can delete the snapshot and continue to work with the
volume. You can not create a snapshot from a volume that is attached to a server.</p>

<p>See <em>Business Rules</em> in <a href="#volumes">Block Storage Volumes</a> for some
additional limits on the total number of snapshots that can be created from
a volume (and volumes that can be created from that snapshot).</p>

<h5 id="list_snapshots">4.5.3.1 List volume snapshots</h5>

<h5 id="get-snapshots">GET /snapshots</h5>

<p>Lists volume snapshots for this project. At the moment this returns the
same information as <a href="#list_snapshots_details">List volume snapshots details</a>,
this operation may change in the future to return less information.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "snapshots": [
        {
            "created_at": "2013-01-30T16:44:13.000000", 
            "display_description": null, 
            "display_name": null, 
            "id": "0500944b-1179-4b1c-9f31-b3f0da8e669c", 
            "metadata": {},
            "size": 1, 
            "status": "available", 
            "volume_id": "64f5d2fb-d836-4063-b7e2-544d5c1ff607"
        }, 
        {
            "created_at": "2013-01-30T16:41:58.000000", 
            "display_description": null, 
            "display_name": null, 
            "id": "e45fed49-801d-4a61-8927-5c8005a1c584", 
            "metadata": {},
            "size": 1, 
            "status": "available", 
            "volume_id": "64f5d2fb-d836-4063-b7e2-544d5c1ff607"
        }
    ]
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;snapshots&gt;
  &lt;snapshot status="available" display_name="None"
  created_at="2013-01-30 16:44:13" display_description="None"
  volume_id="64f5d2fb-d836-4063-b7e2-544d5c1ff607"
  id="0500944b-1179-4b1c-9f31-b3f0da8e669c" size="1"&gt;
    &lt;metadata /&gt;
  &lt;/snapshot&gt;
  &lt;snapshot status="available" display_name="None"
  created_at="2013-01-30 16:41:58" display_description="None"
  volume_id="64f5d2fb-d836-4063-b7e2-544d5c1ff607"
  id="e45fed49-801d-4a61-8927-5c8005a1c584" size="1"&gt;
    &lt;metadata /&gt;
  &lt;/snapshot&gt;
&lt;/snapshots&gt;
</code>
</pre>

<p>
  <strong>Curl Examples</strong>
</p>

<pre>
  <code>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/snapshots
</code>
</pre>

<h5 id="list_snapshots_details">4.5.3.2 List volumes snapshots details</h5>

<h5 id="get-snapshotsdetail">GET /snapshots/detail</h5>

<p>Lists volume snapshots for this project. At the moment this returns the
same information as <a href="#list_snapshots">List volume snapshots</a>. This
operation will always return detailed information (while
<a href="#list_snapshots">List volume snapshots</a> may change in the future to
return less information).</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "snapshots": [
        {
            "created_at": "2013-03-28T13:09:55.000000", 
            "display_description": null, 
            "display_name": null, 
            "id": "cb6519c5-1990-4b3d-803f-2aa9679e3c4f", 
            "metadata": {}, 
            "size": 1, 
            "status": "available", 
            "volume_id": "fef2fa3d-19db-4fcc-8228-b1cebf1b2244"
        }, 
        {
            "created_at": "2013-03-29T11:56:44.000000", 
            "display_description": null, 
            "display_name": null, 
            "id": "ed1ea8aa-4440-44ee-a643-9e280ee445e4", 
            "metadata": {}, 
            "size": 1, 
            "status": "error", 
            "volume_id": "48a24407-4c94-46ea-a577-ad71907af2c2"
        }
    ]
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;snapshots&gt;
  &lt;snapshot status="available" display_name="None"
  created_at="2013-03-28 13:09:55" display_description="None"
  volume_id="fef2fa3d-19db-4fcc-8228-b1cebf1b2244"
  id="cb6519c5-1990-4b3d-803f-2aa9679e3c4f" size="1"&gt;
    &lt;metadata /&gt;
  &lt;/snapshot&gt;
  &lt;snapshot status="error" display_name="None"
  created_at="2013-03-29 11:56:44" display_description="None"
  volume_id="48a24407-4c94-46ea-a577-ad71907af2c2"
  id="ed1ea8aa-4440-44ee-a643-9e280ee445e4" size="1"&gt;
    &lt;metadata /&gt;
  &lt;/snapshot&gt;
&lt;/snapshots&gt;
</code>
</pre>

<p>
  <strong>Curl Examples</strong>
</p>

<pre>
  <code>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/snapshots/detail
</code>
</pre>

<h5 id="get_snapshot_details">4.5.3.3 Get volume snapshot details</h5>

<h5 id="get-snapshotssnapshot-id">GET /snapshots/{snapshot_id}</h5>

<p>Gets the details of the snapshot specified by <em>snapshot_id</em>.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
<li><em>snapshot_id</em> - The identifier for the snapshot.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "snapshot": {
        "created_at": "2013-01-30T17:37:06.000000", 
        "display_description": null, 
        "display_name": null, 
        "id": "49bfe04f-32c6-4804-805d-9c3d0040a11f", 
        "metadata": {}, 
        "size": 1, 
        "status": "available", 
        "volume_id": "64f5d2fb-d836-4063-b7e2-544d5c1ff607"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;snapshot xmlns:os-extended-snapshot-attributes="http://docs.openstack.org/volume/ext/extended_snapshot_attributes/api/v1"
status="available" display_name="None"
created_at="2013-01-30 17:37:06" display_description="None"
volume_id="64f5d2fb-d836-4063-b7e2-544d5c1ff607"
id="49bfe04f-32c6-4804-805d-9c3d0040a11f" size="1"&gt;
    &lt;metadata /&gt;
&lt;/snapshot&gt;
</code>
</pre>

<p>
  <strong>Curl Example</strong>
</p>

<pre>
  <code>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/snapshots/{snapshot_id}
</code>
</pre>

<h5 id="create_snapshot">4.5.3.4 Create volume snapshot</h5>

<h5 id="post-snapshots">POST /snapshots</h5>

<p>Create a new snapshot of the specified volume.</p>

<p>The snapshot will be created in the <em>availability_zone</em> of the specified
volume.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<ul><li><em>display_description</em> (Optional) - string - Description for the snapshot</li>
<li><em>display_name</em> (Optional) - string - Name of the snapshot</li>
<li><em>force</em> (Optional) - boolean - Defaults to false.</li>
<li><em>volume_id</em> - string - Id of the volume from which to create the snapshot</li>
</ul><p>JSON</p>

<pre>
  <code>{
    "snapshot": {
        "display_description": null, 
        "display_name": null, 
        "force": false, 
        "volume_id": "64f5d2fb-d836-4063-b7e2-544d5c1ff607"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;snapshot display_name="None" display_description="None"
force="false" volume_id="64f5d2fb-d836-4063-b7e2-544d5c1ff607"/&gt;
</code>
</pre>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "snapshot": {
        "created_at": "2013-01-30T19:15:22.014175", 
        "display_description": null, 
        "display_name": null, 
        "id": "64f0946c-2863-4392-afe3-94f3f600f5e8",
        "metadata": {},
        "size": 1, 
        "status": "creating", 
        "volume_id": "64f5d2fb-d836-4063-b7e2-544d5c1ff607"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;snapshot status="creating" display_name="None"
created_at="2013-01-30 19:16:10.149951" display_description="None"
volume_id="64f5d2fb-d836-4063-b7e2-544d5c1ff607"
id="9b211c57-7fb5-4811-88ea-15fc30908dba" size="1"&gt;
  &lt;metadata /&gt;
&lt;/snapshot&gt;
</code>
</pre>

<p>
  <strong>Curl Example</strong>
</p>

<pre>
  <code>curl -i -k -X POST -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' -d '{"snapshot": {"display_description": {description},"display_name": {name},"force": false,"volume_id": "{volume_id}"}}' {BaseURI}/snapshots
</code>
</pre>

<h5 id="delete_snapshot">4.5.3.5 Delete volume snapshot</h5>

<h5 id="delete-snapshotssnapshot-id">DELETE /snapshots/{snapshot_id}</h5>

<p>Delete the snapshot specified by <em>snapshot_id</em>.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
<li><em>snapshot_id</em> - The identifier for the snapshot.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>202 - Accepted</p>

<p>
  <strong>Response Data</strong>
</p>

<p>This call does not return a response body.</p>

<p>
  <strong>Curl Example</strong>
</p>

<pre>
  <code>curl -i -k -X DELETE -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/snapshots/{snapshot_id}
</code>
</pre>

<h4 id="454-volume-backups">4.5.4 Volume Backups</h4>

<p>See <a href="#volume_backup_resource">Block Storage Volume Backups</a> for details.</p>

<p>
  <strong>Status Lifecycle</strong>
</p>

<p><em>creating</em> =&gt; <em>available</em> (after creation)</p>

<p><em>available</em> =&gt; <em>restoring</em> (during restore)</p>

<p><em>available</em> =&gt; <em>deleting</em> (during delete)</p>

<p>In the event of an error, during any operation, status is set to <em>error</em></p>

<p>Volume status is set to <em>backing-up</em> during backup creation and
 <em>restoring-backup</em>  during backup restore. If an error occurs while restoring
 a backup to a volume, the volume status is set to <em>error_restoring</em>.</p>

<p>
  <strong>Rate Limits</strong>
</p>

<p>The Block Storage API has a limit of 1 call per second for each project.</p>

<p>
  <strong>Quota Limits</strong>
</p>

<p>There are no specified quota limits associated with backups. The only limits are 
those imposed by <a href="../../../api/object-storage/index.html">HP Object Storage</a> where backups are 
actually stored. When restoring a backup, the normal quota limits for volumes
apply if a new volume is created as part of a restore operation. See 
<em>Quota Limits</em> in <a href="#volumes">Block Storage Volumes</a> for details.</p>

<p>
  <strong>Business Rules</strong>
</p>

<p>N/A</p>

<h5 id="list_backups">4.5.4.1 List volume backups</h5>

<h5 id="get-backups">GET /backups</h5>

<p>Lists volume backups for this project.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "backups": [
        {
            "id": "2ef47aee-8844-490c-804d-2a8efe561c65", 
            "links": [
                {   
                    "href": "http://10.3.194.25:8776/v1/c95fc3e4afe248a49a28828f286a7b38/backups/2ef47aee-8844-490c-804d-2a8efe561c65", 
                    "rel": "self"
                }, 
                {
                    "href": "http://10.3.194.25:8776/c95fc3e4afe248a49a28828f286a7b38/backups/2ef47aee-8844-490c-804d-2a8efe561c65", 
                    "rel": "bookmark"
                }
            ], 
            "name": null
        }, 
        {
            "id": "4dbf0ec2-0b57-4669-9823-9f7c76f2b4f8", 
            "links": [
                {
                    "href": "http://10.3.194.25:8776/v1/c95fc3e4afe248a49a28828f286a7b38/backups/4dbf0ec2-0b57-4669-9823-9f7c76f2b4f8", 
                    "rel": "self"
                }, 
                {
                    "href": "http://10.3.194.25:8776/c95fc3e4afe248a49a28828f286a7b38/backups/4dbf0ec2-0b57-4669-9823-9f7c76f2b4f8", 
                    "rel": "bookmark"
                }
            ], 
            "name": null
        }
    ]
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;backups xmlns:backups="http://docs.openstack.org/volume/ext/backups/api/v1"&gt;

  &lt;backup name="None" id="2ef47aee-8844-490c-804d-2a8efe561c65" /&gt;
  &lt;backup name="None" id="4dbf0ec2-0b57-4669-9823-9f7c76f2b4f8" /&gt;
  &lt;backup name="None" id="7ace10b7-3fe6-43a7-89b3-aed33b2fed3f" /&gt;
  &lt;backup name="None" id="ce7f60c5-5b0f-4139-95fd-d0a4dead7533" /&gt;
&lt;/backups&gt;
</code>
</pre>

<p>
  <strong>Curl Example</strong>
</p>

<pre>
  <code>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/backups
</code>
</pre>

<h5 id="list_backups_details">4.5.4.2 List volume backups details</h5>

<h5 id="get-backupsdetail">GET /backups/detail</h5>

<p>Lists volume backups for this project, providing more detail about each
backup than <a href="#list_backups">List volume backups</a>.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "backups": [
        {
            "availability_zone": "az1", 
            "container": "volumebackups", 
            "created_at": "2013-04-02T10:35:27.000000", 
            "description": null, 
            "fail_reason": null, 
            "id": "2ef47aee-8844-490c-804d-2a8efe561c65", 
            "links": [
                {
                    "href": "http://10.3.194.25:8776/v1/c95fc3e4afe248a49a28828f286a7b38/backups/2ef47aee-8844-490c-804d-2a8efe561c65", 
                    "rel": "self"
                }, 
                {
                    "href": "http://10.3.194.25:8776/c95fc3e4afe248a49a28828f286a7b38/backups/2ef47aee-8844-490c-804d-2a8efe561c65", 
                    "rel": "bookmark"
                }
            ], 
            "name": null, 
            "object_count": 22, 
            "size": 1, 
            "status": "available", 
            "volume_id": "e5185058-943a-4cb4-96d9-72c184c337d6"
        }, 
        {
            "availability_zone": "az1", 
            "container": "volumebackups", 
            "created_at": "2013-04-02T10:21:48.000000", 
            "description": null, 
            "fail_reason": null, 
            "id": "4dbf0ec2-0b57-4669-9823-9f7c76f2b4f8", 
            "links": [
                {
                    "href": "http://10.3.194.25:8776/v1/c95fc3e4afe248a49a28828f286a7b38/backups/4dbf0ec2-0b57-4669-9823-9f7c76f2b4f8", 
                    "rel": "self"
                }, 
                {
                    "href": "http://10.3.194.25:8776/c95fc3e4afe248a49a28828f286a7b38/backups/4dbf0ec2-0b57-4669-9823-9f7c76f2b4f8", 
                    "rel": "bookmark"
                }
            ], 
            "name": null, 
            "object_count": 22, 
            "size": 1, 
            "status": "available", 
            "volume_id": "e5185058-943a-4cb4-96d9-72c184c337d6"
        } 
    ]
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;backups xmlns:backups="http://docs.openstack.org/volume/ext/backups/api/v1"&gt;

  &lt;backup status="available" object_count="22"
  container="volumebackups" name="None" availability_zone="az1"
  created_at="2013-04-02 10:35:27" description="None"
  volume_id="e5185058-943a-4cb4-96d9-72c184c337d6"
  fail_reason="None" id="2ef47aee-8844-490c-804d-2a8efe561c65"
  size="1" /&gt;
  &lt;backup status="available" object_count="22"
  container="volumebackups" name="None" availability_zone="az1"
  created_at="2013-04-02 10:21:48" description="None"
  volume_id="e5185058-943a-4cb4-96d9-72c184c337d6"
  fail_reason="None" id="4dbf0ec2-0b57-4669-9823-9f7c76f2b4f8"
  size="1" /&gt;
&lt;/backups&gt;
</code>
</pre>

<p>
  <strong>Curl Examples</strong>
</p>

<pre>
  <code>curl -i -k -X DELETE -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/backups/detail
</code>
</pre>

<h5 id="get_backup_details">4.5.4.3 Get volume backup details</h5>

<h5 id="get-backupsbackup-id">GET /backups/{backup_id}</h5>

<p>Gets the details of the backup specified by {backup_id}.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
<li><em>backup_id</em> - The identifier for the backup.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "backup": {
        "availability_zone": "az1", 
        "container": "volumebackups", 
        "created_at": "2013-04-02T10:35:27.000000", 
        "description": null, 
        "fail_reason": null, 
        "id": "2ef47aee-8844-490c-804d-2a8efe561c65", 
        "links": [
            {
                "href": "http://10.3.194.25:8776/v1/c95fc3e4afe248a49a28828f286a7b38/backups/2ef47aee-8844-490c-804d-2a8efe561c65", 
                "rel": "self"
            }, 
            {
                "href": "http://10.3.194.25:8776/c95fc3e4afe248a49a28828f286a7b38/backups/2ef47aee-8844-490c-804d-2a8efe561c65", 
                "rel": "bookmark"
            }
        ], 
        "name": null, 
        "object_count": 22, 
        "size": 1, 
        "status": "available", 
        "volume_id": "e5185058-943a-4cb4-96d9-72c184c337d6"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;backup xmlns:backups="http://docs.openstack.org/volume/ext/backups/api/v1"
status="available" object_count="22" container="volumebackups"
name="None" availability_zone="az1"
created_at="2013-04-02 10:35:27" description="None"
volume_id="e5185058-943a-4cb4-96d9-72c184c337d6" fail_reason="None"
id="2ef47aee-8844-490c-804d-2a8efe561c65" size="1" /&gt;
</code>
</pre>

<p>
  <strong>Curl Examples</strong>
</p>

<pre>
  <code>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/backups/{backup_id}
</code>
</pre>

<h5 id="create_backup">4.5.4.4 Create volume backup</h5>

<h5 id="post-backups">POST /backups</h5>

<p>Create a new backup of the specified volume, copying the contents of the
volume to the project's Object Storage. The backup will be created
in a container called <em>volumebackups</em> if the container name is not
specified. If the container does not exist, it will be created.</p>

<p>The backup will be created in the <em>availability_zone</em> of the specified
volume.</p>

<p>The volume data is split into chunks (normally 50MB in size but this may
change) and written to files named as follows,</p>

<pre>
  <code>volume_&lt;volume id&gt;/&lt;YYYYMMDDHHMMSS&gt;/az_&lt;availability zone&gt;_backup_&lt;backup id&gt;-&lt;object number&gt;
</code>
</pre>

<p>For example,</p>

<pre>
  <code>volume_795114e8-7489-40be-a978-83797f2c1dd3/20130131124331/az_az1_backup_1-00001
</code>
</pre>

<p>This operation is asynchronous. You must list backups repeatedly to determine
if the backup has been created.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<ul><li><em>container</em> (Optional) - string - The name of the object storage container to which the volume is to be backed up.</li>
<li><em>description</em> (Optional) - string - Description for the backup</li>
<li><em>name</em> (Optional) - string - Name of the backup</li>
<li><em>volume_id</em> - string - Id of the volume from which to create the backup</li>
</ul><p>JSON</p>

<pre>
  <code>{
    "backup": {
        "container": null, 
        "description": null, 
        "name": null, 
        "volume_id": "64f5d2fb-d836-4063-b7e2-544d5c1ff607"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;backup container="None" name="None" description="None"
volume_id="64f5d2fb-d836-4063-b7e2-544d5c1ff607"/&gt;
</code>
</pre>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>202 - Accepted</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "backup": {
        "id": "deac8b8c-35c9-4c71-acaa-889c2d5d5c8e", 
        "links": [
            {
                "href": "http://10.3.194.25:8776/v1/c95fc3e4afe248a49a28828f286a7b38/backups/deac8b8c-35c9-4c71-acaa-889c2d5d5c8e", 
                "rel": "self"
            }, 
            {
                "href": "http://10.3.194.25:8776/c95fc3e4afe248a49a28828f286a7b38/backups/deac8b8c-35c9-4c71-acaa-889c2d5d5c8e", 
                "rel": "bookmark"
            }
        ], 
        "name": null
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;backup xmlns:backups="http://docs.openstack.org/volume/ext/backups/api/v1"
name="None" id="0e11a5c9-57a8-46c7-8f07-f17c7b019ec1" /&gt;
</code>
</pre>

<p>
  <strong>Curl Example</strong>
</p>

<pre>
  <code>curl -i -k -X POST -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' -d '{"backup": {"container":{container_name},"description":{description},"name":{name},"volume_id": "volume_id"}}' {BaseURI}/backups
</code>
</pre>

<h5 id="delete_backup">4.5.4.5 Delete volume backup</h5>

<h5 id="delete-backupsbackup-id">DELETE /backups/{backup_id}</h5>

<p>Delete the backup specified by {backup_id}.</p>

<p>This operation is asynchronous. You must list backups repeatedly to determine
if the backup has been deleted.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
<li><em>backup_id</em> - The identifier for the backup.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>202 - Accepted</p>

<p>
  <strong>Response Data</strong>
</p>

<p>This call does not return a response body.</p>

<p>
  <strong>Curl Example</strong>
</p>

<pre>
  <code>curl -i -k -X DELETE -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/backups/{backup_id}
</code>
</pre>

<h5 id="restore_backup">4.5.4.6 Restore volume backup</h5>

<h5 id="post-backupsbackup-idrestore">POST /backups/{backup_id}/restore</h5>

<p>Restore the specific backup to a volume. The backup objects for this backup
will be copied from the project's Object Storage to a volume.</p>

<p>
  <strong>If a <em>volume_id</em> is specified in the request, that volume will be
overwritten with the backup data. If no <em>volume_id</em> is specified, a new
volume will be created and used for the restore operation.</strong>
</p>

<p>If a new volume is created as part of a restore operation, it will be created
in the <em>az2</em> <em>availability_zone</em>, the API does not currently allow the
<em>availability_zone</em> to be specified. If you require a new volume in a specific
<em>availability_zone</em> for a restore operation, the volume should be created
first using <a href="#create_volume">Create volume</a> which does allow the
<em>availability_zone</em> to be specified.</p>

<p>This operation is asynchronous. To check the status of the restore operation,
the user can call <a href="#get_volume_details">Get volume details</a> for the <em>volume_id</em>
returned in the response (status will be set to <em>restoring</em> while the the
restore operation runs, <em>error_restoring</em> if the restore operation fails and
<em>available</em> if the restore operation succeeds).</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>backup_id</em> - The identifier for the backup.</li>
<li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<ul><li><em>volume_id</em> - string - Id of the volume to which the backup should be restored.</li>
</ul><p>JSON</p>

<pre>
  <code>{
    "restore": {
        "volume_id": "64f5d2fb-d836-4063-b7e2-544d5c1ff607",
     }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;restore volume_id="64f5d2fb-d836-4063-b7e2-544d5c1ff607"/&gt;
</code>
</pre>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>202 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "restore": {
        "backup_id": 2, 
        "volume_id": "795114e8-7489-40be-a978-83797f2c1dd3"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;restore xmlns:backups="http://docs.openstack.org/volume/ext/backups/api/v1"
backup_id="d45c6a10-4471-4dc1-88d2-453e67194db3"
volume_id="e5185058-943a-4cb4-96d9-72c184c337d6" /&gt;
</code>
</pre>

<p>
  <strong>Curl Examples</strong>
</p>

<pre>
  <code>curl -i -k -X POST -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' -d '{"restore":{"volume_id":"{volume_id}"}}' {BaseURI}/backups/{backup_id}/restore
</code>
</pre>

<h4 id="455-servers">4.5.5 Servers</h4>

<p>See <a href="../../../api/compute.html#Server">Compute Service Servers</a> for details of
the Server resource. From the Block Storage Service perspective,
a server is system to which a <a href="#volume_resource">volume</a> can be attached.
When a volume is attached to a server, the server can mount the volume
and use it as a normal block storage device (allowing it to be partitioned,
formatted with a filesystem and so on).</p>

<p>
  <strong>Status Lifecycle</strong>
</p>

<p>The volume status lifecycle for attach/detach is as follows:</p>

<p><em>available</em> =&gt; <em>attaching</em> (during attach)</p>

<p><em>attaching</em> =&gt; <em>in-use</em> (after attach)</p>

<p><em>in-use</em> =&gt; <em>detaching</em> (during detach)</p>

<p><em>detaching</em> =&gt; <em>available</em> (after detach)</p>

<p>If an error occurs during attach, the volume status is set to <em>error_attaching</em>
 and if an error occurs during detach, the volume status is set to <em>error_detaching</em>.</p>

<p>
  <strong>Rate Limits</strong>
</p>

<p>See <a href="../../../api/compute/index.html">Compute instances</a> for details of the rate limits
associated with the Server resource.</p>

<p>
  <strong>Quota Limits</strong>
</p>

<p>N/A</p>

<p>
  <strong>Business Rules</strong>
</p>

<p>A maximum of 26 volumes can be attached to a single guest. This limit is
imposed by KVM (virtio-blk).</p>

<h5 id="list_attached_volumes">4.5.5.1 List attached volumes</h5>

<h5 id="get-serversserver-idos-volume-attachments">GET /servers/{server_id}/os-volume_attachments</h5>

<p>Lists the volumes attached to the server specified by {server_id}.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>project_id</em> - The unique identifier of the project or account.</li>
<li><em>server_id</em> - The identifier for the server.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "volumeAttachments": [
        {
            "device": "/dev/vdb", 
            "id": "795114e8-7489-40be-a978-83797f2c1dd3", 
            "serverId": "bb6a4f73-c851-4d62-8ef4-56c9b6c12df1", 
            "volumeId": "795114e8-7489-40be-a978-83797f2c1dd3"
        }
    ]
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;volumeAttachments&gt;
  &lt;volumeAttachment device="/dev/vdb"
  serverId="bb6a4f73-c851-4d62-8ef4-56c9b6c12df1"
  id="795114e8-7489-40be-a978-83797f2c1dd3"
  volumeId="795114e8-7489-40be-a978-83797f2c1dd3" /&gt;
&lt;/volumeAttachments&gt;
</code>
</pre>

<p>
  <strong>Curl Examples</strong>
</p>

<pre>
  <code>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/servers/{server_id}/os-volume_attachments
</code>
</pre>

<h5 id="attach_volume">4.5.5.2 Attach a volume</h5>

<h5 id="post-serversserver-idos-volume-attachments">POST /servers/{server_id}/os-volume_attachments</h5>

<p>Attach the volume specified by <em>volume_id</em> to the server specified by
<em>server_id</em>. This call takes a device name specified by <em>device</em> but
it is advisory only and should not be relied on to be the same on the
guest instance. In practice, the guest instance allocates device names
in order of availability, starting at /dev/vdc and iterating up,
regardless of what device is requested.</p>

<p>For guests running Linux, the recommended approach for identifying and
using attached volumes from within the guest is to use the unique device
names in the <em>/dev/disk/by-id</em> directory. When a volume is attached to a
guest, on guests using Linux kernel 3.2 or newer, the first 20 characters
of the volume UUID are used as the device serial number and a link to
the volume will appear as <em>/dev/disk/by-id/virtio-</em><em>first 20 characters
of volume UUID</em>. This device path should be used rather than the
<em>/dev/vdX</em> path, particularly if multiple volumes are being attached to
a guest.</p>

<p>For example, when the volume with id 795114e8-7489-40be-a978-83797f2c1dd3
is attached to a guest, the volume can be referenced from within the guest
by the path <em>/dev/disk/by-id/virtio-795114e8-7489-40be-a</em>.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>server_id</em> - The identifier for the server.</li>
<li><em>project_id</em> - The unique identifier of the project or account.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<ul><li><em>volume_id</em> - string - Id of the volume to attach</li>
<li><em>device</em> (Optional) - string - Name of the device to use</li>
</ul><p>JSON</p>

<pre>
  <code>{
    "volumeAttachment": {
        "volumeId": "795114e8-7489-40be-a978-83797f2c1dd3"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;volumeAttachment
volume_id="64f5d2fb-d836-4063-b7e2-544d5c1ff607"/&gt;
</code>
</pre>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "volumeAttachment": {
        "device": "/dev/vdc", 
        "id": "c3b1a45c-9f3a-4226-af72-f38709ab25f2", 
        "serverId": "bb6a4f73-c851-4d62-8ef4-56c9b6c12df1", 
        "volumeId": "c3b1a45c-9f3a-4226-af72-f38709ab25f2"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;volumeAttachment device="/dev/vdc"
serverId="bb6a4f73-c851-4d62-8ef4-56c9b6c12df1"
id="c3b1a45c-9f3a-4226-af72-f38709ab25f2"
volumeId="c3b1a45c-9f3a-4226-af72-f38709ab25f2" /&gt;
</code>
</pre>

<p>
  <strong>Curl Examples</strong>
</p>

<pre>
  <code>curl -i -k -X POST -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' -d '{"volumeAttachment":{"volumeId": "{volume_id}"}}' {BaseURI}/servers/{server_id}/os-volume_attachments
</code>
</pre>

<h5 id="detach_volume">4.5.5.3 Detach a volume</h5>

<h5 id="delete-serversserver-idos-volume-attachmentsvolume-id">DELETE /servers/{server_id}/os-volume_attachments/{volume_id}</h5>

<p>Detach the volume specified by <em>volume_id</em> from the server specified by
<em>server_id</em>.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>server_id</em> - The identifier for the server.</li>
<li><em>project_id</em> - The unique identifier of the project or account.</li>
<li><em>volume_id</em> - The identifier of the volume to detach.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>202 - Accepted</p>

<p>
  <strong>Response Data</strong>
</p>

<p>This call does not return a response body.</p>

<p>
  <strong>Curl Example</strong>
</p>

<pre>
  <code>curl -i -k -X DELETE -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/servers/{server_id}/os-volume_attachments/{volume_id}
</code>
</pre>

<h5 id="get_attvolume_details">4.5.5.4 Get attached volume details</h5>

<h5 id="get-serversserver-idos-volume-attachmentsvolume-id">GET /servers/{server_id}/os-volume_attachments/{volume_id}</h5>

<p>Gets the details of the volume specified by <em>volume_id</em> attached to <em>server_id</em>.</p>

<p>
  <strong>Request Data</strong>
</p>

<p>
  <strong>URL Parameters</strong>
</p>

<ul><li><em>server_id</em> - The identifier for the server.</li>
<li><em>project_id</em> - The unique identifier of the project or account.</li>
<li><em>volume_id</em> - The identifier of the volume to detach.</li>
</ul><p>
  <strong>Data Parameters</strong>
</p>

<p>This call does not require a request body.</p>

<p>
  <strong>Success Response</strong>
</p>

<p>
  <strong>Status Code</strong>
</p>

<p>200 - OK</p>

<p>
  <strong>Response Data</strong>
</p>

<p>JSON</p>

<pre>
  <code>{
    "volumeAttachment": {
        "device": "/dev/vdc", 
        "id": "c3b1a45c-9f3a-4226-af72-f38709ab25f2", 
        "serverId": "bb6a4f73-c851-4d62-8ef4-56c9b6c12df1", 
        "volumeId": "c3b1a45c-9f3a-4226-af72-f38709ab25f2"
    }
}
</code>
</pre>

<p>XML</p>

<pre>
  <code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;volumeAttachment device="/dev/vdc"
serverId="bb6a4f73-c851-4d62-8ef4-56c9b6c12df1"
id="c3b1a45c-9f3a-4226-af72-f38709ab25f2"
volumeId="c3b1a45c-9f3a-4226-af72-f38709ab25f2" /&gt;
</code>
</pre>

<p>
  <strong>Curl Examples</strong>
</p>

<pre>
  <code>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/servers/{server_id}/os-volume_attachments/{volume_id}
</code>
</pre>
	</article>
</div>

			</div> <!-- #main -->
		</div> <!-- #main-container -->
	</div> <!-- #wrapper -->

		
  <footer class="footer">
    <div class="container_16">
    	<div class="wrapper grid_16">
		<ul class="footer-social">
			<li class="twitter"><a href="../../../../external.html?link=https://twitter.com/hphelioncloud"></a></li>
			<li class="youtube"><a href="../../../../external.html?link=http://www.youtube.com/hpcloud"></a></li>
			<li class="rss"><a href="../../../../external.html?link=http://h30499.www3.hp.com/t5/Grounded-in-the-Cloud/bg-p/sws-661#.U7qe27Hn-M8"></a></li>
			<li class="facebook"><a href="../../../../external.html?link=https://www.facebook.com/HPHelion"></a></li>
			<li class="linkedin stretch"><a href="../../../../external.html?link=http://www.linkedin.com/company/3510998"></a></li>
		</ul>
		<ul class="contact-info hide-320 show-768">
			<li>In the U.S.<br />1-855-61CLOUD</li>
			<li>Worldwide<br />+1678-745-9010</li>
			<li class="col-3">Online Support<br /><a href="mailto:support@hpcloud.com">Email</a> or <span class="link" onclick="jQuery('#hpcloud-chat-button a').click();">Chat with us</span></li>
		</ul>
		<div class="copyright">	
			<p>The OpenStack&reg; Word Mark and OpenStack Logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
			</p><br />
			<p>&copy; 2014 Hewlett-Packard Development Company, L.P.<br /><a href="../../../../external.html?link=http://www8.hp.com/us/en/privacy/privacy.html" target="_blank">Privacy</a> | <a href="../../../../external.html?link=http://www8.hp.com/us/en/privacy/terms-of-use.html" target="_blank">Terms of use</a> | <a href="../../../../external.html?link=http://www.hpcloud.com/legal-documents" target="_blank">Legal Documents</a></p>
		</div>
	</div>
	</div>
</footer>

<!-- Load JS -->
<!--[if lt IE 9]>
<script src="http://www.hpcloud.com/sites/all/themes/hpcloud/js/svgeezy.js"></script>
-->
	<script src="../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="../../../../ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../../js/jquery-1.8.2f.min.html"><\/script>')</script>

  <script src="../../../js/combined.js"></script>

<div id="ClickTaleDiv" style="display: none;"></div>    <div class="region region-page-bottom">
    <div id="lpButtonDiv"></div>  </div><!-- /.region -->
<script src="../../../../www.hpcloud.com/sites/default/files/js/js_zUhl2jDXgUKVBRVBUeMbuSby0YSCiXHWIAYNbn9ecwc.js"></script>
<script>ClickTaleSSL=1; // This is intentinally global. 
			if(typeof ClickTale=='function') 
				ClickTale(24406,0.05,"www02");</script>
<script src="../../../../www.hpcloud.com/sites/default/files/js/js_gPMh2zNJqEE6EkEOKNeOTAet3kwTiahCt35rBAtwqq4.js"></script>
<script>
    var _elqQ = _elqQ || [];
    _elqQ.push(['elqSetSiteId', '521454204']);
    _elqQ.push(['elqTrackPageView']);
    
    (function () {
        function async_load() {
            var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
            s.src = '../../../sites/all/modules/custom/custom_eloqua/elqNow/elqCfg.min.html';
            var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
        }
        if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
        else if (window.attachEvent) window.attachEvent('onload', async_load); 
    })();
    </script>
<script src="../../../../www.hpcloud.com/sites/default/files/js/js_lNHbXKW-sJN9oM4eoaw-q0yTco3mOORibOeNn9yzM00.html"></script>
   <script>
        //Executes your code when the DOM is ready.  Acts the same as $(document).ready().
        function styleRestCmds() {
            $("h5:contains('GET')").addClass('rest_cmd cmd_get');
            $("h5:contains('POST')").addClass('rest_cmd cmd_post');
            $("h5:contains('FormPOST')").removeClass('rest_cmd cmd_post');
            $("h5:contains('PUT')").addClass('rest_cmd cmd_put');
            $("h5:contains('COPY')").addClass('rest_cmd cmd_copy');
            $("h5:contains('PATCH')").addClass('rest_cmd cmd_patch');
            $("h5:contains('HEAD')").addClass('rest_cmd cmd_head');
            $("h5:contains('DELETE')").addClass('rest_cmd cmd_delete');
        }

        $(function() {
            //Calls the tocify method on your HTML div.
            $("#toc").tocify({
                'selectors': 'h2,h3,h4',
                'showAndHideOnScroll': false,
                'hideEffect': 'slideUp',
                'scrollTo': 55    // Amount of space between top of page and selected content
              }
            );
            // Style the REST commands
            styleRestCmds();
        });
    </script>

</body>

<!-- Mirrored from docs.hpcloud.com/publiccloud/api/block-storage/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Feb 2015 15:01:41 GMT -->
</html>
